(()=>{var Hs=Object.defineProperty;var Wr=s=>{throw TypeError(s)};var Ks=(s,t,e)=>t in s?Hs(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e;var c=(s,t,e)=>Ks(s,typeof t!="symbol"?t+"":t,e),Ee=(s,t,e)=>t.has(s)||Wr("Cannot "+e);var u=(s,t,e)=>(Ee(s,t,"read from private field"),e?e.call(s):t.get(s)),f=(s,t,e)=>t.has(s)?Wr("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(s):t.set(s,e),E=(s,t,e,r)=>(Ee(s,t,"write to private field"),r?r.call(s,e):t.set(s,e),e),p=(s,t,e)=>(Ee(s,t,"access private method"),e);(function(s){if(typeof s.requestSubmit=="function")return;s.requestSubmit=function(r){r?(t(r,this),r.click()):(r=document.createElement("input"),r.type="submit",r.hidden=!0,this.appendChild(r),r.click(),this.removeChild(r))};function t(r,i){r instanceof HTMLElement||e(TypeError,"parameter 1 is not of type 'HTMLElement'"),r.type=="submit"||e(TypeError,"The specified element is not a submit button"),r.form==i||e(DOMException,"The specified element is not owned by this form element","NotFoundError")}function e(r,i,o){throw new r("Failed to execute 'requestSubmit' on 'HTMLFormElement': "+i+".",o)}})(HTMLFormElement.prototype);var Yr=new WeakMap;function Ps(s){let t=s instanceof Element?s:s instanceof Node?s.parentElement:null,e=t?t.closest("input, button"):null;return e?.type=="submit"?e:null}function qs(s){let t=Ps(s.target);t&&t.form&&Yr.set(t.form,t)}(function(){if("submitter"in Event.prototype)return;let s=window.Event.prototype;if("SubmitEvent"in window){let t=window.SubmitEvent.prototype;if(/Apple Computer/.test(navigator.vendor)&&!("submitter"in t))s=t;else return}addEventListener("click",qs,!0),Object.defineProperty(s,"submitter",{get(){if(this.type=="submit"&&this.target instanceof HTMLFormElement)return Yr.get(this.target)}})})();var Bt={eager:"eager",lazy:"lazy"},me=class me extends HTMLElement{constructor(){super();c(this,"loaded",Promise.resolve());this.delegate=new me.delegateConstructor(this)}static get observedAttributes(){return["disabled","loading","src"]}connectedCallback(){this.delegate.connect()}disconnectedCallback(){this.delegate.disconnect()}reload(){return this.delegate.sourceURLReloaded()}attributeChangedCallback(e){e=="loading"?this.delegate.loadingStyleChanged():e=="src"?this.delegate.sourceURLChanged():e=="disabled"&&this.delegate.disabledChanged()}get src(){return this.getAttribute("src")}set src(e){e?this.setAttribute("src",e):this.removeAttribute("src")}get refresh(){return this.getAttribute("refresh")}set refresh(e){e?this.setAttribute("refresh",e):this.removeAttribute("refresh")}get shouldReloadWithMorph(){return this.src&&this.refresh==="morph"}get loading(){return $s(this.getAttribute("loading")||"")}set loading(e){e?this.setAttribute("loading",e):this.removeAttribute("loading")}get disabled(){return this.hasAttribute("disabled")}set disabled(e){e?this.setAttribute("disabled",""):this.removeAttribute("disabled")}get autoscroll(){return this.hasAttribute("autoscroll")}set autoscroll(e){e?this.setAttribute("autoscroll",""):this.removeAttribute("autoscroll")}get complete(){return!this.delegate.isLoading}get isActive(){return this.ownerDocument===document&&!this.isPreview}get isPreview(){return this.ownerDocument?.documentElement?.hasAttribute("data-turbo-preview")}};c(me,"delegateConstructor");var D=me;function $s(s){switch(s.toLowerCase()){case"lazy":return Bt.lazy;default:return Bt.eager}}var _s={enabled:!0,progressBarDelay:500,unvisitableExtensions:new Set([".7z",".aac",".apk",".avi",".bmp",".bz2",".css",".csv",".deb",".dmg",".doc",".docx",".exe",".gif",".gz",".heic",".heif",".ico",".iso",".jpeg",".jpg",".js",".json",".m4a",".mkv",".mov",".mp3",".mp4",".mpeg",".mpg",".msi",".ogg",".ogv",".pdf",".pkg",".png",".ppt",".pptx",".rar",".rtf",".svg",".tar",".tif",".tiff",".txt",".wav",".webm",".webp",".wma",".wmv",".xls",".xlsx",".xml",".zip"])};function yt(s){if(s.getAttribute("data-turbo-eval")=="false")return s;{let t=document.createElement("script"),e=_r();return e&&(t.nonce=e),t.textContent=s.textContent,t.async=!1,ti(t,s),t}}function ti(s,t){for(let{name:e,value:r}of t.attributes)s.setAttribute(e,r)}function ei(s){let t=document.createElement("template");return t.innerHTML=s,t.content}function y(s,{target:t,cancelable:e,detail:r}={}){let i=new CustomEvent(s,{cancelable:e,bubbles:!0,composed:!0,detail:r});return t&&t.isConnected?t.dispatchEvent(i):document.documentElement.dispatchEvent(i),i}function Gr(s){s.preventDefault(),s.stopImmediatePropagation()}function Lt(){return document.visibilityState==="hidden"?Kr():Hr()}function Hr(){return new Promise(s=>requestAnimationFrame(()=>s()))}function Kr(){return new Promise(s=>setTimeout(()=>s(),0))}function ri(){return Promise.resolve()}function Pr(s=""){return new DOMParser().parseFromString(s,"text/html")}function qr(s,...t){let e=si(s,t).replace(/^\n/,"").split(`
`),r=e[0].match(/^\s+/),i=r?r[0].length:0;return e.map(o=>o.slice(i)).join(`
`)}function si(s,t){return s.reduce((e,r,i)=>{let o=t[i]==null?"":t[i];return e+r+o},"")}function rt(){return Array.from({length:36}).map((s,t)=>t==8||t==13||t==18||t==23?"-":t==14?"4":t==19?(Math.floor(Math.random()*4)+8).toString(16):Math.floor(Math.random()*15).toString(16)).join("")}function oe(s,...t){for(let e of t.map(r=>r?.getAttribute(s)))if(typeof e=="string")return e;return null}function ii(s,...t){return t.some(e=>e&&e.hasAttribute(s))}function ne(...s){for(let t of s)t.localName=="turbo-frame"&&t.setAttribute("busy",""),t.setAttribute("aria-busy","true")}function ae(...s){for(let t of s)t.localName=="turbo-frame"&&t.removeAttribute("busy"),t.removeAttribute("aria-busy")}function oi(s,t=2e3){return new Promise(e=>{let r=()=>{s.removeEventListener("error",r),s.removeEventListener("load",r),e()};s.addEventListener("load",r,{once:!0}),s.addEventListener("error",r,{once:!0}),setTimeout(e,t)})}function $r(s){switch(s){case"replace":return history.replaceState;case"advance":case"restore":return history.pushState}}function ni(s){return s=="advance"||s=="replace"||s=="restore"}function at(...s){let t=oe("data-turbo-action",...s);return ni(t)?t:null}function ar(s){return document.querySelector(`meta[name="${s}"]`)}function ce(s){let t=ar(s);return t&&t.content}function _r(){let s=ar("csp-nonce");if(s){let{nonce:t,content:e}=s;return t==""?e:t}}function ai(s,t){let e=ar(s);return e||(e=document.createElement("meta"),e.setAttribute("name",s),document.head.appendChild(e)),e.setAttribute("content",t),e}function ut(s,t){if(s instanceof Element)return s.closest(t)||ut(s.assignedSlot||s.getRootNode()?.host,t)}function cr(s){return!!s&&s.closest("[inert], :disabled, [hidden], details:not([open]), dialog:not([open])")==null&&typeof s.focus=="function"}function ts(s){return Array.from(s.querySelectorAll("[autofocus]")).find(cr)}async function ci(s,t){let e=t();s(),await Hr();let r=t();return[e,r]}function es(s){if(s==="_blank")return!1;if(s){for(let t of document.getElementsByName(s))if(t instanceof HTMLIFrameElement)return!1;return!0}else return!0}function rs(s){let t=ut(s,"a[href], a[xlink\\:href]");return!t||t.hasAttribute("download")||t.hasAttribute("target")&&t.target!=="_self"?null:t}function ss(s){return M(s.getAttribute("href")||"")}function li(s,t){let e=null;return(...r)=>{let i=()=>s.apply(this,r);clearTimeout(e),e=setTimeout(i,t)}}var di={"aria-disabled":{beforeSubmit:s=>{s.setAttribute("aria-disabled","true"),s.addEventListener("click",Gr)},afterSubmit:s=>{s.removeAttribute("aria-disabled"),s.removeEventListener("click",Gr)}},disabled:{beforeSubmit:s=>s.disabled=!0,afterSubmit:s=>s.disabled=!1}},Nt,xe=class{constructor(t){f(this,Nt,null);Object.assign(this,t)}get submitter(){return u(this,Nt)}set submitter(t){E(this,Nt,di[t]||t)}};Nt=new WeakMap;var hi=new xe({mode:"on",submitter:"disabled"}),k={drive:_s,forms:hi};function M(s){return new URL(s.toString(),document.baseURI)}function ct(s){let t;if(s.hash)return s.hash.slice(1);if(t=s.href.match(/#(.*)$/))return t[1]}function lr(s,t){let e=t?.getAttribute("formaction")||s.getAttribute("action")||s.action;return M(e)}function Qi(s){return(ui(s).match(/\.[^.]*$/)||[])[0]||""}function Bi(s,t){let e=Dr(t.origin+t.pathname);return Dr(s.href)===e||s.href.startsWith(e)}function $(s,t){return Bi(s,t)&&!k.drive.unvisitableExtensions.has(Qi(s))}function Le(s){let t=ct(s);return t!=null?s.href.slice(0,-(t.length+1)):s.href}function _t(s){return Le(s)}function is(s,t){return M(s).href==M(t).href}function gi(s){return s.pathname.split("/").slice(1)}function ui(s){return gi(s).slice(-1)[0]}function Dr(s){return s.endsWith("/")?s:s+"/"}var St=class{constructor(t){this.response=t}get succeeded(){return this.response.ok}get failed(){return!this.succeeded}get clientError(){return this.statusCode>=400&&this.statusCode<=499}get serverError(){return this.statusCode>=500&&this.statusCode<=599}get redirected(){return this.response.redirected}get location(){return M(this.response.url)}get isHTML(){return this.contentType&&this.contentType.match(/^(?:text\/([^\s;,]+\b)?html|application\/xhtml\+xml)\b/)}get statusCode(){return this.response.status}get contentType(){return this.header("Content-Type")}get responseText(){return this.response.clone().text()}get responseHTML(){return this.isHTML?this.response.clone().text():Promise.resolve(void 0)}header(t){return this.response.headers.get(t)}},ye=class extends Set{constructor(t){super(),this.maxSize=t}add(t){if(this.size>=this.maxSize){let r=this.values().next().value;this.delete(r)}super.add(t)}},os=new ye(20);function ns(s,t={}){let e=new Headers(t.headers||{}),r=rt();return os.add(r),e.append("X-Turbo-Request-Id",r),window.fetch(s,{...t,headers:e})}function dr(s){switch(s.toLowerCase()){case"get":return N.get;case"post":return N.post;case"put":return N.put;case"patch":return N.patch;case"delete":return N.delete}}var N={get:"get",post:"post",put:"put",patch:"patch",delete:"delete"};function Fi(s){switch(s.toLowerCase()){case it.multipart:return it.multipart;case it.plain:return it.plain;default:return it.urlEncoded}}var it={urlEncoded:"application/x-www-form-urlencoded",multipart:"multipart/form-data",plain:"text/plain"},jt,Ct,as,cs,lt=class{constructor(t,e,r,i=new URLSearchParams,o=null,l=it.urlEncoded){f(this,Ct);c(this,"abortController",new AbortController);f(this,jt,t=>{});let[g,C]=Xr(M(r),e,i,l);this.delegate=t,this.url=g,this.target=o,this.fetchOptions={credentials:"same-origin",redirect:"follow",method:e.toUpperCase(),headers:{...this.defaultHeaders},body:C,signal:this.abortSignal,referrer:this.delegate.referrer?.href},this.enctype=l}get method(){return this.fetchOptions.method}set method(t){let e=this.isSafe?this.url.searchParams:this.fetchOptions.body||new FormData,r=dr(t)||N.get;this.url.search="";let[i,o]=Xr(this.url,r,e,this.enctype);this.url=i,this.fetchOptions.body=o,this.fetchOptions.method=r.toUpperCase()}get headers(){return this.fetchOptions.headers}set headers(t){this.fetchOptions.headers=t}get body(){return this.isSafe?this.url.searchParams:this.fetchOptions.body}set body(t){this.fetchOptions.body=t}get location(){return this.url}get params(){return this.url.searchParams}get entries(){return this.body?Array.from(this.body.entries()):[]}cancel(){this.abortController.abort()}async perform(){let{fetchOptions:t}=this;this.delegate.prepareRequest(this);let e=await p(this,Ct,as).call(this,t);try{this.delegate.requestStarted(this),e.detail.fetchRequest?this.response=e.detail.fetchRequest.response:this.response=ns(this.url.href,t);let r=await this.response;return await this.receive(r)}catch(r){if(r.name!=="AbortError")throw p(this,Ct,cs).call(this,r)&&this.delegate.requestErrored(this,r),r}finally{this.delegate.requestFinished(this)}}async receive(t){let e=new St(t);return y("turbo:before-fetch-response",{cancelable:!0,detail:{fetchResponse:e},target:this.target}).defaultPrevented?this.delegate.requestPreventedHandlingResponse(this,e):e.succeeded?this.delegate.requestSucceededWithResponse(this,e):this.delegate.requestFailedWithResponse(this,e),e}get defaultHeaders(){return{Accept:"text/html, application/xhtml+xml"}}get isSafe(){return hr(this.method)}get abortSignal(){return this.abortController.signal}acceptResponseType(t){this.headers.Accept=[t,this.headers.Accept].join(", ")}};jt=new WeakMap,Ct=new WeakSet,as=async function(t){let e=new Promise(i=>E(this,jt,i)),r=y("turbo:before-fetch-request",{cancelable:!0,detail:{fetchOptions:t,url:this.url,resume:u(this,jt)},target:this.target});return this.url=r.detail.url,r.defaultPrevented&&await e,r},cs=function(t){return!y("turbo:fetch-request-error",{target:this.target,cancelable:!0,detail:{request:this,error:t}}).defaultPrevented};function hr(s){return dr(s)==N.get}function Xr(s,t,e,r){let i=Array.from(e).length>0?new URLSearchParams(ls(e)):s.searchParams;return hr(t)?[mi(s,i),null]:r==it.urlEncoded?[s,i]:[s,e]}function ls(s){let t=[];for(let[e,r]of s)r instanceof File||t.push([e,r]);return t}function mi(s,t){let e=new URLSearchParams(ls(t));return s.search=e.toString(),s}var Se=class{constructor(t,e){c(this,"started",!1);c(this,"intersect",t=>{t.slice(-1)[0]?.isIntersecting&&this.delegate.elementAppearedInViewport(this.element)});this.delegate=t,this.element=e,this.intersectionObserver=new IntersectionObserver(this.intersect)}start(){this.started||(this.started=!0,this.intersectionObserver.observe(this.element))}stop(){this.started&&(this.started=!1,this.intersectionObserver.unobserve(this.element))}},K=class{static wrap(t){return typeof t=="string"?new this(ei(t)):t}constructor(t){this.fragment=pi(t)}};c(K,"contentType","text/vnd.turbo-stream.html");function pi(s){for(let t of s.querySelectorAll("turbo-stream")){let e=document.importNode(t,!0);for(let r of e.templateElement.content.querySelectorAll("script"))r.replaceWith(yt(r));t.replaceWith(e)}return s}var Ui=100,ot,Y,ke=class{constructor(){f(this,ot,null);f(this,Y,null)}get(t){if(u(this,Y)&&u(this,Y).url===t&&u(this,Y).expire>Date.now())return u(this,Y).request}setLater(t,e,r){this.clear(),E(this,ot,setTimeout(()=>{e.perform(),this.set(t,e,r),E(this,ot,null)},Ui))}set(t,e,r){E(this,Y,{url:t,request:e,expire:new Date(new Date().getTime()+r)})}clear(){u(this,ot)&&clearTimeout(u(this,ot)),E(this,Y,null)}};ot=new WeakMap,Y=new WeakMap;var bi=10*1e3,gt=new ke,dt={initialized:"initialized",requesting:"requesting",waiting:"waiting",receiving:"receiving",stopping:"stopping",stopped:"stopped"},le=class s{constructor(t,e,r,i=!1){c(this,"state",dt.initialized);let o=Oi(e,r),l=fi(vi(e,r),o),g=wi(e,r),C=Ai(e,r);this.delegate=t,this.formElement=e,this.submitter=r,this.fetchRequest=new lt(this,o,l,g,e,C),this.mustRedirect=i}static confirmMethod(t){return Promise.resolve(confirm(t))}get method(){return this.fetchRequest.method}set method(t){this.fetchRequest.method=t}get action(){return this.fetchRequest.url.toString()}set action(t){this.fetchRequest.url=M(t)}get body(){return this.fetchRequest.body}get enctype(){return this.fetchRequest.enctype}get isSafe(){return this.fetchRequest.isSafe}get location(){return this.fetchRequest.url}async start(){let{initialized:t,requesting:e}=dt,r=oe("data-turbo-confirm",this.submitter,this.formElement);if(!(typeof r=="string"&&!await(typeof k.forms.confirm=="function"?k.forms.confirm:s.confirmMethod)(r,this.formElement,this.submitter))&&this.state==t)return this.state=e,this.fetchRequest.perform()}stop(){let{stopping:t,stopped:e}=dt;if(this.state!=t&&this.state!=e)return this.state=t,this.fetchRequest.cancel(),!0}prepareRequest(t){if(!t.isSafe){let e=Ii(ce("csrf-param"))||ce("csrf-token");e&&(t.headers["X-CSRF-Token"]=e)}this.requestAcceptsTurboStreamResponse(t)&&t.acceptResponseType(K.contentType)}requestStarted(t){this.state=dt.waiting,this.submitter&&k.forms.submitter.beforeSubmit(this.submitter),this.setSubmitsWith(),ne(this.formElement),y("turbo:submit-start",{target:this.formElement,detail:{formSubmission:this}}),this.delegate.formSubmissionStarted(this)}requestPreventedHandlingResponse(t,e){gt.clear(),this.result={success:e.succeeded,fetchResponse:e}}requestSucceededWithResponse(t,e){if(e.clientError||e.serverError){this.delegate.formSubmissionFailedWithResponse(this,e);return}if(gt.clear(),this.requestMustRedirect(t)&&Ci(e)){let r=new Error("Form responses must redirect to another location");this.delegate.formSubmissionErrored(this,r)}else this.state=dt.receiving,this.result={success:!0,fetchResponse:e},this.delegate.formSubmissionSucceededWithResponse(this,e)}requestFailedWithResponse(t,e){this.result={success:!1,fetchResponse:e},this.delegate.formSubmissionFailedWithResponse(this,e)}requestErrored(t,e){this.result={success:!1,error:e},this.delegate.formSubmissionErrored(this,e)}requestFinished(t){this.state=dt.stopped,this.submitter&&k.forms.submitter.afterSubmit(this.submitter),this.resetSubmitterText(),ae(this.formElement),y("turbo:submit-end",{target:this.formElement,detail:{formSubmission:this,...this.result}}),this.delegate.formSubmissionFinished(this)}setSubmitsWith(){if(!(!this.submitter||!this.submitsWith)){if(this.submitter.matches("button"))this.originalSubmitText=this.submitter.innerHTML,this.submitter.innerHTML=this.submitsWith;else if(this.submitter.matches("input")){let t=this.submitter;this.originalSubmitText=t.value,t.value=this.submitsWith}}}resetSubmitterText(){if(!(!this.submitter||!this.originalSubmitText)){if(this.submitter.matches("button"))this.submitter.innerHTML=this.originalSubmitText;else if(this.submitter.matches("input")){let t=this.submitter;t.value=this.originalSubmitText}}}requestMustRedirect(t){return!t.isSafe&&this.mustRedirect}requestAcceptsTurboStreamResponse(t){return!t.isSafe||ii("data-turbo-stream",this.submitter,this.formElement)}get submitsWith(){return this.submitter?.getAttribute("data-turbo-submits-with")}};function wi(s,t){let e=new FormData(s),r=t?.getAttribute("name"),i=t?.getAttribute("value");return r&&e.append(r,i||""),e}function Ii(s){if(s!=null){let e=(document.cookie?document.cookie.split("; "):[]).find(r=>r.startsWith(s));if(e){let r=e.split("=").slice(1).join("=");return r?decodeURIComponent(r):void 0}}}function Ci(s){return s.statusCode==200&&!s.redirected}function vi(s,t){let e=typeof s.action=="string"?s.action:null;return t?.hasAttribute("formaction")?t.getAttribute("formaction")||"":s.getAttribute("action")||e||""}function fi(s,t){let e=M(s);return hr(t)&&(e.search=""),e}function Oi(s,t){let e=t?.getAttribute("formmethod")||s.getAttribute("method")||"";return dr(e.toLowerCase())||N.get}function Ai(s,t){return Fi(t?.getAttribute("formenctype")||s.enctype)}var It=class{constructor(t){this.element=t}get activeElement(){return this.element.ownerDocument.activeElement}get children(){return[...this.element.children]}hasAnchor(t){return this.getElementForAnchor(t)!=null}getElementForAnchor(t){return t?this.element.querySelector(`[id='${t}'], a[name='${t}']`):null}get isConnected(){return this.element.isConnected}get firstAutofocusableElement(){return ts(this.element)}get permanentElements(){return hs(this.element)}getPermanentElementById(t){return ds(this.element,t)}getPermanentElementMapForSnapshot(t){let e={};for(let r of this.permanentElements){let{id:i}=r,o=t.getPermanentElementById(i);o&&(e[i]=[r,o])}return e}};function ds(s,t){return s.querySelector(`#${t}[data-turbo-permanent]`)}function hs(s){return s.querySelectorAll("[id][data-turbo-permanent]")}var kt=class{constructor(t,e){c(this,"started",!1);c(this,"submitCaptured",()=>{this.eventTarget.removeEventListener("submit",this.submitBubbled,!1),this.eventTarget.addEventListener("submit",this.submitBubbled,!1)});c(this,"submitBubbled",t=>{if(!t.defaultPrevented){let e=t.target instanceof HTMLFormElement?t.target:void 0,r=t.submitter||void 0;e&&Ei(e,r)&&xi(e,r)&&this.delegate.willSubmitForm(e,r)&&(t.preventDefault(),t.stopImmediatePropagation(),this.delegate.formSubmitted(e,r))}});this.delegate=t,this.eventTarget=e}start(){this.started||(this.eventTarget.addEventListener("submit",this.submitCaptured,!0),this.started=!0)}stop(){this.started&&(this.eventTarget.removeEventListener("submit",this.submitCaptured,!0),this.started=!1)}};function Ei(s,t){return(t?.getAttribute("formmethod")||s.getAttribute("method"))!="dialog"}function xi(s,t){let e=t?.getAttribute("formtarget")||s.getAttribute("target");return es(e)}var Wt,Gt,de=class{constructor(t,e){f(this,Wt,t=>{});f(this,Gt,t=>{});this.delegate=t,this.element=e}scrollToAnchor(t){let e=this.snapshot.getElementForAnchor(t);e?(this.focusElement(e),this.scrollToElement(e)):this.scrollToPosition({x:0,y:0})}scrollToAnchorFromLocation(t){this.scrollToAnchor(ct(t))}scrollToElement(t){t.scrollIntoView()}focusElement(t){t instanceof HTMLElement&&(t.hasAttribute("tabindex")?t.focus():(t.setAttribute("tabindex","-1"),t.focus(),t.removeAttribute("tabindex")))}scrollToPosition({x:t,y:e}){this.scrollRoot.scrollTo(t,e)}scrollToTop(){this.scrollToPosition({x:0,y:0})}get scrollRoot(){return window}async render(t){let{isPreview:e,shouldRender:r,willRender:i,newSnapshot:o}=t,l=i;if(r)try{this.renderPromise=new Promise(z=>E(this,Wt,z)),this.renderer=t,await this.prepareToRenderSnapshot(t);let g=new Promise(z=>E(this,Gt,z)),C={resume:u(this,Gt),render:this.renderer.renderElement,renderMethod:this.renderer.renderMethod};this.delegate.allowsImmediateRender(o,C)||await g,await this.renderSnapshot(t),this.delegate.viewRenderedSnapshot(o,e,this.renderer.renderMethod),this.delegate.preloadOnLoadLinksForView(this.element),this.finishRenderingSnapshot(t)}finally{delete this.renderer,u(this,Wt).call(this,void 0),delete this.renderPromise}else l&&this.invalidate(t.reloadReason)}invalidate(t){this.delegate.viewInvalidated(t)}async prepareToRenderSnapshot(t){this.markAsPreview(t.isPreview),await t.prepareToRender()}markAsPreview(t){t?this.element.setAttribute("data-turbo-preview",""):this.element.removeAttribute("data-turbo-preview")}markVisitDirection(t){this.element.setAttribute("data-turbo-visit-direction",t)}unmarkVisitDirection(){this.element.removeAttribute("data-turbo-visit-direction")}async renderSnapshot(t){await t.render()}finishRenderingSnapshot(t){t.finishRendering()}};Wt=new WeakMap,Gt=new WeakMap;var Te=class extends de{missing(){this.element.innerHTML='<strong class="turbo-frame-error">Content missing</strong>'}get snapshot(){return new It(this.element)}},he=class{constructor(t,e){c(this,"clickBubbled",t=>{this.clickEventIsSignificant(t)?this.clickEvent=t:delete this.clickEvent});c(this,"linkClicked",t=>{this.clickEvent&&this.clickEventIsSignificant(t)&&this.delegate.shouldInterceptLinkClick(t.target,t.detail.url,t.detail.originalEvent)&&(this.clickEvent.preventDefault(),t.preventDefault(),this.delegate.linkClickIntercepted(t.target,t.detail.url,t.detail.originalEvent)),delete this.clickEvent});c(this,"willVisit",t=>{delete this.clickEvent});this.delegate=t,this.element=e}start(){this.element.addEventListener("click",this.clickBubbled),document.addEventListener("turbo:click",this.linkClicked),document.addEventListener("turbo:before-visit",this.willVisit)}stop(){this.element.removeEventListener("click",this.clickBubbled),document.removeEventListener("turbo:click",this.linkClicked),document.removeEventListener("turbo:before-visit",this.willVisit)}clickEventIsSignificant(t){let e=t.composed?t.target?.parentElement:t.target,r=rs(e)||e;return r instanceof Element&&r.closest("turbo-frame, html")==this.element}},Qe=class{constructor(t,e){c(this,"started",!1);c(this,"clickCaptured",()=>{this.eventTarget.removeEventListener("click",this.clickBubbled,!1),this.eventTarget.addEventListener("click",this.clickBubbled,!1)});c(this,"clickBubbled",t=>{if(t instanceof MouseEvent&&this.clickEventIsSignificant(t)){let e=t.composedPath&&t.composedPath()[0]||t.target,r=rs(e);if(r&&es(r.target)){let i=ss(r);this.delegate.willFollowLinkToLocation(r,i,t)&&(t.preventDefault(),this.delegate.followedLinkToLocation(r,i))}}});this.delegate=t,this.eventTarget=e}start(){this.started||(this.eventTarget.addEventListener("click",this.clickCaptured,!0),this.started=!0)}stop(){this.started&&(this.eventTarget.removeEventListener("click",this.clickCaptured,!0),this.started=!1)}clickEventIsSignificant(t){return!(t.target&&t.target.isContentEditable||t.defaultPrevented||t.which>1||t.altKey||t.ctrlKey||t.metaKey||t.shiftKey)}},Be=class{constructor(t,e){this.delegate=t,this.linkInterceptor=new Qe(this,e)}start(){this.linkInterceptor.start()}stop(){this.linkInterceptor.stop()}canPrefetchRequestToLocation(t,e){return!1}prefetchAndCacheRequestToLocation(t,e){}willFollowLinkToLocation(t,e,r){return this.delegate.willSubmitFormLinkToLocation(t,e,r)&&(t.hasAttribute("data-turbo-method")||t.hasAttribute("data-turbo-stream"))}followedLinkToLocation(t,e){let r=document.createElement("form"),i="hidden";for(let[q,b]of e.searchParams)r.append(Object.assign(document.createElement("input"),{type:i,name:q,value:b}));let o=Object.assign(e,{search:""});r.setAttribute("data-turbo","true"),r.setAttribute("action",o.href),r.setAttribute("hidden","");let l=t.getAttribute("data-turbo-method");l&&r.setAttribute("method",l);let g=t.getAttribute("data-turbo-frame");g&&r.setAttribute("data-turbo-frame",g);let C=at(t);C&&r.setAttribute("data-turbo-action",C);let T=t.getAttribute("data-turbo-confirm");T&&r.setAttribute("data-turbo-confirm",T),t.hasAttribute("data-turbo-stream")&&r.setAttribute("data-turbo-stream",""),this.delegate.submittedFormLinkToLocation(t,e,r),document.body.appendChild(r),r.addEventListener("turbo:submit-end",()=>r.remove(),{once:!0}),requestAnimationFrame(()=>r.requestSubmit())}},ge=class{static async preservingPermanentElements(t,e,r){let i=new this(t,e);i.enter(),await r(),i.leave()}constructor(t,e){this.delegate=t,this.permanentElementMap=e}enter(){for(let t in this.permanentElementMap){let[e,r]=this.permanentElementMap[t];this.delegate.enteringBardo(e,r),this.replaceNewPermanentElementWithPlaceholder(r)}}leave(){for(let t in this.permanentElementMap){let[e]=this.permanentElementMap[t];this.replaceCurrentPermanentElementWithClone(e),this.replacePlaceholderWithPermanentElement(e),this.delegate.leavingBardo(e)}}replaceNewPermanentElementWithPlaceholder(t){let e=Li(t);t.replaceWith(e)}replaceCurrentPermanentElementWithClone(t){let e=t.cloneNode(!0);t.replaceWith(e)}replacePlaceholderWithPermanentElement(t){this.getPlaceholderById(t.id)?.replaceWith(t)}getPlaceholderById(t){return this.placeholders.find(e=>e.content==t)}get placeholders(){return[...document.querySelectorAll("meta[name=turbo-permanent-placeholder][content]")]}};function Li(s){let t=document.createElement("meta");return t.setAttribute("name","turbo-permanent-placeholder"),t.setAttribute("content",s.id),t}var H,Tt=class{constructor(t,e,r,i=!0){f(this,H,null);this.currentSnapshot=t,this.newSnapshot=e,this.isPreview=r,this.willRender=i,this.renderElement=this.constructor.renderElement,this.promise=new Promise((o,l)=>this.resolvingFunctions={resolve:o,reject:l})}static renderElement(t,e){}get shouldRender(){return!0}get shouldAutofocus(){return!0}get reloadReason(){}prepareToRender(){}render(){}finishRendering(){this.resolvingFunctions&&(this.resolvingFunctions.resolve(),delete this.resolvingFunctions)}async preservingPermanentElements(t){await ge.preservingPermanentElements(this,this.permanentElementMap,t)}focusFirstAutofocusableElement(){if(this.shouldAutofocus){let t=this.connectedSnapshot.firstAutofocusableElement;t&&t.focus()}}enteringBardo(t){u(this,H)||t.contains(this.currentSnapshot.activeElement)&&E(this,H,this.currentSnapshot.activeElement)}leavingBardo(t){t.contains(u(this,H))&&u(this,H)instanceof HTMLElement&&(u(this,H).focus(),E(this,H,null))}get connectedSnapshot(){return this.newSnapshot.isConnected?this.newSnapshot:this.currentSnapshot}get currentElement(){return this.currentSnapshot.element}get newElement(){return this.newSnapshot.element}get permanentElementMap(){return this.currentSnapshot.getPermanentElementMapForSnapshot(this.newSnapshot)}get renderMethod(){return"replace"}};H=new WeakMap;var Mt=class extends Tt{static renderElement(t,e){let r=document.createRange();r.selectNodeContents(t),r.deleteContents();let i=e,o=i.ownerDocument?.createRange();o&&(o.selectNodeContents(i),t.appendChild(o.extractContents()))}constructor(t,e,r,i,o,l=!0){super(e,r,i,o,l),this.delegate=t}get shouldRender(){return!0}async render(){await Lt(),this.preservingPermanentElements(()=>{this.loadFrameElement()}),this.scrollFrameIntoView(),await Lt(),this.focusFirstAutofocusableElement(),await Lt(),this.activateScriptElements()}loadFrameElement(){this.delegate.willRenderFrame(this.currentElement,this.newElement),this.renderElement(this.currentElement,this.newElement)}scrollFrameIntoView(){if(this.currentElement.autoscroll||this.newElement.autoscroll){let t=this.currentElement.firstElementChild,e=yi(this.currentElement.getAttribute("data-autoscroll-block"),"end"),r=Si(this.currentElement.getAttribute("data-autoscroll-behavior"),"auto");if(t)return t.scrollIntoView({block:e,behavior:r}),!0}return!1}activateScriptElements(){for(let t of this.newScriptElements){let e=yt(t);t.replaceWith(e)}}get newScriptElements(){return this.currentElement.querySelectorAll("script")}};function yi(s,t){return s=="end"||s=="start"||s=="center"||s=="nearest"?s:t}function Si(s,t){return s=="auto"||s=="smooth"?s:t}var ki=(function(){let s=()=>{},t={morphStyle:"outerHTML",callbacks:{beforeNodeAdded:s,afterNodeAdded:s,beforeNodeMorphed:s,afterNodeMorphed:s,beforeNodeRemoved:s,afterNodeRemoved:s,beforeAttributeUpdated:s},head:{style:"merge",shouldPreserve:b=>b.getAttribute("im-preserve")==="true",shouldReAppend:b=>b.getAttribute("im-re-append")==="true",shouldRemove:s,afterHeadMorphed:s},restoreFocus:!0};function e(b,L,v={}){b=z(b);let A=q(L),O=T(b,A,v),w=i(O,()=>g(O,b,A,d=>d.morphStyle==="innerHTML"?(o(d,b,A),Array.from(b.childNodes)):r(d,b,A)));return O.pantry.remove(),w}function r(b,L,v){let A=q(L);return o(b,A,v,L,L.nextSibling),Array.from(A.childNodes)}function i(b,L){if(!b.config.restoreFocus)return L();let v=document.activeElement;if(!(v instanceof HTMLInputElement||v instanceof HTMLTextAreaElement))return L();let{id:A,selectionStart:O,selectionEnd:w}=v,d=L();return A&&A!==document.activeElement?.getAttribute("id")&&(v=b.target.querySelector(`[id="${A}"]`),v?.focus()),v&&!v.selectionEnd&&w&&v.setSelectionRange(O,w),d}let o=(function(){function b(n,a,Q,h=null,F=null){a instanceof HTMLTemplateElement&&Q instanceof HTMLTemplateElement&&(a=a.content,Q=Q.content),h||(h=a.firstChild);for(let m of Q.childNodes){if(h&&h!=F){let x=v(n,m,h,F);if(x){x!==h&&O(n,h,x),l(x,m,n),h=x.nextSibling;continue}}if(m instanceof Element){let x=m.getAttribute("id");if(n.persistentIds.has(x)){let V=w(a,x,h,n);l(V,m,n),h=V.nextSibling;continue}}let I=L(a,m,h,n);I&&(h=I.nextSibling)}for(;h&&h!=F;){let m=h;h=h.nextSibling,A(n,m)}}function L(n,a,Q,h){if(h.callbacks.beforeNodeAdded(a)===!1)return null;if(h.idMap.has(a)){let F=document.createElement(a.tagName);return n.insertBefore(F,Q),l(F,a,h),h.callbacks.afterNodeAdded(F),F}else{let F=document.importNode(a,!0);return n.insertBefore(F,Q),h.callbacks.afterNodeAdded(F),F}}let v=(function(){function n(h,F,m,I){let x=null,V=F.nextSibling,jr=0,W=m;for(;W&&W!=I;){if(Q(W,F)){if(a(h,W,F))return W;x===null&&(h.idMap.has(W)||(x=W))}if(x===null&&V&&Q(W,V)&&(jr++,V=V.nextSibling,jr>=2&&(x=void 0)),h.activeElementAndParents.includes(W))break;W=W.nextSibling}return x||null}function a(h,F,m){let I=h.idMap.get(F),x=h.idMap.get(m);if(!x||!I)return!1;for(let V of I)if(x.has(V))return!0;return!1}function Q(h,F){let m=h,I=F;return m.nodeType===I.nodeType&&m.tagName===I.tagName&&(!m.getAttribute?.("id")||m.getAttribute?.("id")===I.getAttribute?.("id"))}return n})();function A(n,a){if(n.idMap.has(a))B(n.pantry,a,null);else{if(n.callbacks.beforeNodeRemoved(a)===!1)return;a.parentNode?.removeChild(a),n.callbacks.afterNodeRemoved(a)}}function O(n,a,Q){let h=a;for(;h&&h!==Q;){let F=h;h=h.nextSibling,A(n,F)}return h}function w(n,a,Q,h){let F=h.target.getAttribute?.("id")===a&&h.target||h.target.querySelector(`[id="${a}"]`)||h.pantry.querySelector(`[id="${a}"]`);return d(F,h),B(n,F,Q),F}function d(n,a){let Q=n.getAttribute("id");for(;n=n.parentNode;){let h=a.idMap.get(n);h&&(h.delete(Q),h.size||a.idMap.delete(n))}}function B(n,a,Q){if(n.moveBefore)try{n.moveBefore(a,Q)}catch{n.insertBefore(a,Q)}else n.insertBefore(a,Q)}return b})(),l=(function(){function b(d,B,n){return n.ignoreActive&&d===document.activeElement?null:(n.callbacks.beforeNodeMorphed(d,B)===!1||(d instanceof HTMLHeadElement&&n.head.ignore||(d instanceof HTMLHeadElement&&n.head.style!=="morph"?C(d,B,n):(L(d,B,n),w(d,n)||o(n,d,B))),n.callbacks.afterNodeMorphed(d,B)),d)}function L(d,B,n){let a=B.nodeType;if(a===1){let Q=d,h=B,F=Q.attributes,m=h.attributes;for(let I of m)O(I.name,Q,"update",n)||Q.getAttribute(I.name)!==I.value&&Q.setAttribute(I.name,I.value);for(let I=F.length-1;0<=I;I--){let x=F[I];if(x&&!h.hasAttribute(x.name)){if(O(x.name,Q,"remove",n))continue;Q.removeAttribute(x.name)}}w(Q,n)||v(Q,h,n)}(a===8||a===3)&&d.nodeValue!==B.nodeValue&&(d.nodeValue=B.nodeValue)}function v(d,B,n){if(d instanceof HTMLInputElement&&B instanceof HTMLInputElement&&B.type!=="file"){let a=B.value,Q=d.value;A(d,B,"checked",n),A(d,B,"disabled",n),B.hasAttribute("value")?Q!==a&&(O("value",d,"update",n)||(d.setAttribute("value",a),d.value=a)):O("value",d,"remove",n)||(d.value="",d.removeAttribute("value"))}else if(d instanceof HTMLOptionElement&&B instanceof HTMLOptionElement)A(d,B,"selected",n);else if(d instanceof HTMLTextAreaElement&&B instanceof HTMLTextAreaElement){let a=B.value,Q=d.value;if(O("value",d,"update",n))return;a!==Q&&(d.value=a),d.firstChild&&d.firstChild.nodeValue!==a&&(d.firstChild.nodeValue=a)}}function A(d,B,n,a){let Q=B[n],h=d[n];if(Q!==h){let F=O(n,d,"update",a);F||(d[n]=B[n]),Q?F||d.setAttribute(n,""):O(n,d,"remove",a)||d.removeAttribute(n)}}function O(d,B,n,a){return d==="value"&&a.ignoreActiveValue&&B===document.activeElement?!0:a.callbacks.beforeAttributeUpdated(d,B,n)===!1}function w(d,B){return!!B.ignoreActiveValue&&d===document.activeElement&&d!==document.body}return b})();function g(b,L,v,A){if(b.head.block){let O=L.querySelector("head"),w=v.querySelector("head");if(O&&w){let d=C(O,w,b);return Promise.all(d).then(()=>{let B=Object.assign(b,{head:{block:!1,ignore:!0}});return A(B)})}}return A(b)}function C(b,L,v){let A=[],O=[],w=[],d=[],B=new Map;for(let a of L.children)B.set(a.outerHTML,a);for(let a of b.children){let Q=B.has(a.outerHTML),h=v.head.shouldReAppend(a),F=v.head.shouldPreserve(a);Q||F?h?O.push(a):(B.delete(a.outerHTML),w.push(a)):v.head.style==="append"?h&&(O.push(a),d.push(a)):v.head.shouldRemove(a)!==!1&&O.push(a)}d.push(...B.values());let n=[];for(let a of d){let Q=document.createRange().createContextualFragment(a.outerHTML).firstChild;if(v.callbacks.beforeNodeAdded(Q)!==!1){if("href"in Q&&Q.href||"src"in Q&&Q.src){let h,F=new Promise(function(m){h=m});Q.addEventListener("load",function(){h()}),n.push(F)}b.appendChild(Q),v.callbacks.afterNodeAdded(Q),A.push(Q)}}for(let a of O)v.callbacks.beforeNodeRemoved(a)!==!1&&(b.removeChild(a),v.callbacks.afterNodeRemoved(a));return v.head.afterHeadMorphed(b,{added:A,kept:w,removed:O}),n}let T=(function(){function b(n,a,Q){let{persistentIds:h,idMap:F}=d(n,a),m=L(Q),I=m.morphStyle||"outerHTML";if(!["innerHTML","outerHTML"].includes(I))throw`Do not understand how to morph style ${I}`;return{target:n,newContent:a,config:m,morphStyle:I,ignoreActive:m.ignoreActive,ignoreActiveValue:m.ignoreActiveValue,restoreFocus:m.restoreFocus,idMap:F,persistentIds:h,pantry:v(),activeElementAndParents:A(n),callbacks:m.callbacks,head:m.head}}function L(n){let a=Object.assign({},t);return Object.assign(a,n),a.callbacks=Object.assign({},t.callbacks,n.callbacks),a.head=Object.assign({},t.head,n.head),a}function v(){let n=document.createElement("div");return n.hidden=!0,document.body.insertAdjacentElement("afterend",n),n}function A(n){let a=[],Q=document.activeElement;if(Q?.tagName!=="BODY"&&n.contains(Q))for(;Q&&(a.push(Q),Q!==n);)Q=Q.parentElement;return a}function O(n){let a=Array.from(n.querySelectorAll("[id]"));return n.getAttribute?.("id")&&a.push(n),a}function w(n,a,Q,h){for(let F of h){let m=F.getAttribute("id");if(a.has(m)){let I=F;for(;I;){let x=n.get(I);if(x==null&&(x=new Set,n.set(I,x)),x.add(m),I===Q)break;I=I.parentElement}}}}function d(n,a){let Q=O(n),h=O(a),F=B(Q,h),m=new Map;w(m,F,n,Q);let I=a.__idiomorphRoot||a;return w(m,F,I,h),{persistentIds:F,idMap:m}}function B(n,a){let Q=new Set,h=new Map;for(let{id:m,tagName:I}of n)h.has(m)?Q.add(m):h.set(m,I);let F=new Set;for(let{id:m,tagName:I}of a)F.has(m)?Q.add(m):h.get(m)===I&&F.add(m);for(let m of Q)F.delete(m);return F}return b})(),{normalizeElement:z,normalizeParent:q}=(function(){let b=new WeakSet;function L(w){return w instanceof Document?w.documentElement:w}function v(w){if(w==null)return document.createElement("div");if(typeof w=="string")return v(O(w));if(b.has(w))return w;if(w instanceof Node){if(w.parentNode)return new A(w);{let d=document.createElement("div");return d.append(w),d}}else{let d=document.createElement("div");for(let B of[...w])d.append(B);return d}}class A{constructor(d){this.originalNode=d,this.realParentNode=d.parentNode,this.previousSibling=d.previousSibling,this.nextSibling=d.nextSibling}get childNodes(){let d=[],B=this.previousSibling?this.previousSibling.nextSibling:this.realParentNode.firstChild;for(;B&&B!=this.nextSibling;)d.push(B),B=B.nextSibling;return d}querySelectorAll(d){return this.childNodes.reduce((B,n)=>{if(n instanceof Element){n.matches(d)&&B.push(n);let a=n.querySelectorAll(d);for(let Q=0;Q<a.length;Q++)B.push(a[Q])}return B},[])}insertBefore(d,B){return this.realParentNode.insertBefore(d,B)}moveBefore(d,B){return this.realParentNode.moveBefore(d,B)}get __idiomorphRoot(){return this.originalNode}}function O(w){let d=new DOMParser,B=w.replace(/<svg(\s[^>]*>|>)([\s\S]*?)<\/svg>/gim,"");if(B.match(/<\/html>/)||B.match(/<\/head>/)||B.match(/<\/body>/)){let n=d.parseFromString(w,"text/html");if(B.match(/<\/html>/))return b.add(n),n;{let a=n.firstChild;return a&&b.add(a),a}}else{let a=d.parseFromString("<body><template>"+w+"</template></body>","text/html").body.querySelector("template").content;return b.add(a),a}}return{normalizeElement:L,normalizeParent:v}})();return{morph:e,defaults:t}})();function be(s,t,{callbacks:e,...r}={}){ki.morph(s,t,{...r,callbacks:new Me(e)})}function Qr(s,t,e={}){be(s,t.childNodes,{...e,morphStyle:"innerHTML"})}function Qs(s,t){return s instanceof D&&s.shouldReloadWithMorph&&(!t||Ti(s,t))&&!s.closest("[data-turbo-permanent]")}function Ti(s,t){return t instanceof Element&&t.nodeName==="TURBO-FRAME"&&s.id===t.id&&(!t.getAttribute("src")||is(s.src,t.getAttribute("src")))}function Bs(s){return s.parentElement.closest("turbo-frame[src][refresh=morph]")}var Dt,Me=class{constructor({beforeNodeMorphed:t}={}){f(this,Dt);c(this,"beforeNodeAdded",t=>!(t.id&&t.hasAttribute("data-turbo-permanent")&&document.getElementById(t.id)));c(this,"beforeNodeMorphed",(t,e)=>{if(t instanceof Element)return!t.hasAttribute("data-turbo-permanent")&&u(this,Dt).call(this,t,e)?!y("turbo:before-morph-element",{cancelable:!0,target:t,detail:{currentElement:t,newElement:e}}).defaultPrevented:!1});c(this,"beforeAttributeUpdated",(t,e,r)=>!y("turbo:before-morph-attribute",{cancelable:!0,target:e,detail:{attributeName:t,mutationType:r}}).defaultPrevented);c(this,"beforeNodeRemoved",t=>this.beforeNodeMorphed(t));c(this,"afterNodeMorphed",(t,e)=>{t instanceof Element&&y("turbo:morph-element",{target:t,detail:{currentElement:t,newElement:e}})});E(this,Dt,t||(()=>!0))}};Dt=new WeakMap;var ue=class extends Mt{static renderElement(t,e){y("turbo:before-frame-morph",{target:t,detail:{currentElement:t,newElement:e}}),Qr(t,e,{callbacks:{beforeNodeMorphed:(r,i)=>Qs(r,i)&&Bs(r)===t?(r.reload(),!1):!0}})}async preservingPermanentElements(t){return await t()}},Z=class Z{constructor(){c(this,"hiding",!1);c(this,"value",0);c(this,"visible",!1);c(this,"trickle",()=>{this.setValue(this.value+Math.random()/100)});this.stylesheetElement=this.createStylesheetElement(),this.progressElement=this.createProgressElement(),this.installStylesheetElement(),this.setValue(0)}static get defaultCSS(){return qr`
      .turbo-progress-bar {
        position: fixed;
        display: block;
        top: 0;
        left: 0;
        height: 3px;
        background: #0076ff;
        z-index: 2147483647;
        transition:
          width ${Z.animationDuration}ms ease-out,
          opacity ${Z.animationDuration/2}ms ${Z.animationDuration/2}ms ease-in;
        transform: translate3d(0, 0, 0);
      }
    `}show(){this.visible||(this.visible=!0,this.installProgressElement(),this.startTrickling())}hide(){this.visible&&!this.hiding&&(this.hiding=!0,this.fadeProgressElement(()=>{this.uninstallProgressElement(),this.stopTrickling(),this.visible=!1,this.hiding=!1}))}setValue(t){this.value=t,this.refresh()}installStylesheetElement(){document.head.insertBefore(this.stylesheetElement,document.head.firstChild)}installProgressElement(){this.progressElement.style.width="0",this.progressElement.style.opacity="1",document.documentElement.insertBefore(this.progressElement,document.body),this.refresh()}fadeProgressElement(t){this.progressElement.style.opacity="0",setTimeout(t,Z.animationDuration*1.5)}uninstallProgressElement(){this.progressElement.parentNode&&document.documentElement.removeChild(this.progressElement)}startTrickling(){this.trickleInterval||(this.trickleInterval=window.setInterval(this.trickle,Z.animationDuration))}stopTrickling(){window.clearInterval(this.trickleInterval),delete this.trickleInterval}refresh(){requestAnimationFrame(()=>{this.progressElement.style.width=`${10+this.value*90}%`})}createStylesheetElement(){let t=document.createElement("style");t.type="text/css",t.textContent=Z.defaultCSS;let e=_r();return e&&(t.nonce=e),t}createProgressElement(){let t=document.createElement("div");return t.className="turbo-progress-bar",t}};c(Z,"animationDuration",300);var ze=Z,Ne=class extends It{constructor(){super(...arguments);c(this,"detailsByOuterHTML",this.children.filter(e=>!ji(e)).map(e=>Di(e)).reduce((e,r)=>{let{outerHTML:i}=r,o=i in e?e[i]:{type:Mi(r),tracked:zi(r),elements:[]};return{...e,[i]:{...o,elements:[...o.elements,r]}}},{}))}get trackedElementSignature(){return Object.keys(this.detailsByOuterHTML).filter(e=>this.detailsByOuterHTML[e].tracked).join("")}getScriptElementsNotInSnapshot(e){return this.getElementsMatchingTypeNotInSnapshot("script",e)}getStylesheetElementsNotInSnapshot(e){return this.getElementsMatchingTypeNotInSnapshot("stylesheet",e)}getElementsMatchingTypeNotInSnapshot(e,r){return Object.keys(this.detailsByOuterHTML).filter(i=>!(i in r.detailsByOuterHTML)).map(i=>this.detailsByOuterHTML[i]).filter(({type:i})=>i==e).map(({elements:[i]})=>i)}get provisionalElements(){return Object.keys(this.detailsByOuterHTML).reduce((e,r)=>{let{type:i,tracked:o,elements:l}=this.detailsByOuterHTML[r];return i==null&&!o?[...e,...l]:l.length>1?[...e,...l.slice(1)]:e},[])}getMetaValue(e){let r=this.findMetaElementByName(e);return r?r.getAttribute("content"):null}findMetaElementByName(e){return Object.keys(this.detailsByOuterHTML).reduce((r,i)=>{let{elements:[o]}=this.detailsByOuterHTML[i];return Gi(o,e)?o:r},void 0|void 0)}};function Mi(s){if(Ni(s))return"script";if(Wi(s))return"stylesheet"}function zi(s){return s.getAttribute("data-turbo-track")=="reload"}function Ni(s){return s.localName=="script"}function ji(s){return s.localName=="noscript"}function Wi(s){let t=s.localName;return t=="style"||t=="link"&&s.getAttribute("rel")=="stylesheet"}function Gi(s,t){return s.localName=="meta"&&s.getAttribute("name")==t}function Di(s){return s.hasAttribute("nonce")&&s.setAttribute("nonce",""),s}var G=class s extends It{static fromHTMLString(t=""){return this.fromDocument(Pr(t))}static fromElement(t){return this.fromDocument(t.ownerDocument)}static fromDocument({documentElement:t,body:e,head:r}){return new this(t,e,new Ne(r))}constructor(t,e,r){super(e),this.documentElement=t,this.headSnapshot=r}clone(){let t=this.element.cloneNode(!0),e=this.element.querySelectorAll("select"),r=t.querySelectorAll("select");for(let[i,o]of e.entries()){let l=r[i];for(let g of l.selectedOptions)g.selected=!1;for(let g of o.selectedOptions)l.options[g.index].selected=!0}for(let i of t.querySelectorAll('input[type="password"]'))i.value="";return new s(this.documentElement,t,this.headSnapshot)}get lang(){return this.documentElement.getAttribute("lang")}get headElement(){return this.headSnapshot.element}get rootLocation(){let t=this.getSetting("root")??"/";return M(t)}get cacheControlValue(){return this.getSetting("cache-control")}get isPreviewable(){return this.cacheControlValue!="no-preview"}get isCacheable(){return this.cacheControlValue!="no-cache"}get isVisitable(){return this.getSetting("visit-control")!="reload"}get prefersViewTransitions(){return(this.getSetting("view-transition")==="true"||this.headSnapshot.getMetaValue("view-transition")==="same-origin")&&!window.matchMedia("(prefers-reduced-motion: reduce)").matches}get shouldMorphPage(){return this.getSetting("refresh-method")==="morph"}get shouldPreserveScrollPosition(){return this.getSetting("refresh-scroll")==="preserve"}getSetting(t){return this.headSnapshot.getMetaValue(`turbo-${t}`)}},Xt,_,je=class{constructor(){f(this,Xt,!1);f(this,_,Promise.resolve())}renderChange(t,e){return t&&this.viewTransitionsAvailable&&!u(this,Xt)?(E(this,Xt,!0),E(this,_,u(this,_).then(async()=>{await document.startViewTransition(e).finished}))):E(this,_,u(this,_).then(e)),u(this,_)}get viewTransitionsAvailable(){return document.startViewTransition}};Xt=new WeakMap,_=new WeakMap;var Xi={action:"advance",historyChanged:!1,visitCachedSnapshot:()=>{},willRender:!0,updateHistory:!0,shouldCacheSnapshot:!0,acceptsStreamResponse:!1},te={visitStart:"visitStart",requestStart:"requestStart",requestEnd:"requestEnd",visitEnd:"visitEnd"},J={initialized:"initialized",started:"started",canceled:"canceled",failed:"failed",completed:"completed"},Ft={networkFailure:0,timeoutFailure:-1,contentTypeMismatch:-2},Ri={advance:"forward",restore:"back",replace:"none"},We=class{constructor(t,e,r,i={}){c(this,"identifier",rt());c(this,"timingMetrics",{});c(this,"followedRedirect",!1);c(this,"historyChanged",!1);c(this,"scrolled",!1);c(this,"shouldCacheSnapshot",!0);c(this,"acceptsStreamResponse",!1);c(this,"snapshotCached",!1);c(this,"state",J.initialized);c(this,"viewTransitioner",new je);this.delegate=t,this.location=e,this.restorationIdentifier=r||rt();let{action:o,historyChanged:l,referrer:g,snapshot:C,snapshotHTML:T,response:z,visitCachedSnapshot:q,willRender:b,updateHistory:L,shouldCacheSnapshot:v,acceptsStreamResponse:A,direction:O}={...Xi,...i};this.action=o,this.historyChanged=l,this.referrer=g,this.snapshot=C,this.snapshotHTML=T,this.response=z,this.isSamePage=this.delegate.locationWithActionIsSamePage(this.location,this.action),this.isPageRefresh=this.view.isPageRefresh(this),this.visitCachedSnapshot=q,this.willRender=b,this.updateHistory=L,this.scrolled=!b,this.shouldCacheSnapshot=v,this.acceptsStreamResponse=A,this.direction=O||Ri[o]}get adapter(){return this.delegate.adapter}get view(){return this.delegate.view}get history(){return this.delegate.history}get restorationData(){return this.history.getRestorationDataForIdentifier(this.restorationIdentifier)}get silent(){return this.isSamePage}start(){this.state==J.initialized&&(this.recordTimingMetric(te.visitStart),this.state=J.started,this.adapter.visitStarted(this),this.delegate.visitStarted(this))}cancel(){this.state==J.started&&(this.request&&this.request.cancel(),this.cancelRender(),this.state=J.canceled)}complete(){this.state==J.started&&(this.recordTimingMetric(te.visitEnd),this.adapter.visitCompleted(this),this.state=J.completed,this.followRedirect(),this.followedRedirect||this.delegate.visitCompleted(this))}fail(){this.state==J.started&&(this.state=J.failed,this.adapter.visitFailed(this),this.delegate.visitCompleted(this))}changeHistory(){if(!this.historyChanged&&this.updateHistory){let t=this.location.href===this.referrer?.href?"replace":this.action,e=$r(t);this.history.update(e,this.location,this.restorationIdentifier),this.historyChanged=!0}}issueRequest(){this.hasPreloadedResponse()?this.simulateRequest():this.shouldIssueRequest()&&!this.request&&(this.request=new lt(this,N.get,this.location),this.request.perform())}simulateRequest(){this.response&&(this.startRequest(),this.recordResponse(),this.finishRequest())}startRequest(){this.recordTimingMetric(te.requestStart),this.adapter.visitRequestStarted(this)}recordResponse(t=this.response){if(this.response=t,t){let{statusCode:e}=t;Rr(e)?this.adapter.visitRequestCompleted(this):this.adapter.visitRequestFailedWithStatusCode(this,e)}}finishRequest(){this.recordTimingMetric(te.requestEnd),this.adapter.visitRequestFinished(this)}loadResponse(){if(this.response){let{statusCode:t,responseHTML:e}=this.response;this.render(async()=>{if(this.shouldCacheSnapshot&&this.cacheSnapshot(),this.view.renderPromise&&await this.view.renderPromise,Rr(t)&&e!=null){let r=G.fromHTMLString(e);await this.renderPageSnapshot(r,!1),this.adapter.visitRendered(this),this.complete()}else await this.view.renderError(G.fromHTMLString(e),this),this.adapter.visitRendered(this),this.fail()})}}getCachedSnapshot(){let t=this.view.getCachedSnapshotForLocation(this.location)||this.getPreloadedSnapshot();if(t&&(!ct(this.location)||t.hasAnchor(ct(this.location)))&&(this.action=="restore"||t.isPreviewable))return t}getPreloadedSnapshot(){if(this.snapshotHTML)return G.fromHTMLString(this.snapshotHTML)}hasCachedSnapshot(){return this.getCachedSnapshot()!=null}loadCachedSnapshot(){let t=this.getCachedSnapshot();if(t){let e=this.shouldIssueRequest();this.render(async()=>{this.cacheSnapshot(),this.isSamePage||this.isPageRefresh?this.adapter.visitRendered(this):(this.view.renderPromise&&await this.view.renderPromise,await this.renderPageSnapshot(t,e),this.adapter.visitRendered(this),e||this.complete())})}}followRedirect(){this.redirectedToLocation&&!this.followedRedirect&&this.response?.redirected&&(this.adapter.visitProposedToLocation(this.redirectedToLocation,{action:"replace",response:this.response,shouldCacheSnapshot:!1,willRender:!1}),this.followedRedirect=!0)}goToSamePageAnchor(){this.isSamePage&&this.render(async()=>{this.cacheSnapshot(),this.performScroll(),this.changeHistory(),this.adapter.visitRendered(this)})}prepareRequest(t){this.acceptsStreamResponse&&t.acceptResponseType(K.contentType)}requestStarted(){this.startRequest()}requestPreventedHandlingResponse(t,e){}async requestSucceededWithResponse(t,e){let r=await e.responseHTML,{redirected:i,statusCode:o}=e;r==null?this.recordResponse({statusCode:Ft.contentTypeMismatch,redirected:i}):(this.redirectedToLocation=e.redirected?e.location:void 0,this.recordResponse({statusCode:o,responseHTML:r,redirected:i}))}async requestFailedWithResponse(t,e){let r=await e.responseHTML,{redirected:i,statusCode:o}=e;r==null?this.recordResponse({statusCode:Ft.contentTypeMismatch,redirected:i}):this.recordResponse({statusCode:o,responseHTML:r,redirected:i})}requestErrored(t,e){this.recordResponse({statusCode:Ft.networkFailure,redirected:!1})}requestFinished(){this.finishRequest()}performScroll(){!this.scrolled&&!this.view.forceReloaded&&!this.view.shouldPreserveScrollPosition(this)&&(this.action=="restore"?this.scrollToRestoredPosition()||this.scrollToAnchor()||this.view.scrollToTop():this.scrollToAnchor()||this.view.scrollToTop(),this.isSamePage&&this.delegate.visitScrolledToSamePageLocation(this.view.lastRenderedLocation,this.location),this.scrolled=!0)}scrollToRestoredPosition(){let{scrollPosition:t}=this.restorationData;if(t)return this.view.scrollToPosition(t),!0}scrollToAnchor(){let t=ct(this.location);if(t!=null)return this.view.scrollToAnchor(t),!0}recordTimingMetric(t){this.timingMetrics[t]=new Date().getTime()}getTimingMetrics(){return{...this.timingMetrics}}hasPreloadedResponse(){return typeof this.response=="object"}shouldIssueRequest(){return this.isSamePage?!1:this.action=="restore"?!this.hasCachedSnapshot():this.willRender}cacheSnapshot(){this.snapshotCached||(this.view.cacheSnapshot(this.snapshot).then(t=>t&&this.visitCachedSnapshot(t)),this.snapshotCached=!0)}async render(t){this.cancelRender(),await new Promise(e=>{this.frame=document.visibilityState==="hidden"?setTimeout(()=>e(),0):requestAnimationFrame(()=>e())}),await t(),delete this.frame}async renderPageSnapshot(t,e){await this.viewTransitioner.renderChange(this.view.shouldTransitionTo(t),async()=>{await this.view.renderPage(t,e,this.willRender,this),this.performScroll()})}cancelRender(){this.frame&&(cancelAnimationFrame(this.frame),delete this.frame)}};function Rr(s){return s>=200&&s<300}var Ge=class{constructor(t){c(this,"progressBar",new ze);c(this,"showProgressBar",()=>{this.progressBar.show()});this.session=t}visitProposedToLocation(t,e){$(t,this.navigator.rootLocation)?this.navigator.startVisit(t,e?.restorationIdentifier||rt(),e):window.location.href=t.toString()}visitStarted(t){this.location=t.location,this.redirectedToLocation=null,t.loadCachedSnapshot(),t.issueRequest(),t.goToSamePageAnchor()}visitRequestStarted(t){this.progressBar.setValue(0),t.hasCachedSnapshot()||t.action!="restore"?this.showVisitProgressBarAfterDelay():this.showProgressBar()}visitRequestCompleted(t){t.loadResponse(),t.response.redirected&&(this.redirectedToLocation=t.redirectedToLocation)}visitRequestFailedWithStatusCode(t,e){switch(e){case Ft.networkFailure:case Ft.timeoutFailure:case Ft.contentTypeMismatch:return this.reload({reason:"request_failed",context:{statusCode:e}});default:return t.loadResponse()}}visitRequestFinished(t){}visitCompleted(t){this.progressBar.setValue(1),this.hideVisitProgressBar()}pageInvalidated(t){this.reload(t)}visitFailed(t){this.progressBar.setValue(1),this.hideVisitProgressBar()}visitRendered(t){}linkPrefetchingIsEnabledForLocation(t){return!0}formSubmissionStarted(t){this.progressBar.setValue(0),this.showFormProgressBarAfterDelay()}formSubmissionFinished(t){this.progressBar.setValue(1),this.hideFormProgressBar()}showVisitProgressBarAfterDelay(){this.visitProgressBarTimeout=window.setTimeout(this.showProgressBar,this.session.progressBarDelay)}hideVisitProgressBar(){this.progressBar.hide(),this.visitProgressBarTimeout!=null&&(window.clearTimeout(this.visitProgressBarTimeout),delete this.visitProgressBarTimeout)}showFormProgressBarAfterDelay(){this.formProgressBarTimeout==null&&(this.formProgressBarTimeout=window.setTimeout(this.showProgressBar,this.session.progressBarDelay))}hideFormProgressBar(){this.progressBar.hide(),this.formProgressBarTimeout!=null&&(window.clearTimeout(this.formProgressBarTimeout),delete this.formProgressBarTimeout)}reload(t){y("turbo:reload",{detail:t}),window.location.href=(this.redirectedToLocation||this.location)?.toString()||window.location.href}get navigator(){return this.session.navigator}},De=class{constructor(){c(this,"selector","[data-turbo-temporary]");c(this,"deprecatedSelector","[data-turbo-cache=false]");c(this,"started",!1);c(this,"removeTemporaryElements",t=>{for(let e of this.temporaryElements)e.remove()})}start(){this.started||(this.started=!0,addEventListener("turbo:before-cache",this.removeTemporaryElements,!1))}stop(){this.started&&(this.started=!1,removeEventListener("turbo:before-cache",this.removeTemporaryElements,!1))}get temporaryElements(){return[...document.querySelectorAll(this.selector),...this.temporaryElementsWithDeprecation]}get temporaryElementsWithDeprecation(){let t=document.querySelectorAll(this.deprecatedSelector);return t.length&&console.warn(`The ${this.deprecatedSelector} selector is deprecated and will be removed in a future version. Use ${this.selector} instead.`),[...t]}},j,gs,ee,re,Xe=class{constructor(t,e){f(this,j);this.session=t,this.element=e,this.linkInterceptor=new he(this,e),this.formSubmitObserver=new kt(this,e)}start(){this.linkInterceptor.start(),this.formSubmitObserver.start()}stop(){this.linkInterceptor.stop(),this.formSubmitObserver.stop()}shouldInterceptLinkClick(t,e,r){return p(this,j,ee).call(this,t)}linkClickIntercepted(t,e,r){let i=p(this,j,re).call(this,t);i&&i.delegate.linkClickIntercepted(t,e,r)}willSubmitForm(t,e){return t.closest("turbo-frame")==null&&p(this,j,gs).call(this,t,e)&&p(this,j,ee).call(this,t,e)}formSubmitted(t,e){let r=p(this,j,re).call(this,t,e);r&&r.delegate.formSubmitted(t,e)}};j=new WeakSet,gs=function(t,e){let r=lr(t,e),i=this.element.ownerDocument.querySelector('meta[name="turbo-root"]'),o=M(i?.content??"/");return p(this,j,ee).call(this,t,e)&&$(r,o)},ee=function(t,e){if(t instanceof HTMLFormElement?this.session.submissionIsNavigatable(t,e):this.session.elementIsNavigatable(t)){let i=p(this,j,re).call(this,t,e);return i?i!=t.closest("turbo-frame"):!1}else return!1},re=function(t,e){let r=e?.getAttribute("data-turbo-frame")||t.getAttribute("data-turbo-frame");if(r&&r!="_top"){let i=this.element.querySelector(`#${r}:not([disabled])`);if(i instanceof D)return i}};var Re=class{constructor(t){c(this,"location");c(this,"restorationIdentifier",rt());c(this,"restorationData",{});c(this,"started",!1);c(this,"pageLoaded",!1);c(this,"currentIndex",0);c(this,"onPopState",t=>{if(this.shouldHandlePopState()){let{turbo:e}=t.state||{};if(e){this.location=new URL(window.location.href);let{restorationIdentifier:r,restorationIndex:i}=e;this.restorationIdentifier=r;let o=i>this.currentIndex?"forward":"back";this.delegate.historyPoppedToLocationWithRestorationIdentifierAndDirection(this.location,r,o),this.currentIndex=i}}});c(this,"onPageLoad",async t=>{await ri(),this.pageLoaded=!0});this.delegate=t}start(){this.started||(addEventListener("popstate",this.onPopState,!1),addEventListener("load",this.onPageLoad,!1),this.currentIndex=history.state?.turbo?.restorationIndex||0,this.started=!0,this.replace(new URL(window.location.href)))}stop(){this.started&&(removeEventListener("popstate",this.onPopState,!1),removeEventListener("load",this.onPageLoad,!1),this.started=!1)}push(t,e){this.update(history.pushState,t,e)}replace(t,e){this.update(history.replaceState,t,e)}update(t,e,r=rt()){t===history.pushState&&++this.currentIndex;let i={turbo:{restorationIdentifier:r,restorationIndex:this.currentIndex}};t.call(history,i,"",e.href),this.location=e,this.restorationIdentifier=r}getRestorationDataForIdentifier(t){return this.restorationData[t]||{}}updateRestorationData(t){let{restorationIdentifier:e}=this,r=this.restorationData[e];this.restorationData[e]={...r,...t}}assumeControlOfScrollRestoration(){this.previousScrollRestoration||(this.previousScrollRestoration=history.scrollRestoration??"auto",history.scrollRestoration="manual")}relinquishControlOfScrollRestoration(){this.previousScrollRestoration&&(history.scrollRestoration=this.previousScrollRestoration,delete this.previousScrollRestoration)}shouldHandlePopState(){return this.pageIsLoaded()}pageIsLoaded(){return this.pageLoaded||document.readyState=="complete"}},mt,Rt,Vt,Jt,pe,Zt,vt,us,Fs,Ve=class{constructor(t,e){f(this,vt);c(this,"started",!1);f(this,mt,null);f(this,Rt,()=>{this.eventTarget.addEventListener("mouseenter",u(this,Vt),{capture:!0,passive:!0}),this.eventTarget.addEventListener("mouseleave",u(this,Jt),{capture:!0,passive:!0}),this.eventTarget.addEventListener("turbo:before-fetch-request",u(this,Zt),!0),this.started=!0});f(this,Vt,t=>{if(ce("turbo-prefetch")==="false")return;let e=t.target;if(e.matches&&e.matches("a[href]:not([target^=_]):not([download])")&&p(this,vt,Fs).call(this,e)){let i=e,o=ss(i);if(this.delegate.canPrefetchRequestToLocation(i,o)){E(this,mt,i);let l=new lt(this,N.get,o,new URLSearchParams,e);l.fetchOptions.priority="low",gt.setLater(o.toString(),l,u(this,vt,us))}}});f(this,Jt,t=>{t.target===u(this,mt)&&u(this,pe).call(this)});f(this,pe,()=>{gt.clear(),E(this,mt,null)});f(this,Zt,t=>{if(t.target.tagName!=="FORM"&&t.detail.fetchOptions.method==="GET"){let e=gt.get(t.detail.url.toString());e&&(t.detail.fetchRequest=e),gt.clear()}});this.delegate=t,this.eventTarget=e}start(){this.started||(this.eventTarget.readyState==="loading"?this.eventTarget.addEventListener("DOMContentLoaded",u(this,Rt),{once:!0}):u(this,Rt).call(this))}stop(){this.started&&(this.eventTarget.removeEventListener("mouseenter",u(this,Vt),{capture:!0,passive:!0}),this.eventTarget.removeEventListener("mouseleave",u(this,Jt),{capture:!0,passive:!0}),this.eventTarget.removeEventListener("turbo:before-fetch-request",u(this,Zt),!0),this.started=!1)}prepareRequest(t){let e=t.target;t.headers["X-Sec-Purpose"]="prefetch";let r=e.closest("turbo-frame"),i=e.getAttribute("data-turbo-frame")||r?.getAttribute("target")||r?.id;i&&i!=="_top"&&(t.headers["Turbo-Frame"]=i)}requestSucceededWithResponse(){}requestStarted(t){}requestErrored(t){}requestFinished(t){}requestPreventedHandlingResponse(t,e){}requestFailedWithResponse(t,e){}};mt=new WeakMap,Rt=new WeakMap,Vt=new WeakMap,Jt=new WeakMap,pe=new WeakMap,Zt=new WeakMap,vt=new WeakSet,us=function(){return Number(ce("turbo-prefetch-cache-time"))||bi},Fs=function(t){return!(!t.getAttribute("href")||Vi(t)||Ji(t)||Zi(t)||Yi(t)||Ki(t))};var Vi=s=>s.origin!==document.location.origin||!["http:","https:"].includes(s.protocol)||s.hasAttribute("target"),Ji=s=>s.pathname+s.search===document.location.pathname+document.location.search||s.href.startsWith("#"),Zi=s=>{if(s.getAttribute("data-turbo-prefetch")==="false"||s.getAttribute("data-turbo")==="false")return!0;let t=ut(s,"[data-turbo-prefetch]");return!!(t&&t.getAttribute("data-turbo-prefetch")==="false")},Yi=s=>{let t=s.getAttribute("data-turbo-method");return!!(t&&t.toLowerCase()!=="get"||Hi(s)||s.hasAttribute("data-turbo-confirm")||s.hasAttribute("data-turbo-stream"))},Hi=s=>s.hasAttribute("data-remote")||s.hasAttribute("data-behavior")||s.hasAttribute("data-confirm")||s.hasAttribute("data-method"),Ki=s=>y("turbo:before-prefetch",{target:s,cancelable:!0}).defaultPrevented,ft,ms,ps,Je=class{constructor(t){f(this,ft);this.delegate=t}proposeVisit(t,e={}){this.delegate.allowsVisitingLocationWithAction(t,e.action)&&this.delegate.visitProposedToLocation(t,e)}startVisit(t,e,r={}){this.stop(),this.currentVisit=new We(this,M(t),e,{referrer:this.location,...r}),this.currentVisit.start()}submitForm(t,e){this.stop(),this.formSubmission=new le(this,t,e,!0),this.formSubmission.start()}stop(){this.formSubmission&&(this.formSubmission.stop(),delete this.formSubmission),this.currentVisit&&(this.currentVisit.cancel(),delete this.currentVisit)}get adapter(){return this.delegate.adapter}get view(){return this.delegate.view}get rootLocation(){return this.view.snapshot.rootLocation}get history(){return this.delegate.history}formSubmissionStarted(t){typeof this.adapter.formSubmissionStarted=="function"&&this.adapter.formSubmissionStarted(t)}async formSubmissionSucceededWithResponse(t,e){if(t==this.formSubmission){let r=await e.responseHTML;if(r){let i=t.isSafe;i||this.view.clearSnapshotCache();let{statusCode:o,redirected:l}=e,C={action:p(this,ft,ms).call(this,t,e),shouldCacheSnapshot:i,response:{statusCode:o,responseHTML:r,redirected:l}};this.proposeVisit(e.location,C)}}}async formSubmissionFailedWithResponse(t,e){let r=await e.responseHTML;if(r){let i=G.fromHTMLString(r);e.serverError?await this.view.renderError(i,this.currentVisit):await this.view.renderPage(i,!1,!0,this.currentVisit),i.shouldPreserveScrollPosition||this.view.scrollToTop(),this.view.clearSnapshotCache()}}formSubmissionErrored(t,e){console.error(e)}formSubmissionFinished(t){typeof this.adapter.formSubmissionFinished=="function"&&this.adapter.formSubmissionFinished(t)}linkPrefetchingIsEnabledForLocation(t){return typeof this.adapter.linkPrefetchingIsEnabledForLocation=="function"?this.adapter.linkPrefetchingIsEnabledForLocation(t):!0}visitStarted(t){this.delegate.visitStarted(t)}visitCompleted(t){this.delegate.visitCompleted(t),delete this.currentVisit}locationWithActionIsSamePage(t,e){let r=ct(t),i=ct(this.view.lastRenderedLocation),o=e==="restore"&&typeof r>"u";return e!=="replace"&&Le(t)===Le(this.view.lastRenderedLocation)&&(o||r!=null&&r!==i)}visitScrolledToSamePageLocation(t,e){this.delegate.visitScrolledToSamePageLocation(t,e)}get location(){return this.history.location}get restorationIdentifier(){return this.history.restorationIdentifier}};ft=new WeakSet,ms=function(t,e){let{submitter:r,formElement:i}=t;return at(r,i)||p(this,ft,ps).call(this,e)},ps=function(t){return t.redirected&&t.location.href===this.location?.href?"replace":"advance"};var st={initial:0,loading:1,interactive:2,complete:3},Ze=class{constructor(t){c(this,"stage",st.initial);c(this,"started",!1);c(this,"interpretReadyState",()=>{let{readyState:t}=this;t=="interactive"?this.pageIsInteractive():t=="complete"&&this.pageIsComplete()});c(this,"pageWillUnload",()=>{this.delegate.pageWillUnload()});this.delegate=t}start(){this.started||(this.stage==st.initial&&(this.stage=st.loading),document.addEventListener("readystatechange",this.interpretReadyState,!1),addEventListener("pagehide",this.pageWillUnload,!1),this.started=!0)}stop(){this.started&&(document.removeEventListener("readystatechange",this.interpretReadyState,!1),removeEventListener("pagehide",this.pageWillUnload,!1),this.started=!1)}pageIsInteractive(){this.stage==st.loading&&(this.stage=st.interactive,this.delegate.pageBecameInteractive())}pageIsComplete(){this.pageIsInteractive(),this.stage==st.interactive&&(this.stage=st.complete,this.delegate.pageLoaded())}get readyState(){return document.readyState}},Ye=class{constructor(t){c(this,"started",!1);c(this,"onScroll",()=>{this.updatePosition({x:window.pageXOffset,y:window.pageYOffset})});this.delegate=t}start(){this.started||(addEventListener("scroll",this.onScroll,!1),this.onScroll(),this.started=!0)}stop(){this.started&&(removeEventListener("scroll",this.onScroll,!1),this.started=!1)}updatePosition(t){this.delegate.scrollPositionChanged(t)}},He=class{render({fragment:t}){ge.preservingPermanentElements(this,Pi(t),()=>{qi(t,()=>{$i(()=>{document.documentElement.appendChild(t)})})})}enteringBardo(t,e){e.replaceWith(t.cloneNode(!0))}leavingBardo(){}};function Pi(s){let t=hs(document.documentElement),e={};for(let r of t){let{id:i}=r;for(let o of s.querySelectorAll("turbo-stream")){let l=ds(o.templateElement.content,i);l&&(e[i]=[r,l])}}return e}async function qi(s,t){let e=`turbo-stream-autofocus-${rt()}`,r=s.querySelectorAll("turbo-stream"),i=_i(r),o=null;if(i&&(i.id?o=i.id:o=e,i.id=o),t(),await Lt(),(document.activeElement==null||document.activeElement==document.body)&&o){let g=document.getElementById(o);cr(g)&&g.focus(),g&&g.id==e&&g.removeAttribute("id")}}async function $i(s){let[t,e]=await ci(s,()=>document.activeElement),r=t&&t.id;if(r){let i=document.getElementById(r);cr(i)&&i!=e&&i.focus()}}function _i(s){for(let t of s){let e=ts(t.templateElement.content);if(e)return e}return null}var tt,Ke=class{constructor(t){c(this,"sources",new Set);f(this,tt,!1);c(this,"inspectFetchResponse",t=>{let e=to(t);e&&eo(e)&&(t.preventDefault(),this.receiveMessageResponse(e))});c(this,"receiveMessageEvent",t=>{u(this,tt)&&typeof t.data=="string"&&this.receiveMessageHTML(t.data)});this.delegate=t}start(){u(this,tt)||(E(this,tt,!0),addEventListener("turbo:before-fetch-response",this.inspectFetchResponse,!1))}stop(){u(this,tt)&&(E(this,tt,!1),removeEventListener("turbo:before-fetch-response",this.inspectFetchResponse,!1))}connectStreamSource(t){this.streamSourceIsConnected(t)||(this.sources.add(t),t.addEventListener("message",this.receiveMessageEvent,!1))}disconnectStreamSource(t){this.streamSourceIsConnected(t)&&(this.sources.delete(t),t.removeEventListener("message",this.receiveMessageEvent,!1))}streamSourceIsConnected(t){return this.sources.has(t)}async receiveMessageResponse(t){let e=await t.responseHTML;e&&this.receiveMessageHTML(e)}receiveMessageHTML(t){this.delegate.receivedMessageFromStream(K.wrap(t))}};tt=new WeakMap;function to(s){let t=s.detail?.fetchResponse;if(t instanceof St)return t}function eo(s){return(s.contentType??"").startsWith(K.contentType)}var Pe=class extends Tt{static renderElement(t,e){let{documentElement:r,body:i}=document;r.replaceChild(e,i)}async render(){this.replaceHeadAndBody(),this.activateScriptElements()}replaceHeadAndBody(){let{documentElement:t,head:e}=document;t.replaceChild(this.newHead,e),this.renderElement(this.currentElement,this.newElement)}activateScriptElements(){for(let t of this.scriptElements){let e=t.parentNode;if(e){let r=yt(t);e.replaceChild(r,t)}}}get newHead(){return this.newSnapshot.headSnapshot.element}get scriptElements(){return document.documentElement.querySelectorAll("script")}},Ue,Us,zt=class extends Tt{constructor(){super(...arguments);f(this,Ue)}static renderElement(e,r){document.body&&r instanceof HTMLBodyElement?document.body.replaceWith(r):document.documentElement.appendChild(r)}get shouldRender(){return this.newSnapshot.isVisitable&&this.trackedElementsAreIdentical}get reloadReason(){if(!this.newSnapshot.isVisitable)return{reason:"turbo_visit_control_is_reload"};if(!this.trackedElementsAreIdentical)return{reason:"tracked_element_mismatch"}}async prepareToRender(){p(this,Ue,Us).call(this),await this.mergeHead()}async render(){this.willRender&&await this.replaceBody()}finishRendering(){super.finishRendering(),this.isPreview||this.focusFirstAutofocusableElement()}get currentHeadSnapshot(){return this.currentSnapshot.headSnapshot}get newHeadSnapshot(){return this.newSnapshot.headSnapshot}get newElement(){return this.newSnapshot.element}async mergeHead(){let e=this.mergeProvisionalElements(),r=this.copyNewHeadStylesheetElements();this.copyNewHeadScriptElements(),await e,await r,this.willRender&&this.removeUnusedDynamicStylesheetElements()}async replaceBody(){await this.preservingPermanentElements(async()=>{this.activateNewBody(),await this.assignNewBody()})}get trackedElementsAreIdentical(){return this.currentHeadSnapshot.trackedElementSignature==this.newHeadSnapshot.trackedElementSignature}async copyNewHeadStylesheetElements(){let e=[];for(let r of this.newHeadStylesheetElements)e.push(oi(r)),document.head.appendChild(r);await Promise.all(e)}copyNewHeadScriptElements(){for(let e of this.newHeadScriptElements)document.head.appendChild(yt(e))}removeUnusedDynamicStylesheetElements(){for(let e of this.unusedDynamicStylesheetElements)document.head.removeChild(e)}async mergeProvisionalElements(){let e=[...this.newHeadProvisionalElements];for(let r of this.currentHeadProvisionalElements)this.isCurrentElementInElementList(r,e)||document.head.removeChild(r);for(let r of e)document.head.appendChild(r)}isCurrentElementInElementList(e,r){for(let[i,o]of r.entries()){if(e.tagName=="TITLE"){if(o.tagName!="TITLE")continue;if(e.innerHTML==o.innerHTML)return r.splice(i,1),!0}if(o.isEqualNode(e))return r.splice(i,1),!0}return!1}removeCurrentHeadProvisionalElements(){for(let e of this.currentHeadProvisionalElements)document.head.removeChild(e)}copyNewHeadProvisionalElements(){for(let e of this.newHeadProvisionalElements)document.head.appendChild(e)}activateNewBody(){document.adoptNode(this.newElement),this.activateNewBodyScriptElements()}activateNewBodyScriptElements(){for(let e of this.newBodyScriptElements){let r=yt(e);e.replaceWith(r)}}async assignNewBody(){await this.renderElement(this.currentElement,this.newElement)}get unusedDynamicStylesheetElements(){return this.oldHeadStylesheetElements.filter(e=>e.getAttribute("data-turbo-track")==="dynamic")}get oldHeadStylesheetElements(){return this.currentHeadSnapshot.getStylesheetElementsNotInSnapshot(this.newHeadSnapshot)}get newHeadStylesheetElements(){return this.newHeadSnapshot.getStylesheetElementsNotInSnapshot(this.currentHeadSnapshot)}get newHeadScriptElements(){return this.newHeadSnapshot.getScriptElementsNotInSnapshot(this.currentHeadSnapshot)}get currentHeadProvisionalElements(){return this.currentHeadSnapshot.provisionalElements}get newHeadProvisionalElements(){return this.newHeadSnapshot.provisionalElements}get newBodyScriptElements(){return this.newElement.querySelectorAll("script")}};Ue=new WeakSet,Us=function(){let{documentElement:e}=this.currentSnapshot,{lang:r}=this.newSnapshot;r?e.setAttribute("lang",r):e.removeAttribute("lang")};var Fe=class extends zt{static renderElement(t,e){be(t,e,{callbacks:{beforeNodeMorphed:(r,i)=>Qs(r,i)&&!Bs(r)?(r.reload(),!1):!0}}),y("turbo:morph",{detail:{currentElement:t,newElement:e}})}async preservingPermanentElements(t){return await t()}get renderMethod(){return"morph"}get shouldAutofocus(){return!1}},qe=class{constructor(t){c(this,"keys",[]);c(this,"snapshots",{});this.size=t}has(t){return _t(t)in this.snapshots}get(t){if(this.has(t)){let e=this.read(t);return this.touch(t),e}}put(t,e){return this.write(t,e),this.touch(t),e}clear(){this.snapshots={}}read(t){return this.snapshots[_t(t)]}write(t,e){this.snapshots[_t(t)]=e}touch(t){let e=_t(t),r=this.keys.indexOf(e);r>-1&&this.keys.splice(r,1),this.keys.unshift(e),this.trim()}trim(){for(let t of this.keys.splice(this.size))delete this.snapshots[t]}},$e=class extends de{constructor(){super(...arguments);c(this,"snapshotCache",new qe(10));c(this,"lastRenderedLocation",new URL(location.href));c(this,"forceReloaded",!1)}shouldTransitionTo(e){return this.snapshot.prefersViewTransitions&&e.prefersViewTransitions}renderPage(e,r=!1,i=!0,o){let g=this.isPageRefresh(o)&&this.snapshot.shouldMorphPage?Fe:zt,C=new g(this.snapshot,e,r,i);return C.shouldRender?o?.changeHistory():this.forceReloaded=!0,this.render(C)}renderError(e,r){r?.changeHistory();let i=new Pe(this.snapshot,e,!1);return this.render(i)}clearSnapshotCache(){this.snapshotCache.clear()}async cacheSnapshot(e=this.snapshot){if(e.isCacheable){this.delegate.viewWillCacheSnapshot();let{lastRenderedLocation:r}=this;await Kr();let i=e.clone();return this.snapshotCache.put(r,i),i}}getCachedSnapshotForLocation(e){return this.snapshotCache.get(e)}isPageRefresh(e){return!e||this.lastRenderedLocation.pathname===e.location.pathname&&e.action==="replace"}shouldPreserveScrollPosition(e){return this.isPageRefresh(e)&&this.snapshot.shouldPreserveScrollPosition}get snapshot(){return G.fromElement(this.element)}},Yt,_e=class{constructor(t,e){c(this,"selector","a[data-turbo-preload]");f(this,Yt,()=>{this.preloadOnLoadLinksForView(document.body)});this.delegate=t,this.snapshotCache=e}start(){document.readyState==="loading"?document.addEventListener("DOMContentLoaded",u(this,Yt)):this.preloadOnLoadLinksForView(document.body)}stop(){document.removeEventListener("DOMContentLoaded",u(this,Yt))}preloadOnLoadLinksForView(t){for(let e of t.querySelectorAll(this.selector))this.delegate.shouldPreloadLink(e)&&this.preloadURL(e)}async preloadURL(t){let e=new URL(t.href);if(this.snapshotCache.has(e))return;await new lt(this,N.get,e,new URLSearchParams,t).perform()}prepareRequest(t){t.headers["X-Sec-Purpose"]="prefetch"}async requestSucceededWithResponse(t,e){try{let r=await e.responseHTML,i=G.fromHTMLString(r);this.snapshotCache.put(t.url,i)}catch{}}requestStarted(t){}requestErrored(t){}requestFinished(t){}requestPreventedHandlingResponse(t,e){}requestFailedWithResponse(t,e){}};Yt=new WeakMap;var pt,se,tr=class{constructor(t){f(this,pt);this.session=t}clear(){this.session.clearCache()}resetCacheControl(){p(this,pt,se).call(this,"")}exemptPageFromCache(){p(this,pt,se).call(this,"no-cache")}exemptPageFromPreview(){p(this,pt,se).call(this,"no-preview")}};pt=new WeakSet,se=function(t){ai("turbo-cache-control",t)};var Ht,er=class{constructor(t){c(this,"navigator",new Je(this));c(this,"history",new Re(this));c(this,"view",new $e(this,document.documentElement));c(this,"adapter",new Ge(this));c(this,"pageObserver",new Ze(this));c(this,"cacheObserver",new De);c(this,"linkPrefetchObserver",new Ve(this,document));c(this,"linkClickObserver",new Qe(this,window));c(this,"formSubmitObserver",new kt(this,document));c(this,"scrollObserver",new Ye(this));c(this,"streamObserver",new Ke(this));c(this,"formLinkClickObserver",new Be(this,document.documentElement));c(this,"frameRedirector",new Xe(this,document.documentElement));c(this,"streamMessageRenderer",new He);c(this,"cache",new tr(this));c(this,"enabled",!0);c(this,"started",!1);f(this,Ht,150);this.recentRequests=t,this.preloader=new _e(this,this.view.snapshotCache),this.debouncedRefresh=this.refresh,this.pageRefreshDebouncePeriod=this.pageRefreshDebouncePeriod}start(){this.started||(this.pageObserver.start(),this.cacheObserver.start(),this.linkPrefetchObserver.start(),this.formLinkClickObserver.start(),this.linkClickObserver.start(),this.formSubmitObserver.start(),this.scrollObserver.start(),this.streamObserver.start(),this.frameRedirector.start(),this.history.start(),this.preloader.start(),this.started=!0,this.enabled=!0)}disable(){this.enabled=!1}stop(){this.started&&(this.pageObserver.stop(),this.cacheObserver.stop(),this.linkPrefetchObserver.stop(),this.formLinkClickObserver.stop(),this.linkClickObserver.stop(),this.formSubmitObserver.stop(),this.scrollObserver.stop(),this.streamObserver.stop(),this.frameRedirector.stop(),this.history.stop(),this.preloader.stop(),this.started=!1)}registerAdapter(t){this.adapter=t}visit(t,e={}){let r=e.frame?document.getElementById(e.frame):null;if(r instanceof D){let i=e.action||at(r);r.delegate.proposeVisitIfNavigatedWithAction(r,i),r.src=t.toString()}else this.navigator.proposeVisit(M(t),e)}refresh(t,e){let r=e&&this.recentRequests.has(e),i=t===document.baseURI;!r&&!this.navigator.currentVisit&&i&&this.visit(t,{action:"replace",shouldCacheSnapshot:!1})}connectStreamSource(t){this.streamObserver.connectStreamSource(t)}disconnectStreamSource(t){this.streamObserver.disconnectStreamSource(t)}renderStreamMessage(t){this.streamMessageRenderer.render(K.wrap(t))}clearCache(){this.view.clearSnapshotCache()}setProgressBarDelay(t){console.warn("Please replace `session.setProgressBarDelay(delay)` with `session.progressBarDelay = delay`. The function is deprecated and will be removed in a future version of Turbo.`"),this.progressBarDelay=t}set progressBarDelay(t){k.drive.progressBarDelay=t}get progressBarDelay(){return k.drive.progressBarDelay}set drive(t){k.drive.enabled=t}get drive(){return k.drive.enabled}set formMode(t){k.forms.mode=t}get formMode(){return k.forms.mode}get location(){return this.history.location}get restorationIdentifier(){return this.history.restorationIdentifier}get pageRefreshDebouncePeriod(){return u(this,Ht)}set pageRefreshDebouncePeriod(t){this.refresh=li(this.debouncedRefresh.bind(this),t),E(this,Ht,t)}shouldPreloadLink(t){let e=t.hasAttribute("data-turbo-method"),r=t.hasAttribute("data-turbo-stream"),i=t.getAttribute("data-turbo-frame"),o=i=="_top"?null:document.getElementById(i)||ut(t,"turbo-frame:not([disabled])");if(e||r||o instanceof D)return!1;{let l=new URL(t.href);return this.elementIsNavigatable(t)&&$(l,this.snapshot.rootLocation)}}historyPoppedToLocationWithRestorationIdentifierAndDirection(t,e,r){this.enabled?this.navigator.startVisit(t,e,{action:"restore",historyChanged:!0,direction:r}):this.adapter.pageInvalidated({reason:"turbo_disabled"})}scrollPositionChanged(t){this.history.updateRestorationData({scrollPosition:t})}willSubmitFormLinkToLocation(t,e){return this.elementIsNavigatable(t)&&$(e,this.snapshot.rootLocation)}submittedFormLinkToLocation(){}canPrefetchRequestToLocation(t,e){return this.elementIsNavigatable(t)&&$(e,this.snapshot.rootLocation)&&this.navigator.linkPrefetchingIsEnabledForLocation(e)}willFollowLinkToLocation(t,e,r){return this.elementIsNavigatable(t)&&$(e,this.snapshot.rootLocation)&&this.applicationAllowsFollowingLinkToLocation(t,e,r)}followedLinkToLocation(t,e){let r=this.getActionForLink(t),i=t.hasAttribute("data-turbo-stream");this.visit(e.href,{action:r,acceptsStreamResponse:i})}allowsVisitingLocationWithAction(t,e){return this.locationWithActionIsSamePage(t,e)||this.applicationAllowsVisitingLocation(t)}visitProposedToLocation(t,e){Vr(t),this.adapter.visitProposedToLocation(t,e)}visitStarted(t){t.acceptsStreamResponse||(ne(document.documentElement),this.view.markVisitDirection(t.direction)),Vr(t.location),t.silent||this.notifyApplicationAfterVisitingLocation(t.location,t.action)}visitCompleted(t){this.view.unmarkVisitDirection(),ae(document.documentElement),this.notifyApplicationAfterPageLoad(t.getTimingMetrics())}locationWithActionIsSamePage(t,e){return this.navigator.locationWithActionIsSamePage(t,e)}visitScrolledToSamePageLocation(t,e){this.notifyApplicationAfterVisitingSamePageLocation(t,e)}willSubmitForm(t,e){let r=lr(t,e);return this.submissionIsNavigatable(t,e)&&$(M(r),this.snapshot.rootLocation)}formSubmitted(t,e){this.navigator.submitForm(t,e)}pageBecameInteractive(){this.view.lastRenderedLocation=this.location,this.notifyApplicationAfterPageLoad()}pageLoaded(){this.history.assumeControlOfScrollRestoration()}pageWillUnload(){this.history.relinquishControlOfScrollRestoration()}receivedMessageFromStream(t){this.renderStreamMessage(t)}viewWillCacheSnapshot(){this.navigator.currentVisit?.silent||this.notifyApplicationBeforeCachingSnapshot()}allowsImmediateRender({element:t},e){let r=this.notifyApplicationBeforeRender(t,e),{defaultPrevented:i,detail:{render:o}}=r;return this.view.renderer&&o&&(this.view.renderer.renderElement=o),!i}viewRenderedSnapshot(t,e,r){this.view.lastRenderedLocation=this.history.location,this.notifyApplicationAfterRender(r)}preloadOnLoadLinksForView(t){this.preloader.preloadOnLoadLinksForView(t)}viewInvalidated(t){this.adapter.pageInvalidated(t)}frameLoaded(t){this.notifyApplicationAfterFrameLoad(t)}frameRendered(t,e){this.notifyApplicationAfterFrameRender(t,e)}applicationAllowsFollowingLinkToLocation(t,e,r){return!this.notifyApplicationAfterClickingLinkToLocation(t,e,r).defaultPrevented}applicationAllowsVisitingLocation(t){return!this.notifyApplicationBeforeVisitingLocation(t).defaultPrevented}notifyApplicationAfterClickingLinkToLocation(t,e,r){return y("turbo:click",{target:t,detail:{url:e.href,originalEvent:r},cancelable:!0})}notifyApplicationBeforeVisitingLocation(t){return y("turbo:before-visit",{detail:{url:t.href},cancelable:!0})}notifyApplicationAfterVisitingLocation(t,e){return y("turbo:visit",{detail:{url:t.href,action:e}})}notifyApplicationBeforeCachingSnapshot(){return y("turbo:before-cache")}notifyApplicationBeforeRender(t,e){return y("turbo:before-render",{detail:{newBody:t,...e},cancelable:!0})}notifyApplicationAfterRender(t){return y("turbo:render",{detail:{renderMethod:t}})}notifyApplicationAfterPageLoad(t={}){return y("turbo:load",{detail:{url:this.location.href,timing:t}})}notifyApplicationAfterVisitingSamePageLocation(t,e){dispatchEvent(new HashChangeEvent("hashchange",{oldURL:t.toString(),newURL:e.toString()}))}notifyApplicationAfterFrameLoad(t){return y("turbo:frame-load",{target:t})}notifyApplicationAfterFrameRender(t,e){return y("turbo:frame-render",{detail:{fetchResponse:t},target:e,cancelable:!0})}submissionIsNavigatable(t,e){if(k.forms.mode=="off")return!1;{let r=e?this.elementIsNavigatable(e):!0;return k.forms.mode=="optin"?r&&t.closest('[data-turbo="true"]')!=null:r&&this.elementIsNavigatable(t)}}elementIsNavigatable(t){let e=ut(t,"[data-turbo]"),r=ut(t,"turbo-frame");return k.drive.enabled||r?e?e.getAttribute("data-turbo")!="false":!0:e?e.getAttribute("data-turbo")=="true":!1}getActionForLink(t){return at(t)||"advance"}get snapshot(){return this.view.snapshot}};Ht=new WeakMap;function Vr(s){Object.defineProperties(s,ro)}var ro={absoluteURL:{get(){return this.toString()}}},S=new er(os),{cache:so,navigator:io}=S;function bs(){S.start()}function oo(s){S.registerAdapter(s)}function no(s,t){S.visit(s,t)}function ws(s){S.connectStreamSource(s)}function Is(s){S.disconnectStreamSource(s)}function ao(s){S.renderStreamMessage(s)}function co(){console.warn("Please replace `Turbo.clearCache()` with `Turbo.cache.clear()`. The top-level function is deprecated and will be removed in a future version of Turbo.`"),S.clearCache()}function lo(s){console.warn("Please replace `Turbo.setProgressBarDelay(delay)` with `Turbo.config.drive.progressBarDelay = delay`. The top-level function is deprecated and will be removed in a future version of Turbo.`"),k.drive.progressBarDelay=s}function ho(s){console.warn("Please replace `Turbo.setConfirmMethod(confirmMethod)` with `Turbo.config.forms.confirm = confirmMethod`. The top-level function is deprecated and will be removed in a future version of Turbo.`"),k.forms.confirm=s}function Qo(s){console.warn("Please replace `Turbo.setFormMode(mode)` with `Turbo.config.forms.mode = mode`. The top-level function is deprecated and will be removed in a future version of Turbo.`"),k.forms.mode=s}function Bo(s,t){Fe.renderElement(s,t)}function go(s,t){ue.renderElement(s,t)}var uo=Object.freeze({__proto__:null,navigator:io,session:S,cache:so,PageRenderer:zt,PageSnapshot:G,FrameRenderer:Mt,fetch:ns,config:k,start:bs,registerAdapter:oo,visit:no,connectStreamSource:ws,disconnectStreamSource:Is,renderStreamMessage:ao,clearCache:co,setProgressBarDelay:lo,setConfirmMethod:ho,setFormMode:Qo,morphBodyElements:Bo,morphTurboFrameElements:go,morphChildren:Qr,morphElements:be}),rr=class extends Error{},Ut,X,et,Kt,bt,wt,U,ht,Cs,vs,fs,Os,As,Es,xs,ir,Qt,Ls,ie,ys,Ss,ks,sr=class{constructor(t){f(this,U);c(this,"fetchResponseLoaded",t=>Promise.resolve());f(this,Ut,null);f(this,X,()=>{});f(this,et,!1);f(this,Kt,!1);f(this,bt,new Set);f(this,wt,!1);c(this,"action",null);c(this,"visitCachedSnapshot",({element:t})=>{let e=t.querySelector("#"+this.element.id);e&&this.previousFrameElement&&e.replaceChildren(...this.previousFrameElement.children),delete this.previousFrameElement});this.element=t,this.view=new Te(this,this.element),this.appearanceObserver=new Se(this,this.element),this.formLinkClickObserver=new Be(this,this.element),this.linkInterceptor=new he(this,this.element),this.restorationIdentifier=rt(),this.formSubmitObserver=new kt(this,this.element)}connect(){u(this,et)||(E(this,et,!0),this.loadingStyle==Bt.lazy?this.appearanceObserver.start():p(this,U,ht).call(this),this.formLinkClickObserver.start(),this.linkInterceptor.start(),this.formSubmitObserver.start())}disconnect(){u(this,et)&&(E(this,et,!1),this.appearanceObserver.stop(),this.formLinkClickObserver.stop(),this.linkInterceptor.stop(),this.formSubmitObserver.stop())}disabledChanged(){this.loadingStyle==Bt.eager&&p(this,U,ht).call(this)}sourceURLChanged(){p(this,U,ys).call(this,"src")||(this.element.isConnected&&(this.complete=!1),(this.loadingStyle==Bt.eager||u(this,Kt))&&p(this,U,ht).call(this))}sourceURLReloaded(){let{refresh:t,src:e}=this.element;return E(this,wt,e&&t==="morph"),this.element.removeAttribute("complete"),this.element.src=null,this.element.src=e,this.element.loaded}loadingStyleChanged(){this.loadingStyle==Bt.lazy?this.appearanceObserver.start():(this.appearanceObserver.stop(),p(this,U,ht).call(this))}async loadResponse(t){(t.redirected||t.succeeded&&t.isHTML)&&(this.sourceURL=t.response.url);try{let e=await t.responseHTML;if(e){let r=Pr(e);G.fromDocument(r).isVisitable?await p(this,U,Cs).call(this,t,r):await p(this,U,Os).call(this,t)}}finally{E(this,wt,!1),this.fetchResponseLoaded=()=>Promise.resolve()}}elementAppearedInViewport(t){this.proposeVisitIfNavigatedWithAction(t,at(t)),p(this,U,ht).call(this)}willSubmitFormLinkToLocation(t){return p(this,U,ie).call(this,t)}submittedFormLinkToLocation(t,e,r){let i=p(this,U,Qt).call(this,t);i&&r.setAttribute("data-turbo-frame",i.id)}shouldInterceptLinkClick(t,e,r){return p(this,U,ie).call(this,t)}linkClickIntercepted(t,e){p(this,U,fs).call(this,t,e)}willSubmitForm(t,e){return t.closest("turbo-frame")==this.element&&p(this,U,ie).call(this,t,e)}formSubmitted(t,e){this.formSubmission&&this.formSubmission.stop(),this.formSubmission=new le(this,t,e);let{fetchRequest:r}=this.formSubmission;this.prepareRequest(r),this.formSubmission.start()}prepareRequest(t){t.headers["Turbo-Frame"]=this.id,this.currentNavigationElement?.hasAttribute("data-turbo-stream")&&t.acceptResponseType(K.contentType)}requestStarted(t){ne(this.element)}requestPreventedHandlingResponse(t,e){u(this,X).call(this)}async requestSucceededWithResponse(t,e){await this.loadResponse(e),u(this,X).call(this)}async requestFailedWithResponse(t,e){await this.loadResponse(e),u(this,X).call(this)}requestErrored(t,e){console.error(e),u(this,X).call(this)}requestFinished(t){ae(this.element)}formSubmissionStarted({formElement:t}){ne(t,p(this,U,Qt).call(this,t))}formSubmissionSucceededWithResponse(t,e){let r=p(this,U,Qt).call(this,t.formElement,t.submitter);r.delegate.proposeVisitIfNavigatedWithAction(r,at(t.submitter,t.formElement,r)),r.delegate.loadResponse(e),t.isSafe||S.clearCache()}formSubmissionFailedWithResponse(t,e){this.element.delegate.loadResponse(e),S.clearCache()}formSubmissionErrored(t,e){console.error(e)}formSubmissionFinished({formElement:t}){ae(t,p(this,U,Qt).call(this,t))}allowsImmediateRender({element:t},e){let r=y("turbo:before-frame-render",{target:this.element,detail:{newFrame:t,...e},cancelable:!0}),{defaultPrevented:i,detail:{render:o}}=r;return this.view.renderer&&o&&(this.view.renderer.renderElement=o),!i}viewRenderedSnapshot(t,e,r){}preloadOnLoadLinksForView(t){S.preloadOnLoadLinksForView(t)}viewInvalidated(){}willRenderFrame(t,e){this.previousFrameElement=t.cloneNode(!0)}proposeVisitIfNavigatedWithAction(t,e=null){if(this.action=e,this.action){let r=G.fromElement(t).clone(),{visitCachedSnapshot:i}=t.delegate;t.delegate.fetchResponseLoaded=async o=>{if(t.src){let{statusCode:l,redirected:g}=o,C=await o.responseHTML,z={response:{statusCode:l,redirected:g,responseHTML:C},visitCachedSnapshot:i,willRender:!1,updateHistory:!1,restorationIdentifier:this.restorationIdentifier,snapshot:r};this.action&&(z.action=this.action),S.visit(t.src,z)}}}}changeHistory(){if(this.action){let t=$r(this.action);S.history.update(t,M(this.element.src||""),this.restorationIdentifier)}}async extractForeignFrameElement(t){let e,r=CSS.escape(this.id);try{if(e=Zr(t.querySelector(`turbo-frame#${r}`),this.sourceURL),e)return e;if(e=Zr(t.querySelector(`turbo-frame[src][recurse~=${r}]`),this.sourceURL),e)return await e.loaded,await this.extractForeignFrameElement(e)}catch(i){return console.error(i),new D}return null}get id(){return this.element.id}get enabled(){return!this.element.disabled}get sourceURL(){if(this.element.src)return this.element.src}set sourceURL(t){p(this,U,Ss).call(this,"src",()=>{this.element.src=t??null})}get loadingStyle(){return this.element.loading}get isLoading(){return this.formSubmission!==void 0||u(this,X).call(this)!==void 0}get complete(){return this.element.hasAttribute("complete")}set complete(t){t?this.element.setAttribute("complete",""):this.element.removeAttribute("complete")}get isActive(){return this.element.isActive&&u(this,et)}get rootLocation(){let e=this.element.ownerDocument.querySelector('meta[name="turbo-root"]')?.content??"/";return M(e)}};Ut=new WeakMap,X=new WeakMap,et=new WeakMap,Kt=new WeakMap,bt=new WeakMap,wt=new WeakMap,U=new WeakSet,ht=async function(){this.enabled&&this.isActive&&!this.complete&&this.sourceURL&&(this.element.loaded=p(this,U,vs).call(this,M(this.sourceURL)),this.appearanceObserver.stop(),await this.element.loaded,E(this,Kt,!0))},Cs=async function(t,e){let r=await this.extractForeignFrameElement(e.body),i=u(this,wt)?ue:Mt;if(r){let o=new It(r),l=new i(this,this.view.snapshot,o,!1,!1);this.view.renderPromise&&await this.view.renderPromise,this.changeHistory(),await this.view.render(l),this.complete=!0,S.frameRendered(t,this.element),S.frameLoaded(this.element),await this.fetchResponseLoaded(t)}else p(this,U,As).call(this,t)&&p(this,U,Es).call(this,t)},vs=async function(t){let e=new lt(this,N.get,t,new URLSearchParams,this.element);return u(this,Ut)?.cancel(),E(this,Ut,e),new Promise(r=>{E(this,X,()=>{E(this,X,()=>{}),E(this,Ut,null),r()}),e.perform()})},fs=function(t,e,r){let i=p(this,U,Qt).call(this,t,r);i.delegate.proposeVisitIfNavigatedWithAction(i,at(r,t,i)),p(this,U,ks).call(this,t,()=>{i.src=e})},Os=async function(t){console.warn(`The response (${t.statusCode}) from <turbo-frame id="${this.element.id}"> is performing a full page visit due to turbo-visit-control.`),await p(this,U,ir).call(this,t.response)},As=function(t){this.element.setAttribute("complete","");let e=t.response,r=async(o,l)=>{o instanceof Response?p(this,U,ir).call(this,o):S.visit(o,l)};return!y("turbo:frame-missing",{target:this.element,detail:{response:e,visit:r},cancelable:!0}).defaultPrevented},Es=function(t){this.view.missing(),p(this,U,xs).call(this,t)},xs=function(t){let e=`The response (${t.statusCode}) did not contain the expected <turbo-frame id="${this.element.id}"> and will be ignored. To perform a full page visit instead, set turbo-visit-control to reload.`;throw new rr(e)},ir=async function(t){let e=new St(t),r=await e.responseHTML,{location:i,redirected:o,statusCode:l}=e;return S.visit(i,{response:{redirected:o,statusCode:l,responseHTML:r}})},Qt=function(t,e){let r=oe("data-turbo-frame",e,t)||this.element.getAttribute("target");return Jr(r)??this.element},Ls=function(t,e){let r=lr(t,e);return $(M(r),this.rootLocation)},ie=function(t,e){let r=oe("data-turbo-frame",e,t)||this.element.getAttribute("target");if(t instanceof HTMLFormElement&&!p(this,U,Ls).call(this,t,e)||!this.enabled||r=="_top")return!1;if(r){let i=Jr(r);if(i)return!i.disabled}return!(!S.elementIsNavigatable(t)||e&&!S.elementIsNavigatable(e))},ys=function(t){return u(this,bt).has(t)},Ss=function(t,e){u(this,bt).add(t),e(),u(this,bt).delete(t)},ks=function(t,e){this.currentNavigationElement=t,e(),delete this.currentNavigationElement};function Jr(s){if(s!=null){let t=document.getElementById(s);if(t instanceof D)return t}}function Zr(s,t){if(s){let e=s.getAttribute("src");if(e!=null&&t!=null&&is(e,t))throw new Error(`Matching <turbo-frame id="${s.id}"> element has a source URL which references itself`);if(s.ownerDocument!==document&&(s=document.importNode(s,!0)),s instanceof D)return s.connectedCallback(),s.disconnectedCallback(),s}}var Ts={after(){this.targetElements.forEach(s=>s.parentElement?.insertBefore(this.templateContent,s.nextSibling))},append(){this.removeDuplicateTargetChildren(),this.targetElements.forEach(s=>s.append(this.templateContent))},before(){this.targetElements.forEach(s=>s.parentElement?.insertBefore(this.templateContent,s))},prepend(){this.removeDuplicateTargetChildren(),this.targetElements.forEach(s=>s.prepend(this.templateContent))},remove(){this.targetElements.forEach(s=>s.remove())},replace(){let s=this.getAttribute("method");this.targetElements.forEach(t=>{s==="morph"?be(t,this.templateContent):t.replaceWith(this.templateContent)})},update(){let s=this.getAttribute("method");this.targetElements.forEach(t=>{s==="morph"?Qr(t,this.templateContent):(t.innerHTML="",t.append(this.templateContent))})},refresh(){S.refresh(this.baseURI,this.requestId)}},nt,xt,Br=class Br extends HTMLElement{constructor(){super(...arguments);f(this,nt)}static async renderElement(e){await e.performAction()}async connectedCallback(){try{await this.render()}catch(e){console.error(e)}finally{this.disconnect()}}async render(){return this.renderPromise??(this.renderPromise=(async()=>{let e=this.beforeRenderEvent;this.dispatchEvent(e)&&(await Lt(),await e.detail.render(this))})())}disconnect(){try{this.remove()}catch{}}removeDuplicateTargetChildren(){this.duplicateChildren.forEach(e=>e.remove())}get duplicateChildren(){let e=this.targetElements.flatMap(i=>[...i.children]).filter(i=>!!i.getAttribute("id")),r=[...this.templateContent?.children||[]].filter(i=>!!i.getAttribute("id")).map(i=>i.getAttribute("id"));return e.filter(i=>r.includes(i.getAttribute("id")))}get performAction(){if(this.action){let e=Ts[this.action];if(e)return e;p(this,nt,xt).call(this,"unknown action")}p(this,nt,xt).call(this,"action attribute is missing")}get targetElements(){if(this.target)return this.targetElementsById;if(this.targets)return this.targetElementsByQuery;p(this,nt,xt).call(this,"target or targets attribute is missing")}get templateContent(){return this.templateElement.content.cloneNode(!0)}get templateElement(){if(this.firstElementChild===null){let e=this.ownerDocument.createElement("template");return this.appendChild(e),e}else if(this.firstElementChild instanceof HTMLTemplateElement)return this.firstElementChild;p(this,nt,xt).call(this,"first child element must be a <template> element")}get action(){return this.getAttribute("action")}get target(){return this.getAttribute("target")}get targets(){return this.getAttribute("targets")}get requestId(){return this.getAttribute("request-id")}get description(){return(this.outerHTML.match(/<[^>]+>/)??[])[0]??"<turbo-stream>"}get beforeRenderEvent(){return new CustomEvent("turbo:before-stream-render",{bubbles:!0,cancelable:!0,detail:{newStream:this,render:Br.renderElement}})}get targetElementsById(){let e=this.ownerDocument?.getElementById(this.target);return e!==null?[e]:[]}get targetElementsByQuery(){let e=this.ownerDocument?.querySelectorAll(this.targets);return e.length!==0?Array.prototype.slice.call(e):[]}};nt=new WeakSet,xt=function(e){throw new Error(`${this.description}: ${e}`)};var or=Br,nr=class extends HTMLElement{constructor(){super(...arguments);c(this,"streamSource",null)}connectedCallback(){this.streamSource=this.src.match(/^ws{1,2}:/)?new WebSocket(this.src):new EventSource(this.src),ws(this.streamSource)}disconnectedCallback(){this.streamSource&&(this.streamSource.close(),Is(this.streamSource))}get src(){return this.getAttribute("src")||""}};D.delegateConstructor=sr;customElements.get("turbo-frame")===void 0&&customElements.define("turbo-frame",D);customElements.get("turbo-stream")===void 0&&customElements.define("turbo-stream",or);customElements.get("turbo-stream-source")===void 0&&customElements.define("turbo-stream-source",nr);(()=>{let s=document.currentScript;if(s&&!s.hasAttribute("data-turbo-suppress-warning"))for(s=s.parentElement;s;){if(s==document.body)return console.warn(qr`
        You are loading Turbo from a <script> element inside the <body> element. This is probably not what you meant to do!

        Load your applications JavaScript bundle inside the <head> element instead. <script> elements in <body> are evaluated with each page change.

        For more information, see: https://turbo.hotwired.dev/handbook/building#working-with-script-elements

        
        Suppress this warning by adding a "data-turbo-suppress-warning" attribute to: %s
      `,s.outerHTML);s=s.parentElement}})();window.Turbo={...uo,StreamActions:Ts};bs();var gr=class{constructor(t,e,r){this.eventTarget=t,this.eventName=e,this.eventOptions=r,this.unorderedBindings=new Set}connect(){this.eventTarget.addEventListener(this.eventName,this,this.eventOptions)}disconnect(){this.eventTarget.removeEventListener(this.eventName,this,this.eventOptions)}bindingConnected(t){this.unorderedBindings.add(t)}bindingDisconnected(t){this.unorderedBindings.delete(t)}handleEvent(t){let e=Fo(t);for(let r of this.bindings){if(e.immediatePropagationStopped)break;r.handleEvent(e)}}hasBindings(){return this.unorderedBindings.size>0}get bindings(){return Array.from(this.unorderedBindings).sort((t,e)=>{let r=t.index,i=e.index;return r<i?-1:r>i?1:0})}};function Fo(s){if("immediatePropagationStopped"in s)return s;{let{stopImmediatePropagation:t}=s;return Object.assign(s,{immediatePropagationStopped:!1,stopImmediatePropagation(){this.immediatePropagationStopped=!0,t.call(this)}})}}var ur=class{constructor(t){this.application=t,this.eventListenerMaps=new Map,this.started=!1}start(){this.started||(this.started=!0,this.eventListeners.forEach(t=>t.connect()))}stop(){this.started&&(this.started=!1,this.eventListeners.forEach(t=>t.disconnect()))}get eventListeners(){return Array.from(this.eventListenerMaps.values()).reduce((t,e)=>t.concat(Array.from(e.values())),[])}bindingConnected(t){this.fetchEventListenerForBinding(t).bindingConnected(t)}bindingDisconnected(t,e=!1){this.fetchEventListenerForBinding(t).bindingDisconnected(t),e&&this.clearEventListenersForBinding(t)}handleError(t,e,r={}){this.application.handleError(t,`Error ${e}`,r)}clearEventListenersForBinding(t){let e=this.fetchEventListenerForBinding(t);e.hasBindings()||(e.disconnect(),this.removeMappedEventListenerFor(t))}removeMappedEventListenerFor(t){let{eventTarget:e,eventName:r,eventOptions:i}=t,o=this.fetchEventListenerMapForEventTarget(e),l=this.cacheKey(r,i);o.delete(l),o.size==0&&this.eventListenerMaps.delete(e)}fetchEventListenerForBinding(t){let{eventTarget:e,eventName:r,eventOptions:i}=t;return this.fetchEventListener(e,r,i)}fetchEventListener(t,e,r){let i=this.fetchEventListenerMapForEventTarget(t),o=this.cacheKey(e,r),l=i.get(o);return l||(l=this.createEventListener(t,e,r),i.set(o,l)),l}createEventListener(t,e,r){let i=new gr(t,e,r);return this.started&&i.connect(),i}fetchEventListenerMapForEventTarget(t){let e=this.eventListenerMaps.get(t);return e||(e=new Map,this.eventListenerMaps.set(t,e)),e}cacheKey(t,e){let r=[t];return Object.keys(e).sort().forEach(i=>{r.push(`${e[i]?"":"!"}${i}`)}),r.join(":")}},mo={stop({event:s,value:t}){return t&&s.stopPropagation(),!0},prevent({event:s,value:t}){return t&&s.preventDefault(),!0},self({event:s,value:t,element:e}){return t?e===s.target:!0}},po=/^(?:(?:([^.]+?)\+)?(.+?)(?:\.(.+?))?(?:@(window|document))?->)?(.+?)(?:#([^:]+?))(?::(.+))?$/;function Uo(s){let e=s.trim().match(po)||[],r=e[2],i=e[3];return i&&!["keydown","keyup","keypress"].includes(r)&&(r+=`.${i}`,i=""),{eventTarget:bo(e[4]),eventName:r,eventOptions:e[7]?wo(e[7]):{},identifier:e[5],methodName:e[6],keyFilter:e[1]||i}}function bo(s){if(s=="window")return window;if(s=="document")return document}function wo(s){return s.split(":").reduce((t,e)=>Object.assign(t,{[e.replace(/^!/,"")]:!/^!/.test(e)}),{})}function Io(s){if(s==window)return"window";if(s==document)return"document"}function Nr(s){return s.replace(/(?:[_-])([a-z0-9])/g,(t,e)=>e.toUpperCase())}function Fr(s){return Nr(s.replace(/--/g,"-").replace(/__/g,"_"))}function qt(s){return s.charAt(0).toUpperCase()+s.slice(1)}function Vs(s){return s.replace(/([A-Z])/g,(t,e)=>`-${e.toLowerCase()}`)}function Co(s){return s.match(/[^\s]+/g)||[]}function Ms(s){return s!=null}function mr(s,t){return Object.prototype.hasOwnProperty.call(s,t)}var zs=["meta","ctrl","alt","shift"],pr=class{constructor(t,e,r,i){this.element=t,this.index=e,this.eventTarget=r.eventTarget||t,this.eventName=r.eventName||vo(t)||we("missing event name"),this.eventOptions=r.eventOptions||{},this.identifier=r.identifier||we("missing identifier"),this.methodName=r.methodName||we("missing method name"),this.keyFilter=r.keyFilter||"",this.schema=i}static forToken(t,e){return new this(t.element,t.index,Uo(t.content),e)}toString(){let t=this.keyFilter?`.${this.keyFilter}`:"",e=this.eventTargetName?`@${this.eventTargetName}`:"";return`${this.eventName}${t}${e}->${this.identifier}#${this.methodName}`}shouldIgnoreKeyboardEvent(t){if(!this.keyFilter)return!1;let e=this.keyFilter.split("+");if(this.keyFilterDissatisfied(t,e))return!0;let r=e.filter(i=>!zs.includes(i))[0];return r?(mr(this.keyMappings,r)||we(`contains unknown key filter: ${this.keyFilter}`),this.keyMappings[r].toLowerCase()!==t.key.toLowerCase()):!1}shouldIgnoreMouseEvent(t){if(!this.keyFilter)return!1;let e=[this.keyFilter];return!!this.keyFilterDissatisfied(t,e)}get params(){let t={},e=new RegExp(`^data-${this.identifier}-(.+)-param$`,"i");for(let{name:r,value:i}of Array.from(this.element.attributes)){let o=r.match(e),l=o&&o[1];l&&(t[Nr(l)]=fo(i))}return t}get eventTargetName(){return Io(this.eventTarget)}get keyMappings(){return this.schema.keyMappings}keyFilterDissatisfied(t,e){let[r,i,o,l]=zs.map(g=>e.includes(g));return t.metaKey!==r||t.ctrlKey!==i||t.altKey!==o||t.shiftKey!==l}},Ns={a:()=>"click",button:()=>"click",form:()=>"submit",details:()=>"toggle",input:s=>s.getAttribute("type")=="submit"?"click":"input",select:()=>"change",textarea:()=>"input"};function vo(s){let t=s.tagName.toLowerCase();if(t in Ns)return Ns[t](s)}function we(s){throw new Error(s)}function fo(s){try{return JSON.parse(s)}catch{return s}}var Ur=class{constructor(t,e){this.context=t,this.action=e}get index(){return this.action.index}get eventTarget(){return this.action.eventTarget}get eventOptions(){return this.action.eventOptions}get identifier(){return this.context.identifier}handleEvent(t){let e=this.prepareActionEvent(t);this.willBeInvokedByEvent(t)&&this.applyEventModifiers(e)&&this.invokeWithEvent(e)}get eventName(){return this.action.eventName}get method(){let t=this.controller[this.methodName];if(typeof t=="function")return t;throw new Error(`Action "${this.action}" references undefined method "${this.methodName}"`)}applyEventModifiers(t){let{element:e}=this.action,{actionDescriptorFilters:r}=this.context.application,{controller:i}=this.context,o=!0;for(let[l,g]of Object.entries(this.eventOptions))if(l in r){let C=r[l];o=o&&C({name:l,value:g,event:t,element:e,controller:i})}else continue;return o}prepareActionEvent(t){return Object.assign(t,{params:this.action.params})}invokeWithEvent(t){let{target:e,currentTarget:r}=t;try{this.method.call(this.controller,t),this.context.logDebugActivity(this.methodName,{event:t,target:e,currentTarget:r,action:this.methodName})}catch(i){let{identifier:o,controller:l,element:g,index:C}=this,T={identifier:o,controller:l,element:g,index:C,event:t};this.context.handleError(i,`invoking action "${this.action}"`,T)}}willBeInvokedByEvent(t){let e=t.target;return t instanceof KeyboardEvent&&this.action.shouldIgnoreKeyboardEvent(t)||t instanceof MouseEvent&&this.action.shouldIgnoreMouseEvent(t)?!1:this.element===e?!0:e instanceof Element&&this.element.contains(e)?this.scope.containsElement(e):this.scope.containsElement(this.action.element)}get controller(){return this.context.controller}get methodName(){return this.action.methodName}get element(){return this.scope.element}get scope(){return this.context.scope}},Ie=class{constructor(t,e){this.mutationObserverInit={attributes:!0,childList:!0,subtree:!0},this.element=t,this.started=!1,this.delegate=e,this.elements=new Set,this.mutationObserver=new MutationObserver(r=>this.processMutations(r))}start(){this.started||(this.started=!0,this.mutationObserver.observe(this.element,this.mutationObserverInit),this.refresh())}pause(t){this.started&&(this.mutationObserver.disconnect(),this.started=!1),t(),this.started||(this.mutationObserver.observe(this.element,this.mutationObserverInit),this.started=!0)}stop(){this.started&&(this.mutationObserver.takeRecords(),this.mutationObserver.disconnect(),this.started=!1)}refresh(){if(this.started){let t=new Set(this.matchElementsInTree());for(let e of Array.from(this.elements))t.has(e)||this.removeElement(e);for(let e of Array.from(t))this.addElement(e)}}processMutations(t){if(this.started)for(let e of t)this.processMutation(e)}processMutation(t){t.type=="attributes"?this.processAttributeChange(t.target,t.attributeName):t.type=="childList"&&(this.processRemovedNodes(t.removedNodes),this.processAddedNodes(t.addedNodes))}processAttributeChange(t,e){this.elements.has(t)?this.delegate.elementAttributeChanged&&this.matchElement(t)?this.delegate.elementAttributeChanged(t,e):this.removeElement(t):this.matchElement(t)&&this.addElement(t)}processRemovedNodes(t){for(let e of Array.from(t)){let r=this.elementFromNode(e);r&&this.processTree(r,this.removeElement)}}processAddedNodes(t){for(let e of Array.from(t)){let r=this.elementFromNode(e);r&&this.elementIsActive(r)&&this.processTree(r,this.addElement)}}matchElement(t){return this.delegate.matchElement(t)}matchElementsInTree(t=this.element){return this.delegate.matchElementsInTree(t)}processTree(t,e){for(let r of this.matchElementsInTree(t))e.call(this,r)}elementFromNode(t){if(t.nodeType==Node.ELEMENT_NODE)return t}elementIsActive(t){return t.isConnected!=this.element.isConnected?!1:this.element.contains(t)}addElement(t){this.elements.has(t)||this.elementIsActive(t)&&(this.elements.add(t),this.delegate.elementMatched&&this.delegate.elementMatched(t))}removeElement(t){this.elements.has(t)&&(this.elements.delete(t),this.delegate.elementUnmatched&&this.delegate.elementUnmatched(t))}},Ce=class{constructor(t,e,r){this.attributeName=e,this.delegate=r,this.elementObserver=new Ie(t,this)}get element(){return this.elementObserver.element}get selector(){return`[${this.attributeName}]`}start(){this.elementObserver.start()}pause(t){this.elementObserver.pause(t)}stop(){this.elementObserver.stop()}refresh(){this.elementObserver.refresh()}get started(){return this.elementObserver.started}matchElement(t){return t.hasAttribute(this.attributeName)}matchElementsInTree(t){let e=this.matchElement(t)?[t]:[],r=Array.from(t.querySelectorAll(this.selector));return e.concat(r)}elementMatched(t){this.delegate.elementMatchedAttribute&&this.delegate.elementMatchedAttribute(t,this.attributeName)}elementUnmatched(t){this.delegate.elementUnmatchedAttribute&&this.delegate.elementUnmatchedAttribute(t,this.attributeName)}elementAttributeChanged(t,e){this.delegate.elementAttributeValueChanged&&this.attributeName==e&&this.delegate.elementAttributeValueChanged(t,e)}};function Oo(s,t,e){Js(s,t).add(e)}function Ao(s,t,e){Js(s,t).delete(e),Eo(s,t)}function Js(s,t){let e=s.get(t);return e||(e=new Set,s.set(t,e)),e}function Eo(s,t){let e=s.get(t);e!=null&&e.size==0&&s.delete(t)}var P=class{constructor(){this.valuesByKey=new Map}get keys(){return Array.from(this.valuesByKey.keys())}get values(){return Array.from(this.valuesByKey.values()).reduce((e,r)=>e.concat(Array.from(r)),[])}get size(){return Array.from(this.valuesByKey.values()).reduce((e,r)=>e+r.size,0)}add(t,e){Oo(this.valuesByKey,t,e)}delete(t,e){Ao(this.valuesByKey,t,e)}has(t,e){let r=this.valuesByKey.get(t);return r!=null&&r.has(e)}hasKey(t){return this.valuesByKey.has(t)}hasValue(t){return Array.from(this.valuesByKey.values()).some(r=>r.has(t))}getValuesForKey(t){let e=this.valuesByKey.get(t);return e?Array.from(e):[]}getKeysForValue(t){return Array.from(this.valuesByKey).filter(([e,r])=>r.has(t)).map(([e,r])=>e)}};var br=class{constructor(t,e,r,i){this._selector=e,this.details=i,this.elementObserver=new Ie(t,this),this.delegate=r,this.matchesByElement=new P}get started(){return this.elementObserver.started}get selector(){return this._selector}set selector(t){this._selector=t,this.refresh()}start(){this.elementObserver.start()}pause(t){this.elementObserver.pause(t)}stop(){this.elementObserver.stop()}refresh(){this.elementObserver.refresh()}get element(){return this.elementObserver.element}matchElement(t){let{selector:e}=this;if(e){let r=t.matches(e);return this.delegate.selectorMatchElement?r&&this.delegate.selectorMatchElement(t,this.details):r}else return!1}matchElementsInTree(t){let{selector:e}=this;if(e){let r=this.matchElement(t)?[t]:[],i=Array.from(t.querySelectorAll(e)).filter(o=>this.matchElement(o));return r.concat(i)}else return[]}elementMatched(t){let{selector:e}=this;e&&this.selectorMatched(t,e)}elementUnmatched(t){let e=this.matchesByElement.getKeysForValue(t);for(let r of e)this.selectorUnmatched(t,r)}elementAttributeChanged(t,e){let{selector:r}=this;if(r){let i=this.matchElement(t),o=this.matchesByElement.has(r,t);i&&!o?this.selectorMatched(t,r):!i&&o&&this.selectorUnmatched(t,r)}}selectorMatched(t,e){this.delegate.selectorMatched(t,e,this.details),this.matchesByElement.add(e,t)}selectorUnmatched(t,e){this.delegate.selectorUnmatched(t,e,this.details),this.matchesByElement.delete(e,t)}},wr=class{constructor(t,e){this.element=t,this.delegate=e,this.started=!1,this.stringMap=new Map,this.mutationObserver=new MutationObserver(r=>this.processMutations(r))}start(){this.started||(this.started=!0,this.mutationObserver.observe(this.element,{attributes:!0,attributeOldValue:!0}),this.refresh())}stop(){this.started&&(this.mutationObserver.takeRecords(),this.mutationObserver.disconnect(),this.started=!1)}refresh(){if(this.started)for(let t of this.knownAttributeNames)this.refreshAttribute(t,null)}processMutations(t){if(this.started)for(let e of t)this.processMutation(e)}processMutation(t){let e=t.attributeName;e&&this.refreshAttribute(e,t.oldValue)}refreshAttribute(t,e){let r=this.delegate.getStringMapKeyForAttribute(t);if(r!=null){this.stringMap.has(t)||this.stringMapKeyAdded(r,t);let i=this.element.getAttribute(t);if(this.stringMap.get(t)!=i&&this.stringMapValueChanged(i,r,e),i==null){let o=this.stringMap.get(t);this.stringMap.delete(t),o&&this.stringMapKeyRemoved(r,t,o)}else this.stringMap.set(t,i)}}stringMapKeyAdded(t,e){this.delegate.stringMapKeyAdded&&this.delegate.stringMapKeyAdded(t,e)}stringMapValueChanged(t,e,r){this.delegate.stringMapValueChanged&&this.delegate.stringMapValueChanged(t,e,r)}stringMapKeyRemoved(t,e,r){this.delegate.stringMapKeyRemoved&&this.delegate.stringMapKeyRemoved(t,e,r)}get knownAttributeNames(){return Array.from(new Set(this.currentAttributeNames.concat(this.recordedAttributeNames)))}get currentAttributeNames(){return Array.from(this.element.attributes).map(t=>t.name)}get recordedAttributeNames(){return Array.from(this.stringMap.keys())}},ve=class{constructor(t,e,r){this.attributeObserver=new Ce(t,e,this),this.delegate=r,this.tokensByElement=new P}get started(){return this.attributeObserver.started}start(){this.attributeObserver.start()}pause(t){this.attributeObserver.pause(t)}stop(){this.attributeObserver.stop()}refresh(){this.attributeObserver.refresh()}get element(){return this.attributeObserver.element}get attributeName(){return this.attributeObserver.attributeName}elementMatchedAttribute(t){this.tokensMatched(this.readTokensForElement(t))}elementAttributeValueChanged(t){let[e,r]=this.refreshTokensForElement(t);this.tokensUnmatched(e),this.tokensMatched(r)}elementUnmatchedAttribute(t){this.tokensUnmatched(this.tokensByElement.getValuesForKey(t))}tokensMatched(t){t.forEach(e=>this.tokenMatched(e))}tokensUnmatched(t){t.forEach(e=>this.tokenUnmatched(e))}tokenMatched(t){this.delegate.tokenMatched(t),this.tokensByElement.add(t.element,t)}tokenUnmatched(t){this.delegate.tokenUnmatched(t),this.tokensByElement.delete(t.element,t)}refreshTokensForElement(t){let e=this.tokensByElement.getValuesForKey(t),r=this.readTokensForElement(t),i=Lo(e,r).findIndex(([o,l])=>!yo(o,l));return i==-1?[[],[]]:[e.slice(i),r.slice(i)]}readTokensForElement(t){let e=this.attributeName,r=t.getAttribute(e)||"";return xo(r,t,e)}};function xo(s,t,e){return s.trim().split(/\s+/).filter(r=>r.length).map((r,i)=>({element:t,attributeName:e,content:r,index:i}))}function Lo(s,t){let e=Math.max(s.length,t.length);return Array.from({length:e},(r,i)=>[s[i],t[i]])}function yo(s,t){return s&&t&&s.index==t.index&&s.content==t.content}var fe=class{constructor(t,e,r){this.tokenListObserver=new ve(t,e,this),this.delegate=r,this.parseResultsByToken=new WeakMap,this.valuesByTokenByElement=new WeakMap}get started(){return this.tokenListObserver.started}start(){this.tokenListObserver.start()}stop(){this.tokenListObserver.stop()}refresh(){this.tokenListObserver.refresh()}get element(){return this.tokenListObserver.element}get attributeName(){return this.tokenListObserver.attributeName}tokenMatched(t){let{element:e}=t,{value:r}=this.fetchParseResultForToken(t);r&&(this.fetchValuesByTokenForElement(e).set(t,r),this.delegate.elementMatchedValue(e,r))}tokenUnmatched(t){let{element:e}=t,{value:r}=this.fetchParseResultForToken(t);r&&(this.fetchValuesByTokenForElement(e).delete(t),this.delegate.elementUnmatchedValue(e,r))}fetchParseResultForToken(t){let e=this.parseResultsByToken.get(t);return e||(e=this.parseToken(t),this.parseResultsByToken.set(t,e)),e}fetchValuesByTokenForElement(t){let e=this.valuesByTokenByElement.get(t);return e||(e=new Map,this.valuesByTokenByElement.set(t,e)),e}parseToken(t){try{return{value:this.delegate.parseValueForToken(t)}}catch(e){return{error:e}}}},Ir=class{constructor(t,e){this.context=t,this.delegate=e,this.bindingsByAction=new Map}start(){this.valueListObserver||(this.valueListObserver=new fe(this.element,this.actionAttribute,this),this.valueListObserver.start())}stop(){this.valueListObserver&&(this.valueListObserver.stop(),delete this.valueListObserver,this.disconnectAllActions())}get element(){return this.context.element}get identifier(){return this.context.identifier}get actionAttribute(){return this.schema.actionAttribute}get schema(){return this.context.schema}get bindings(){return Array.from(this.bindingsByAction.values())}connectAction(t){let e=new Ur(this.context,t);this.bindingsByAction.set(t,e),this.delegate.bindingConnected(e)}disconnectAction(t){let e=this.bindingsByAction.get(t);e&&(this.bindingsByAction.delete(t),this.delegate.bindingDisconnected(e))}disconnectAllActions(){this.bindings.forEach(t=>this.delegate.bindingDisconnected(t,!0)),this.bindingsByAction.clear()}parseValueForToken(t){let e=pr.forToken(t,this.schema);if(e.identifier==this.identifier)return e}elementMatchedValue(t,e){this.connectAction(e)}elementUnmatchedValue(t,e){this.disconnectAction(e)}},Cr=class{constructor(t,e){this.context=t,this.receiver=e,this.stringMapObserver=new wr(this.element,this),this.valueDescriptorMap=this.controller.valueDescriptorMap}start(){this.stringMapObserver.start(),this.invokeChangedCallbacksForDefaultValues()}stop(){this.stringMapObserver.stop()}get element(){return this.context.element}get controller(){return this.context.controller}getStringMapKeyForAttribute(t){if(t in this.valueDescriptorMap)return this.valueDescriptorMap[t].name}stringMapKeyAdded(t,e){let r=this.valueDescriptorMap[e];this.hasValue(t)||this.invokeChangedCallback(t,r.writer(this.receiver[t]),r.writer(r.defaultValue))}stringMapValueChanged(t,e,r){let i=this.valueDescriptorNameMap[e];t!==null&&(r===null&&(r=i.writer(i.defaultValue)),this.invokeChangedCallback(e,t,r))}stringMapKeyRemoved(t,e,r){let i=this.valueDescriptorNameMap[t];this.hasValue(t)?this.invokeChangedCallback(t,i.writer(this.receiver[t]),r):this.invokeChangedCallback(t,i.writer(i.defaultValue),r)}invokeChangedCallbacksForDefaultValues(){for(let{key:t,name:e,defaultValue:r,writer:i}of this.valueDescriptors)r!=null&&!this.controller.data.has(t)&&this.invokeChangedCallback(e,i(r),void 0)}invokeChangedCallback(t,e,r){let i=`${t}Changed`,o=this.receiver[i];if(typeof o=="function"){let l=this.valueDescriptorNameMap[t];try{let g=l.reader(e),C=r;r&&(C=l.reader(r)),o.call(this.receiver,g,C)}catch(g){throw g instanceof TypeError&&(g.message=`Stimulus Value "${this.context.identifier}.${l.name}" - ${g.message}`),g}}}get valueDescriptors(){let{valueDescriptorMap:t}=this;return Object.keys(t).map(e=>t[e])}get valueDescriptorNameMap(){let t={};return Object.keys(this.valueDescriptorMap).forEach(e=>{let r=this.valueDescriptorMap[e];t[r.name]=r}),t}hasValue(t){let e=this.valueDescriptorNameMap[t],r=`has${qt(e.name)}`;return this.receiver[r]}},vr=class{constructor(t,e){this.context=t,this.delegate=e,this.targetsByName=new P}start(){this.tokenListObserver||(this.tokenListObserver=new ve(this.element,this.attributeName,this),this.tokenListObserver.start())}stop(){this.tokenListObserver&&(this.disconnectAllTargets(),this.tokenListObserver.stop(),delete this.tokenListObserver)}tokenMatched({element:t,content:e}){this.scope.containsElement(t)&&this.connectTarget(t,e)}tokenUnmatched({element:t,content:e}){this.disconnectTarget(t,e)}connectTarget(t,e){var r;this.targetsByName.has(e,t)||(this.targetsByName.add(e,t),(r=this.tokenListObserver)===null||r===void 0||r.pause(()=>this.delegate.targetConnected(t,e)))}disconnectTarget(t,e){var r;this.targetsByName.has(e,t)&&(this.targetsByName.delete(e,t),(r=this.tokenListObserver)===null||r===void 0||r.pause(()=>this.delegate.targetDisconnected(t,e)))}disconnectAllTargets(){for(let t of this.targetsByName.keys)for(let e of this.targetsByName.getValuesForKey(t))this.disconnectTarget(e,t)}get attributeName(){return`data-${this.context.identifier}-target`}get element(){return this.context.element}get scope(){return this.context.scope}};function $t(s,t){let e=Zs(s);return Array.from(e.reduce((r,i)=>(ko(i,t).forEach(o=>r.add(o)),r),new Set))}function So(s,t){return Zs(s).reduce((r,i)=>(r.push(...To(i,t)),r),[])}function Zs(s){let t=[];for(;s;)t.push(s),s=Object.getPrototypeOf(s);return t.reverse()}function ko(s,t){let e=s[t];return Array.isArray(e)?e:[]}function To(s,t){let e=s[t];return e?Object.keys(e).map(r=>[r,e[r]]):[]}var fr=class{constructor(t,e){this.started=!1,this.context=t,this.delegate=e,this.outletsByName=new P,this.outletElementsByName=new P,this.selectorObserverMap=new Map,this.attributeObserverMap=new Map}start(){this.started||(this.outletDefinitions.forEach(t=>{this.setupSelectorObserverForOutlet(t),this.setupAttributeObserverForOutlet(t)}),this.started=!0,this.dependentContexts.forEach(t=>t.refresh()))}refresh(){this.selectorObserverMap.forEach(t=>t.refresh()),this.attributeObserverMap.forEach(t=>t.refresh())}stop(){this.started&&(this.started=!1,this.disconnectAllOutlets(),this.stopSelectorObservers(),this.stopAttributeObservers())}stopSelectorObservers(){this.selectorObserverMap.size>0&&(this.selectorObserverMap.forEach(t=>t.stop()),this.selectorObserverMap.clear())}stopAttributeObservers(){this.attributeObserverMap.size>0&&(this.attributeObserverMap.forEach(t=>t.stop()),this.attributeObserverMap.clear())}selectorMatched(t,e,{outletName:r}){let i=this.getOutlet(t,r);i&&this.connectOutlet(i,t,r)}selectorUnmatched(t,e,{outletName:r}){let i=this.getOutletFromMap(t,r);i&&this.disconnectOutlet(i,t,r)}selectorMatchElement(t,{outletName:e}){let r=this.selector(e),i=this.hasOutlet(t,e),o=t.matches(`[${this.schema.controllerAttribute}~=${e}]`);return r?i&&o&&t.matches(r):!1}elementMatchedAttribute(t,e){let r=this.getOutletNameFromOutletAttributeName(e);r&&this.updateSelectorObserverForOutlet(r)}elementAttributeValueChanged(t,e){let r=this.getOutletNameFromOutletAttributeName(e);r&&this.updateSelectorObserverForOutlet(r)}elementUnmatchedAttribute(t,e){let r=this.getOutletNameFromOutletAttributeName(e);r&&this.updateSelectorObserverForOutlet(r)}connectOutlet(t,e,r){var i;this.outletElementsByName.has(r,e)||(this.outletsByName.add(r,t),this.outletElementsByName.add(r,e),(i=this.selectorObserverMap.get(r))===null||i===void 0||i.pause(()=>this.delegate.outletConnected(t,e,r)))}disconnectOutlet(t,e,r){var i;this.outletElementsByName.has(r,e)&&(this.outletsByName.delete(r,t),this.outletElementsByName.delete(r,e),(i=this.selectorObserverMap.get(r))===null||i===void 0||i.pause(()=>this.delegate.outletDisconnected(t,e,r)))}disconnectAllOutlets(){for(let t of this.outletElementsByName.keys)for(let e of this.outletElementsByName.getValuesForKey(t))for(let r of this.outletsByName.getValuesForKey(t))this.disconnectOutlet(r,e,t)}updateSelectorObserverForOutlet(t){let e=this.selectorObserverMap.get(t);e&&(e.selector=this.selector(t))}setupSelectorObserverForOutlet(t){let e=this.selector(t),r=new br(document.body,e,this,{outletName:t});this.selectorObserverMap.set(t,r),r.start()}setupAttributeObserverForOutlet(t){let e=this.attributeNameForOutletName(t),r=new Ce(this.scope.element,e,this);this.attributeObserverMap.set(t,r),r.start()}selector(t){return this.scope.outlets.getSelectorForOutletName(t)}attributeNameForOutletName(t){return this.scope.schema.outletAttributeForScope(this.identifier,t)}getOutletNameFromOutletAttributeName(t){return this.outletDefinitions.find(e=>this.attributeNameForOutletName(e)===t)}get outletDependencies(){let t=new P;return this.router.modules.forEach(e=>{let r=e.definition.controllerConstructor;$t(r,"outlets").forEach(o=>t.add(o,e.identifier))}),t}get outletDefinitions(){return this.outletDependencies.getKeysForValue(this.identifier)}get dependentControllerIdentifiers(){return this.outletDependencies.getValuesForKey(this.identifier)}get dependentContexts(){let t=this.dependentControllerIdentifiers;return this.router.contexts.filter(e=>t.includes(e.identifier))}hasOutlet(t,e){return!!this.getOutlet(t,e)||!!this.getOutletFromMap(t,e)}getOutlet(t,e){return this.application.getControllerForElementAndIdentifier(t,e)}getOutletFromMap(t,e){return this.outletsByName.getValuesForKey(e).find(r=>r.element===t)}get scope(){return this.context.scope}get schema(){return this.context.schema}get identifier(){return this.context.identifier}get application(){return this.context.application}get router(){return this.application.router}},Or=class{constructor(t,e){this.logDebugActivity=(r,i={})=>{let{identifier:o,controller:l,element:g}=this;i=Object.assign({identifier:o,controller:l,element:g},i),this.application.logDebugActivity(this.identifier,r,i)},this.module=t,this.scope=e,this.controller=new t.controllerConstructor(this),this.bindingObserver=new Ir(this,this.dispatcher),this.valueObserver=new Cr(this,this.controller),this.targetObserver=new vr(this,this),this.outletObserver=new fr(this,this);try{this.controller.initialize(),this.logDebugActivity("initialize")}catch(r){this.handleError(r,"initializing controller")}}connect(){this.bindingObserver.start(),this.valueObserver.start(),this.targetObserver.start(),this.outletObserver.start();try{this.controller.connect(),this.logDebugActivity("connect")}catch(t){this.handleError(t,"connecting controller")}}refresh(){this.outletObserver.refresh()}disconnect(){try{this.controller.disconnect(),this.logDebugActivity("disconnect")}catch(t){this.handleError(t,"disconnecting controller")}this.outletObserver.stop(),this.targetObserver.stop(),this.valueObserver.stop(),this.bindingObserver.stop()}get application(){return this.module.application}get identifier(){return this.module.identifier}get schema(){return this.application.schema}get dispatcher(){return this.application.dispatcher}get element(){return this.scope.element}get parentElement(){return this.element.parentElement}handleError(t,e,r={}){let{identifier:i,controller:o,element:l}=this;r=Object.assign({identifier:i,controller:o,element:l},r),this.application.handleError(t,`Error ${e}`,r)}targetConnected(t,e){this.invokeControllerMethod(`${e}TargetConnected`,t)}targetDisconnected(t,e){this.invokeControllerMethod(`${e}TargetDisconnected`,t)}outletConnected(t,e,r){this.invokeControllerMethod(`${Fr(r)}OutletConnected`,t,e)}outletDisconnected(t,e,r){this.invokeControllerMethod(`${Fr(r)}OutletDisconnected`,t,e)}invokeControllerMethod(t,...e){let r=this.controller;typeof r[t]=="function"&&r[t](...e)}};function Mo(s){return zo(s,No(s))}function zo(s,t){let e=Do(s),r=jo(s.prototype,t);return Object.defineProperties(e.prototype,r),e}function No(s){return $t(s,"blessings").reduce((e,r)=>{let i=r(s);for(let o in i){let l=e[o]||{};e[o]=Object.assign(l,i[o])}return e},{})}function jo(s,t){return Go(t).reduce((e,r)=>{let i=Wo(s,t,r);return i&&Object.assign(e,{[r]:i}),e},{})}function Wo(s,t,e){let r=Object.getOwnPropertyDescriptor(s,e);if(!(r&&"value"in r)){let o=Object.getOwnPropertyDescriptor(t,e).value;return r&&(o.get=r.get||o.get,o.set=r.set||o.set),o}}var Go=typeof Object.getOwnPropertySymbols=="function"?s=>[...Object.getOwnPropertyNames(s),...Object.getOwnPropertySymbols(s)]:Object.getOwnPropertyNames,Do=(()=>{function s(e){function r(){return Reflect.construct(e,arguments,new.target)}return r.prototype=Object.create(e.prototype,{constructor:{value:r}}),Reflect.setPrototypeOf(r,e),r}function t(){let r=s(function(){this.a.call(this)});return r.prototype.a=function(){},new r}try{return t(),s}catch{return r=>class extends r{}}})();function Xo(s){return{identifier:s.identifier,controllerConstructor:Mo(s.controllerConstructor)}}var Ar=class{constructor(t,e){this.application=t,this.definition=Xo(e),this.contextsByScope=new WeakMap,this.connectedContexts=new Set}get identifier(){return this.definition.identifier}get controllerConstructor(){return this.definition.controllerConstructor}get contexts(){return Array.from(this.connectedContexts)}connectContextForScope(t){let e=this.fetchContextForScope(t);this.connectedContexts.add(e),e.connect()}disconnectContextForScope(t){let e=this.contextsByScope.get(t);e&&(this.connectedContexts.delete(e),e.disconnect())}fetchContextForScope(t){let e=this.contextsByScope.get(t);return e||(e=new Or(this,t),this.contextsByScope.set(t,e)),e}},Er=class{constructor(t){this.scope=t}has(t){return this.data.has(this.getDataKey(t))}get(t){return this.getAll(t)[0]}getAll(t){let e=this.data.get(this.getDataKey(t))||"";return Co(e)}getAttributeName(t){return this.data.getAttributeNameForKey(this.getDataKey(t))}getDataKey(t){return`${t}-class`}get data(){return this.scope.data}},xr=class{constructor(t){this.scope=t}get element(){return this.scope.element}get identifier(){return this.scope.identifier}get(t){let e=this.getAttributeNameForKey(t);return this.element.getAttribute(e)}set(t,e){let r=this.getAttributeNameForKey(t);return this.element.setAttribute(r,e),this.get(t)}has(t){let e=this.getAttributeNameForKey(t);return this.element.hasAttribute(e)}delete(t){if(this.has(t)){let e=this.getAttributeNameForKey(t);return this.element.removeAttribute(e),!0}else return!1}getAttributeNameForKey(t){return`data-${this.identifier}-${Vs(t)}`}},Lr=class{constructor(t){this.warnedKeysByObject=new WeakMap,this.logger=t}warn(t,e,r){let i=this.warnedKeysByObject.get(t);i||(i=new Set,this.warnedKeysByObject.set(t,i)),i.has(e)||(i.add(e),this.logger.warn(r,t))}};function yr(s,t){return`[${s}~="${t}"]`}var Sr=class{constructor(t){this.scope=t}get element(){return this.scope.element}get identifier(){return this.scope.identifier}get schema(){return this.scope.schema}has(t){return this.find(t)!=null}find(...t){return t.reduce((e,r)=>e||this.findTarget(r)||this.findLegacyTarget(r),void 0)}findAll(...t){return t.reduce((e,r)=>[...e,...this.findAllTargets(r),...this.findAllLegacyTargets(r)],[])}findTarget(t){let e=this.getSelectorForTargetName(t);return this.scope.findElement(e)}findAllTargets(t){let e=this.getSelectorForTargetName(t);return this.scope.findAllElements(e)}getSelectorForTargetName(t){let e=this.schema.targetAttributeForScope(this.identifier);return yr(e,t)}findLegacyTarget(t){let e=this.getLegacySelectorForTargetName(t);return this.deprecate(this.scope.findElement(e),t)}findAllLegacyTargets(t){let e=this.getLegacySelectorForTargetName(t);return this.scope.findAllElements(e).map(r=>this.deprecate(r,t))}getLegacySelectorForTargetName(t){let e=`${this.identifier}.${t}`;return yr(this.schema.targetAttribute,e)}deprecate(t,e){if(t){let{identifier:r}=this,i=this.schema.targetAttribute,o=this.schema.targetAttributeForScope(r);this.guide.warn(t,`target:${e}`,`Please replace ${i}="${r}.${e}" with ${o}="${e}". The ${i} attribute is deprecated and will be removed in a future version of Stimulus.`)}return t}get guide(){return this.scope.guide}},kr=class{constructor(t,e){this.scope=t,this.controllerElement=e}get element(){return this.scope.element}get identifier(){return this.scope.identifier}get schema(){return this.scope.schema}has(t){return this.find(t)!=null}find(...t){return t.reduce((e,r)=>e||this.findOutlet(r),void 0)}findAll(...t){return t.reduce((e,r)=>[...e,...this.findAllOutlets(r)],[])}getSelectorForOutletName(t){let e=this.schema.outletAttributeForScope(this.identifier,t);return this.controllerElement.getAttribute(e)}findOutlet(t){let e=this.getSelectorForOutletName(t);if(e)return this.findElement(e,t)}findAllOutlets(t){let e=this.getSelectorForOutletName(t);return e?this.findAllElements(e,t):[]}findElement(t,e){return this.scope.queryElements(t).filter(i=>this.matchesElement(i,t,e))[0]}findAllElements(t,e){return this.scope.queryElements(t).filter(i=>this.matchesElement(i,t,e))}matchesElement(t,e,r){let i=t.getAttribute(this.scope.schema.controllerAttribute)||"";return t.matches(e)&&i.split(" ").includes(r)}},Tr=class s{constructor(t,e,r,i){this.targets=new Sr(this),this.classes=new Er(this),this.data=new xr(this),this.containsElement=o=>o.closest(this.controllerSelector)===this.element,this.schema=t,this.element=e,this.identifier=r,this.guide=new Lr(i),this.outlets=new kr(this.documentScope,e)}findElement(t){return this.element.matches(t)?this.element:this.queryElements(t).find(this.containsElement)}findAllElements(t){return[...this.element.matches(t)?[this.element]:[],...this.queryElements(t).filter(this.containsElement)]}queryElements(t){return Array.from(this.element.querySelectorAll(t))}get controllerSelector(){return yr(this.schema.controllerAttribute,this.identifier)}get isDocumentScope(){return this.element===document.documentElement}get documentScope(){return this.isDocumentScope?this:new s(this.schema,document.documentElement,this.identifier,this.guide.logger)}},Mr=class{constructor(t,e,r){this.element=t,this.schema=e,this.delegate=r,this.valueListObserver=new fe(this.element,this.controllerAttribute,this),this.scopesByIdentifierByElement=new WeakMap,this.scopeReferenceCounts=new WeakMap}start(){this.valueListObserver.start()}stop(){this.valueListObserver.stop()}get controllerAttribute(){return this.schema.controllerAttribute}parseValueForToken(t){let{element:e,content:r}=t;return this.parseValueForElementAndIdentifier(e,r)}parseValueForElementAndIdentifier(t,e){let r=this.fetchScopesByIdentifierForElement(t),i=r.get(e);return i||(i=this.delegate.createScopeForElementAndIdentifier(t,e),r.set(e,i)),i}elementMatchedValue(t,e){let r=(this.scopeReferenceCounts.get(e)||0)+1;this.scopeReferenceCounts.set(e,r),r==1&&this.delegate.scopeConnected(e)}elementUnmatchedValue(t,e){let r=this.scopeReferenceCounts.get(e);r&&(this.scopeReferenceCounts.set(e,r-1),r==1&&this.delegate.scopeDisconnected(e))}fetchScopesByIdentifierForElement(t){let e=this.scopesByIdentifierByElement.get(t);return e||(e=new Map,this.scopesByIdentifierByElement.set(t,e)),e}},zr=class{constructor(t){this.application=t,this.scopeObserver=new Mr(this.element,this.schema,this),this.scopesByIdentifier=new P,this.modulesByIdentifier=new Map}get element(){return this.application.element}get schema(){return this.application.schema}get logger(){return this.application.logger}get controllerAttribute(){return this.schema.controllerAttribute}get modules(){return Array.from(this.modulesByIdentifier.values())}get contexts(){return this.modules.reduce((t,e)=>t.concat(e.contexts),[])}start(){this.scopeObserver.start()}stop(){this.scopeObserver.stop()}loadDefinition(t){this.unloadIdentifier(t.identifier);let e=new Ar(this.application,t);this.connectModule(e);let r=t.controllerConstructor.afterLoad;r&&r.call(t.controllerConstructor,t.identifier,this.application)}unloadIdentifier(t){let e=this.modulesByIdentifier.get(t);e&&this.disconnectModule(e)}getContextForElementAndIdentifier(t,e){let r=this.modulesByIdentifier.get(e);if(r)return r.contexts.find(i=>i.element==t)}proposeToConnectScopeForElementAndIdentifier(t,e){let r=this.scopeObserver.parseValueForElementAndIdentifier(t,e);r?this.scopeObserver.elementMatchedValue(r.element,r):console.error(`Couldn't find or create scope for identifier: "${e}" and element:`,t)}handleError(t,e,r){this.application.handleError(t,e,r)}createScopeForElementAndIdentifier(t,e){return new Tr(this.schema,t,e,this.logger)}scopeConnected(t){this.scopesByIdentifier.add(t.identifier,t);let e=this.modulesByIdentifier.get(t.identifier);e&&e.connectContextForScope(t)}scopeDisconnected(t){this.scopesByIdentifier.delete(t.identifier,t);let e=this.modulesByIdentifier.get(t.identifier);e&&e.disconnectContextForScope(t)}connectModule(t){this.modulesByIdentifier.set(t.identifier,t),this.scopesByIdentifier.getValuesForKey(t.identifier).forEach(r=>t.connectContextForScope(r))}disconnectModule(t){this.modulesByIdentifier.delete(t.identifier),this.scopesByIdentifier.getValuesForKey(t.identifier).forEach(r=>t.disconnectContextForScope(r))}},Ro={controllerAttribute:"data-controller",actionAttribute:"data-action",targetAttribute:"data-target",targetAttributeForScope:s=>`data-${s}-target`,outletAttributeForScope:(s,t)=>`data-${s}-${t}-outlet`,keyMappings:Object.assign(Object.assign({enter:"Enter",tab:"Tab",esc:"Escape",space:" ",up:"ArrowUp",down:"ArrowDown",left:"ArrowLeft",right:"ArrowRight",home:"Home",end:"End",page_up:"PageUp",page_down:"PageDown"},js("abcdefghijklmnopqrstuvwxyz".split("").map(s=>[s,s]))),js("0123456789".split("").map(s=>[s,s])))};function js(s){return s.reduce((t,[e,r])=>Object.assign(Object.assign({},t),{[e]:r}),{})}var Oe=class{constructor(t=document.documentElement,e=Ro){this.logger=console,this.debug=!1,this.logDebugActivity=(r,i,o={})=>{this.debug&&this.logFormattedMessage(r,i,o)},this.element=t,this.schema=e,this.dispatcher=new ur(this),this.router=new zr(this),this.actionDescriptorFilters=Object.assign({},mo)}static start(t,e){let r=new this(t,e);return r.start(),r}async start(){await Vo(),this.logDebugActivity("application","starting"),this.dispatcher.start(),this.router.start(),this.logDebugActivity("application","start")}stop(){this.logDebugActivity("application","stopping"),this.dispatcher.stop(),this.router.stop(),this.logDebugActivity("application","stop")}register(t,e){this.load({identifier:t,controllerConstructor:e})}registerActionOption(t,e){this.actionDescriptorFilters[t]=e}load(t,...e){(Array.isArray(t)?t:[t,...e]).forEach(i=>{i.controllerConstructor.shouldLoad&&this.router.loadDefinition(i)})}unload(t,...e){(Array.isArray(t)?t:[t,...e]).forEach(i=>this.router.unloadIdentifier(i))}get controllers(){return this.router.contexts.map(t=>t.controller)}getControllerForElementAndIdentifier(t,e){let r=this.router.getContextForElementAndIdentifier(t,e);return r?r.controller:null}handleError(t,e,r){var i;this.logger.error(`%s

%o

%o`,e,t,r),(i=window.onerror)===null||i===void 0||i.call(window,e,"",0,0,t)}logFormattedMessage(t,e,r={}){r=Object.assign({application:this},r),this.logger.groupCollapsed(`${t} #${e}`),this.logger.log("details:",Object.assign({},r)),this.logger.groupEnd()}};function Vo(){return new Promise(s=>{document.readyState=="loading"?document.addEventListener("DOMContentLoaded",()=>s()):s()})}function Jo(s){return $t(s,"classes").reduce((e,r)=>Object.assign(e,Zo(r)),{})}function Zo(s){return{[`${s}Class`]:{get(){let{classes:t}=this;if(t.has(s))return t.get(s);{let e=t.getAttributeName(s);throw new Error(`Missing attribute "${e}"`)}}},[`${s}Classes`]:{get(){return this.classes.getAll(s)}},[`has${qt(s)}Class`]:{get(){return this.classes.has(s)}}}}function Yo(s){return $t(s,"outlets").reduce((e,r)=>Object.assign(e,Ho(r)),{})}function Ws(s,t,e){return s.application.getControllerForElementAndIdentifier(t,e)}function Gs(s,t,e){let r=Ws(s,t,e);if(r||(s.application.router.proposeToConnectScopeForElementAndIdentifier(t,e),r=Ws(s,t,e),r))return r}function Ho(s){let t=Fr(s);return{[`${t}Outlet`]:{get(){let e=this.outlets.find(s),r=this.outlets.getSelectorForOutletName(s);if(e){let i=Gs(this,e,s);if(i)return i;throw new Error(`The provided outlet element is missing an outlet controller "${s}" instance for host controller "${this.identifier}"`)}throw new Error(`Missing outlet element "${s}" for host controller "${this.identifier}". Stimulus couldn't find a matching outlet element using selector "${r}".`)}},[`${t}Outlets`]:{get(){let e=this.outlets.findAll(s);return e.length>0?e.map(r=>{let i=Gs(this,r,s);if(i)return i;console.warn(`The provided outlet element is missing an outlet controller "${s}" instance for host controller "${this.identifier}"`,r)}).filter(r=>r):[]}},[`${t}OutletElement`]:{get(){let e=this.outlets.find(s),r=this.outlets.getSelectorForOutletName(s);if(e)return e;throw new Error(`Missing outlet element "${s}" for host controller "${this.identifier}". Stimulus couldn't find a matching outlet element using selector "${r}".`)}},[`${t}OutletElements`]:{get(){return this.outlets.findAll(s)}},[`has${qt(t)}Outlet`]:{get(){return this.outlets.has(s)}}}}function Ko(s){return $t(s,"targets").reduce((e,r)=>Object.assign(e,Po(r)),{})}function Po(s){return{[`${s}Target`]:{get(){let t=this.targets.find(s);if(t)return t;throw new Error(`Missing target element "${s}" for "${this.identifier}" controller`)}},[`${s}Targets`]:{get(){return this.targets.findAll(s)}},[`has${qt(s)}Target`]:{get(){return this.targets.has(s)}}}}function qo(s){let t=So(s,"values"),e={valueDescriptorMap:{get(){return t.reduce((r,i)=>{let o=Ys(i,this.identifier),l=this.data.getAttributeNameForKey(o.key);return Object.assign(r,{[l]:o})},{})}}};return t.reduce((r,i)=>Object.assign(r,$o(i)),e)}function $o(s,t){let e=Ys(s,t),{key:r,name:i,reader:o,writer:l}=e;return{[i]:{get(){let g=this.data.get(r);return g!==null?o(g):e.defaultValue},set(g){g===void 0?this.data.delete(r):this.data.set(r,l(g))}},[`has${qt(i)}`]:{get(){return this.data.has(r)||e.hasCustomDefaultValue}}}}function Ys([s,t],e){return rn({controller:e,token:s,typeDefinition:t})}function Ae(s){switch(s){case Array:return"array";case Boolean:return"boolean";case Number:return"number";case Object:return"object";case String:return"string"}}function Pt(s){switch(typeof s){case"boolean":return"boolean";case"number":return"number";case"string":return"string"}if(Array.isArray(s))return"array";if(Object.prototype.toString.call(s)==="[object Object]")return"object"}function _o(s){let{controller:t,token:e,typeObject:r}=s,i=Ms(r.type),o=Ms(r.default),l=i&&o,g=i&&!o,C=!i&&o,T=Ae(r.type),z=Pt(s.typeObject.default);if(g)return T;if(C)return z;if(T!==z){let q=t?`${t}.${e}`:e;throw new Error(`The specified default value for the Stimulus Value "${q}" must match the defined type "${T}". The provided default value of "${r.default}" is of type "${z}".`)}if(l)return T}function tn(s){let{controller:t,token:e,typeDefinition:r}=s,o=_o({controller:t,token:e,typeObject:r}),l=Pt(r),g=Ae(r),C=o||l||g;if(C)return C;let T=t?`${t}.${r}`:e;throw new Error(`Unknown value type "${T}" for "${e}" value`)}function en(s){let t=Ae(s);if(t)return Ds[t];let e=mr(s,"default"),r=mr(s,"type"),i=s;if(e)return i.default;if(r){let{type:o}=i,l=Ae(o);if(l)return Ds[l]}return s}function rn(s){let{token:t,typeDefinition:e}=s,r=`${Vs(t)}-value`,i=tn(s);return{type:i,key:r,name:Nr(r),get defaultValue(){return en(e)},get hasCustomDefaultValue(){return Pt(e)!==void 0},reader:sn[i],writer:Xs[i]||Xs.default}}var Ds={get array(){return[]},boolean:!1,number:0,get object(){return{}},string:""},sn={array(s){let t=JSON.parse(s);if(!Array.isArray(t))throw new TypeError(`expected value of type "array" but instead got value "${s}" of type "${Pt(t)}"`);return t},boolean(s){return!(s=="0"||String(s).toLowerCase()=="false")},number(s){return Number(s.replace(/_/g,""))},object(s){let t=JSON.parse(s);if(t===null||typeof t!="object"||Array.isArray(t))throw new TypeError(`expected value of type "object" but instead got value "${s}" of type "${Pt(t)}"`);return t},string(s){return s}},Xs={default:on,array:Rs,object:Rs};function Rs(s){return JSON.stringify(s)}function on(s){return`${s}`}var R=class{constructor(t){this.context=t}static get shouldLoad(){return!0}static afterLoad(t,e){}get application(){return this.context.application}get scope(){return this.context.scope}get element(){return this.scope.element}get identifier(){return this.scope.identifier}get targets(){return this.scope.targets}get outlets(){return this.scope.outlets}get classes(){return this.scope.classes}get data(){return this.scope.data}initialize(){}connect(){}disconnect(){}dispatch(t,{target:e=this.element,detail:r={},prefix:i=this.identifier,bubbles:o=!0,cancelable:l=!0}={}){let g=i?`${i}:${t}`:t,C=new CustomEvent(g,{detail:r,bubbles:o,cancelable:l});return e.dispatchEvent(C),C}};R.blessings=[Jo,Ko,qo,Yo];R.targets=[];R.outlets=[];R.values={};var Ot=Oe.start();Ot.warnings=!0;Ot.debug=!1;window.Stimulus=Ot;var At=class extends R{connect(){this.loadUserPreference(),this.updateUI()}toggle(){let s=document.documentElement.classList.toggle("dark");this.saveUserPreference(s),this.darkValue=!this.darkValue,this.updateUI()}loadUserPreference(){let s=localStorage.getItem("theme");s==="dark"||!s&&window.matchMedia("(prefers-color-scheme: dark)").matches?(document.documentElement.classList.add("dark"),this.darkValue=!0):(document.documentElement.classList.remove("dark"),this.darkValue=!1)}saveUserPreference(s){localStorage.setItem("theme",s?"dark":"light")}updateUI(){this.darkValue?(this.lightTarget.classList.add("hidden"),this.darkTarget.classList.remove("hidden")):(this.lightTarget.classList.remove("hidden"),this.darkTarget.classList.add("hidden"))}};c(At,"values",{dark:Boolean,default:!1}),c(At,"targets",["light","dark"]);var Et=class extends R{toggle(){this.openValue=!this.openValue,this.overlayTarget.dataset.open=this.openValue,this.menuTarget.dataset.open=this.openValue;let s=document.querySelector("body");this.openValue?s.classList.add("overflow-hidden","touch-none"):s.classList.remove("overflow-hidden","touch-none")}};c(Et,"values",{open:Boolean,default:!1}),c(Et,"targets",["menu","overlay"]);Ot.register("theme",At);Ot.register("menu",Et);})();
/*! Bundled license information:

@hotwired/turbo/dist/turbo.es2017-esm.js:
  (*!
  Turbo 8.0.19
  Copyright  2025 37signals LLC
   *)
*/
//# sourceMappingURL=/assets/index.OQDTOKYE.js.map
