<!doctype html>
<html lang="en" class="h-full antialiased">
  <head>
    <meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />

<!-- Begin Bridgetown SEO tag v7.0.1 -->
<title>Escribiendo un cliente Rest que haga cache de la solicitudes | Mario Alberto Chávez - Ruby on Rails, AI Tools &amp; former CTO</title>
<meta property="og:title" content="Escribiendo un cliente Rest que haga cache de la solicitudes" />
<meta name="author" content="Mario Alberto Chávez" />
<meta property="og:locale" content="es_MX" />
<meta name="description" content="El desarrollar y mantener un API REST requiere de conocer el estándar de HTTP para tratar de obtener el mejor provecho y ofrecer mejores APIs para los clientes. Como parte del trabajo de mantener un API REST también incluye el asegurarse que los clientes hagan uso efectivo de las facilidades del API." />
<meta property="og:description" content="El desarrollar y mantener un API REST requiere de conocer el estándar de HTTP para tratar de obtener el mejor provecho y ofrecer mejores APIs para los clientes. Como parte del trabajo de mantener un API REST también incluye el asegurarse que los clientes hagan uso efectivo de las facilidades del API." />
<link rel="canonical" href="https://mariochavez.io/desarrollo/2020/06/04/cliente-api-rest-cache/" />
<meta property="og:url" content="https://mariochavez.io/desarrollo/2020/06/04/cliente-api-rest-cache/" />
<meta property="og:site_name" content="Mario Alberto Chávez - Ruby on Rails, AI Tools &amp; former CTO" />
<meta property="og:image" content="https://mariochavez.io/images/cache/cliente-rest.jpg" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2020-06-04T01:00:00-05:00" />
<meta name="twitter:card" content="summary_large_image" />
<meta property="twitter:image" content="https://mariochavez.io/images/cache/cliente-rest.jpg" />
<meta property="twitter:title" content="Escribiendo un cliente Rest que haga cache de la solicitudes" />
<meta name="twitter:site" content="@mario_chavez" />
<meta name="twitter:creator" content="@Mario Alberto Chávez" />
<!-- End Bridgetown SEO tag -->


<link type="application/atom+xml" rel="alternate" href="https://mariochavez.io/feed.xml" title="Mario Alberto Chávez - Ruby on Rails, AI Tools & former CTO" />

<meta property="og:type" content="article">
<meta property="og:site_name" content="Mario Alberto Chávez - Software Development">
<meta name="twitter:card" content="summary_large_image">

<meta name="robots" content="index, follow">
<meta name="revisit-after" content="7 days">

<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/site.webmanifest">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="theme-color" content="#ffffff">

<link rel="stylesheet" href="/assets/index.C2JFVGXA.css" />
<script src="/assets/index.OQDTOKYE.js" defer></script>


<script type="application/javascript">
  (function() {
    try {
      const theme = localStorage.getItem('theme');
      if (theme === 'dark' || (!theme && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
        document.documentElement.classList.add('dark');
      } else {
        document.documentElement.classList.remove('dark');
      }
    } catch (e) {
      // Fail silently
    }
  })();
</script>

<script type="application/ld+json">
  {
  "@context": "https://schema.org",
  "@graph": [
    {
      "@type": "WebSite",
      "@id": "https://mariochavez.io/#website",
      "url": "https://mariochavez.io/",
      "name": "Mario Alberto Chávez",
      "description": "Ruby on Rails architect and AI toolmaker from Colima, México. Creator of Rails MCP Server, former fintech CTO, and author of Aprendiendo Ruby on Rails. Exploring the convergence of Rails and AI.",
      "publisher": {
        "@type": "Person",
        "@id": "https://mariochavez.io/#person",
        "name": "Mario Alberto Chávez"
      },
    },
    {
      "@type": "CollectionPage",
      "@id": "https://mariochavez.io/#webpage",
      "url": "https://mariochavez.io/",
      "name": "Inicio | Mario Alberto Chávez",
      "isPartOf": {
        "@id": "https://mariochavez.io/#website"
      },
      "about": {
        "@id": "https://mariochavez.io/#person"
      },
      "description": "Ruby on Rails architect and AI toolmaker from Colima, México. Creator of Rails MCP Server, former fintech CTO, and author of Aprendiendo Ruby on Rails. Exploring the convergence of Rails and AI.",
      "breadcrumb": {
        "@id": "https://mariochavez.io/#breadcrumb"
      },
    },
    {
      "@type": "BreadcrumbList",
      "@id": "https://mariochavez.io/#breadcrumb",
      "itemListElement": [
        {
          "@type": "ListItem",
          "position": 1,
          "name": "Inicio"
        }
      ]
    },
    {
      "@type": "Person",
      "@id": "https://mariochavez.io/#person",
      "name": "Mario Alberto Chávez",
      "image": {
        "@type": "ImageObject",
        "@id": "https://mariochavez.io/#personlogo",
        "inLanguage": "es-MX",
        "url": "https://mariochavez.io/images/mario_chavez.svg",
        "contentUrl": "https://mariochavez.io/images/mario_chavez.svg",
        "caption": "Mario Alberto Chávez"
      },
      "description": "I'm Mario Alberto, a software engineer and entrepreneur based in Colima, México. I'm the creator of Rails MCP Server and former CTO/co-founder of Aoorora, where I architected a core banking platform in Ruby on Rails that enabled lending startups to build on modern, secure infrastructure. I spend my time at the intersection of Ruby on Rails and AI—building tools that help developers work smarter. When I'm not writing code, I'm documenting territory, popular culture, and memory through photography.",
      "sameAs": [
        "https://github.com/mariochavez",
        "https://x.com/mario_chavez",
        "https://linkedin.com/in/mariochavez",
        "https://instagram.com/mario_chavez"
      ]
    }
  ]
}

</script>

  </head>

  <body class="flex h-full flex-col bg-zinc-50 font-manrope dark:bg-black">
    <!-- Outer Frame for the "Card" look on large screens -->
    <div class="fixed inset-0 flex justify-center sm:px-8">
      <div class="flex w-full max-w-7xl lg:px-8">
        <div
          class="
            w-full bg-white ring-1 ring-zinc-100 dark:bg-zinc-900 dark:ring-zinc-300/20
          "
        ></div>
      </div>
    </div>

    <div class="relative flex w-full flex-col">
      <!-- Header / Navigation -->
<header
  data-controller="menu"
  data-menu-open-value=false
  class="pointer-events-none relative z-50 flex flex-none flex-col"
>
  <div class="top-0 z-10 h-16 pt-6">
    <div class="sm:px-8 w-full max-w-7xl mx-auto lg:px-8">
      <div class="relative px-4 sm:px-8 lg:px-12">
        <div class="mx-auto max-w-2xl lg:max-w-5xl">
          <div class="relative flex gap-4">
            <!-- Logo / Avatar -->
            <div class="flex flex-1 pointer-events-auto">
              <a
                href="/"
                class="
                  h-10 w-10 rounded-full bg-white/90 p-0.5 shadow-lg shadow-zinc-800/5 ring-1
                  ring-zinc-900/5 backdrop-blur dark:bg-zinc-800/90 dark:ring-white/10
                "
              >
                <img
                  src="/images/mario.jpg"
                  alt="Mario Alberto Chávez"
                  class="
                    h-9 w-9 rounded-full bg-zinc-100 object-cover
                    dark:bg-zinc-800
                  "
                >
              </a>
            </div>

            <!-- Desktop Nav -->
            <div class="hidden md:flex flex-1 justify-center pointer-events-auto">
              <nav
                class="
                  flex rounded-full bg-white/90 px-3 text-sm font-medium text-zinc-800 shadow-lg
                  shadow-zinc-800/5 ring-1 ring-zinc-900/5 backdrop-blur dark:bg-zinc-800/90
                  dark:text-zinc-200 dark:ring-white/10
                "
              >
               
                  <a
                      href="/about"
                    class="
                      relative block px-3 py-2 transition hover:text-emerald-500
                      dark:hover:text-emerald-400
                    "
                  >
                  About
                  </a>
                
                  <a
                      href="/articles"
                    class="
                      relative block px-3 py-2 transition hover:text-emerald-500
                      dark:hover:text-emerald-400
                    "
                  >
                  Articles
                  </a>
                
                  <a
                      href="/projects"
                    class="
                      relative block px-3 py-2 transition hover:text-emerald-500
                      dark:hover:text-emerald-400
                    "
                  >
                  Projects
                  </a>
                
              </nav>
            </div>

            <!-- Mobile Menu Button & Theme Toggle -->
            <div class="flex flex-1 justify-end gap-4 pointer-events-auto">
              <!-- Mobile Menu Button -->
              <div class="pointer-events-auto md:hidden">
                <button
                  data-action="menu#toggle"
                  class="
                    group flex items-center rounded-full bg-white/90 px-4 py-2 text-sm font-medium
                    text-zinc-800 shadow-lg shadow-zinc-800/5 ring-1 ring-zinc-900/5 backdrop-blur
                    dark:bg-zinc-800/90 dark:text-zinc-200 dark:ring-white/10
                    dark:hover:ring-white/20
                  "
                >
                  Menu
                  <i
                    class="
                      ml-3 h-auto w-2 [&_svg]:size-3 stroke-zinc-500 group-hover:stroke-zinc-700
                      dark:group-hover:stroke-zinc-400
                    "
                    
                  ><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m6 9 6 6 6-6"/></svg>
</i>
                </button>
              </div>

              <div 
                data-menu-target="overlay"
                data-action="click->menu#toggle"
                class="
                  data-[open=false]:hidden fixed inset-0 z-50 bg-zinc-800/40 backdrop-blur-xs duration-150 
                  opacity-100 data-[open=false]:opacity-0 ease-in dark:bg-black/80
                " 
                aria-hidden="true" 
                data-open="false">
              </div>

              <!-- Theme Toggle (Visual Only) -->
              <button
                  data-controller="theme"
                  data-theme-dark-value
                  data-action="theme#toggle"
                  class="
                    group rounded-full bg-white/90 px-3 py-2 shadow-lg ring-1 shadow-zinc-800/5 ring-zinc-900/5 
                    backdrop-blur-sm transition dark:bg-zinc-800/90 dark:ring-white/10 dark:hover:ring-white/20
                  "
              >
                <i
                  data-theme-target="light"
                  class="
                    [&_svg]:size-5 text-zinc-500 transition group-hover:fill-zinc-200
                    group-hover:text-zinc-700 dark:hidden
                  "
                  ><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="4"/><path d="M12 2v2"/><path d="M12 20v2"/><path d="m4.93 4.93 1.41 1.41"/><path d="m17.66 17.66 1.41 1.41"/><path d="M2 12h2"/><path d="M20 12h2"/><path d="m6.34 17.66-1.41 1.41"/><path d="m19.07 4.93-1.41 1.41"/></svg>
</i>

                <i
                  data-theme-target="dark"
                  class="
                    hidden [&_svg]:size-5 text-emerald-700 transition dark:block
                    dark:group-hover:text-emerald-400
                  "
                  ><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401"/></svg>
</i>
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Mobile Menu Dropdown -->
  <div
    data-menu-target="menu"
    data-open="false"
    class="
      data-[open=false]:hidden opacity-100 data-[open=false]:opacity-0 data-[open=false]:scale-95 
      fixed inset-x-0 top-0 z-50 origin-top rounded-b-2xl bg-zinc-50 px-6 pb-6 pt-24
      shadow-2xl shadow-zinc-900/20 ring-1 ring-zinc-900/5 dark:bg-zinc-900 transition-all ease-out
      dark:ring-zinc-800 pointer-events-auto md:hidden duration-150
    "
  >
    <div class="flex flex-col space-y-4">
      <div class="flex flex-row-reverse items-center justify-between">
        <button 
           data-action="menu#toggle"
           aria-label="Close menu" 
           class="-m-1 p-1 [&_svg]:size-6 text-zinc-500 dark:text-zinc-400" 
           type="button">
          <svg viewBox="0 0 24 24" aria-hidden="true"><path d="m17.25 6.75-10.5 10.5M6.75 6.75l10.5 10.5" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg>
 
        </button>
        <h2 class="text-sm font-medium text-zinc-600 dark:text-zinc-400">Navigation</h2>
      </div>
      
        <a
            href="/about"
          class="block text-base font-semibold text-zinc-800 dark:text-zinc-100"
        >
          About
        </a>
      
        <a
            href="/articles"
          class="block text-base font-semibold text-zinc-800 dark:text-zinc-100"
        >
          Articles
        </a>
      
        <a
            href="/projects"
          class="block text-base font-semibold text-zinc-800 dark:text-zinc-100"
        >
          Projects
        </a>
      
    </div>
  </div>
</header>


      <main class="flex-auto pointer-events-auto">
  <div class="mt-16 sm:px-8 sm:mt-32">
    <div class="mx-auto w-full max-w-7xl lg:px-8">
      <div class="relative px-4 sm:px-8 lg:px-12">
        <div class="mx-auto max-w-2xl lg:max-w-5xl">
          <div class="xl:relative">
            <div class="mx-auto max-w-2xl">
              <!-- Back Button -->
              <a
                href="/articles"
                aria-label="Go back to articles"
                class="
                  group mb-8 flex h-10 w-10 items-center justify-center rounded-full bg-white
                  shadow-md shadow-zinc-800/5 ring-1 ring-zinc-900/5 transition dark:border
                  dark:border-zinc-700/50 dark:bg-zinc-800 dark:ring-0 dark:ring-white/10
                  dark:hover:border-zinc-700 dark:hover:ring-white/20 lg:absolute lg:-left-5
                  lg:-mt-2 lg:mb-0 xl:-top-1.5 xl:left-0 xl:mt-0
                "
              >
                <i
                  class="
                    [&_svg]:size-4 text-zinc-500 transition group-hover:text-zinc-700
                    dark:text-zinc-400 dark:group-hover:text-zinc-300
                  "
                  ><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m12 19-7-7 7-7"/><path d="M19 12H5"/></svg>
</i>
              </a>

              <article>
                <header class="flex flex-col">
                  <time
                      datetime="2020-06-04 00:00:00 -0600"
                    class="
                      order-first flex items-center text-base text-zinc-400
                      dark:text-zinc-500
                    "
                  >
                    <span class="h-4 w-0.5 rounded-full bg-zinc-200 dark:bg-zinc-500"></span>
                    <span class="ml-3">June 04, 2020</span>
                  </time>

                  <h1
                    class="
                      mt-6 text-4xl font-bold tracking-tight text-emerald-700 dark:text-emerald-100
                      sm:text-5xl
                    "
                  >
                  Escribiendo un cliente Rest que haga cache de la solicitudes
                  </h1>

                  <h3 class="text-2xl text-zinc-600 font-light tracking-tight mt-6 dark:text-zinc-100 sm:text-3xl">El desarrollar y mantener un API REST requiere de conocer el estándar de HTTP para tratar de obtener el mejor provecho y ofrecer mejores APIs para los clientes. Como parte del trabajo de mantener un API REST también incluye el asegurarse que los clientes hagan uso efectivo de las facilidades del API.</h3>
                </header>

                <!-- Article Content -->
                <div class="mt-8 prose prose-zinc dark:prose-invert">
                  <p>Hace algunos meses escribí el post “<a href="https://mariochavez.io/desarrollo/2019/12/30/lecciones-construyendo-un-api-rest.html" target="_blank">Lecciones construyendo un API REST</a> “ donde hablo sobre lo aprendido e implementado en la construcción de un API REST para <a href="https://creditar.io" target="_blank">Creditar.io</a> , el producto plataforma Fintech que mi equipo construyó.</p>

<p>Todas las lecciones ahí descritas aplican para cuando estamos desarrollando la parte del servidor o Backend pero deja fuera al cliente que se encarga de consumir ese API.</p>

<p>En este post voy precisamente a tocar el tema del cliente pero antes vamos a enfocarnos en un par de encabezados de HTTP que van a ayudar a que el cliente sea más efectivo.</p>

<h2 id="get-condicional">GET Condicional</h2>

<p>En el estándar de HTTP existen dos encabezados que pueden ayudar a los servidores a decidir si envían respuesta a una petición con el estatus 200 o si no envían respuesta con el status 304. Esos dos encabezados son <code class="highlighter-rouge">ETag</code> y <code class="highlighter-rouge">Last-Modified</code>.</p>

<p>En una aplicación de API de Rail cuando hacemos una petición como la siguiente</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>curl <span class="nt">-I</span> <span class="o">[</span>http://localhost:3000/books]<span class="o">(</span>http://localhost:3000/books<span class="o">)</span> <span class="nt">-H</span> <span class="s1">'Accept: application/json'</span>
</code></pre></div></div>

<p>El servidor responde con el contenido <em>JSON</em> de la petición pero además en los encabezados envía el valor de <code class="highlighter-rouge">ETag</code>.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>HTTP/1.1 200 OK
X-Frame-Options: SAMEORIGIN
X-XSS-Protection: 1<span class="p">;</span> <span class="nv">mode</span><span class="o">=</span>block
X-Content-Type-Options: nosniff
X-Download-Options: noopen
X-Permitted-Cross-Domain-Policies: none
Referrer-Policy: strict-origin-when-cross-origin
Content-Type: application/json<span class="p">;</span> <span class="nv">charset</span><span class="o">=</span>utf-8
ETag: W/<span class="s2">"c648786499da3bb30fa94437fd64399e"</span>
Cache-Control: max-age<span class="o">=</span>0, private, must-revalidate
X-Request-Id: bd9aca1f-42ea-43da-a113-cbbf80fbf727
X-Runtime: 0.185222
</code></pre></div></div>

<p><code class="highlighter-rouge">ETag</code> es una valor que Rails calcula para nuestra petición y que en teoría si la respuesta a la misma petición no cambia el valor de <code class="highlighter-rouge">Etag</code> se mantendría constante ya que se calcula sobre la respuesta.</p>

<p>Usando el valor de <code class="highlighter-rouge">ETag</code> en nuestra peticiones podemos lograr algo llamado <strong>Get Condicional</strong> para agilizar la respuesta desde el servidor. Rails nos ofrece el método <code class="highlighter-rouge">#stale?</code> precisamente para tomar ventaja de este encabezado.</p>

<p>Veamos un ejemplo de cómo utilizar <code class="highlighter-rouge">#stale?</code> en un controlador.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>def index
    @books = Book.all

    if stale?(@books)
      respond_to do |format|
        format.html { render :index }
        format.json { render json: @books }
      end
    end
  end
</code></pre></div></div>

<p>Aquí vemos que nuestro controlador ejecuta el <em>query</em> para obtener los datos que requerimos pero en lugar de pasarlos directamente para que sean serializados y enviados al cliente que hizo la petición los pasamos como parámetro a <code class="highlighter-rouge">#stale?</code> y el código que serializa y envía la respuesta lo ponemos dentro de un <code class="highlighter-rouge">if</code>.</p>

<p>En este punto si hacemos la misma llamada que hicimos anteriormente vemos que los encabezados cambian un poco.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>curl <span class="nt">-I</span> <span class="o">[</span>http://localhost:3000/books]<span class="o">(</span>http://localhost:3000/books<span class="o">)</span> <span class="nt">-H</span> <span class="s1">'Accept: application/json'</span>

HTTP/1.1 200 OK
X-Frame-Options: SAMEORIGIN
X-XSS-Protection: 1<span class="p">;</span> <span class="nv">mode</span><span class="o">=</span>block
X-Content-Type-Options: nosniff
X-Download-Options: noopen
X-Permitted-Cross-Domain-Policies: none
Referrer-Policy: strict-origin-when-cross-origin
ETag: W/<span class="s2">"180329663bde620b442e03d9010ce297"</span>
Last-Modified: Wed, 29 Apr 2020 18:03:17 GMT
Content-Type: application/json<span class="p">;</span> <span class="nv">charset</span><span class="o">=</span>utf-8
Cache-Control: max-age<span class="o">=</span>0, private, must-revalidate
X-Request-Id: 482a861c-c30c-49e8-bd27-ebb07023a702
X-Runtime: 0.092157
</code></pre></div></div>

<p>Primeramente vemos que el valor de <code class="highlighter-rouge">ETag</code> cambió. Este valor está calculado en base al resultado del <em>query</em> <code class="highlighter-rouge">@books = Book.all</code> y siempre que el <em>query</em> regrese los mismos registros ese valor va a ser exactamente igual. Además, vemos que ahora el servidor nos envía el encabezado <code class="highlighter-rouge">Last-Modified</code> el cual tiene una fecha que corresponde al atributo <code class="highlighter-rouge">#modified_at</code> de los registros del query, en este caso toma el valor del registro modificado más recientemente.</p>

<p>De la llamada anterior Rails nos ofrece la siguientes estadísticas.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Completed 200 OK <span class="k">in </span>26ms <span class="o">(</span>Views: 10.1ms | ActiveRecord: 1.4ms | Allocations: 10915<span class="o">)</span>
</code></pre></div></div>

<p>Si volvemos a realizar la llamada al API pero ahora incluimos los valores de los encabezados <code class="highlighter-rouge">ETag</code> y <code class="highlighter-rouge">Last-Modified</code> de la siguiente forma. <code class="highlighter-rouge">If-None-Match</code> con el valor de <code class="highlighter-rouge">ETag</code> y <code class="highlighter-rouge">If-Modified-Since</code> para <code class="highlighter-rouge">Last-Modified</code>.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>curl <span class="nt">-I</span> <span class="o">[</span>http://localhost:3000/books]<span class="o">(</span>http://localhost:3000/books<span class="o">)</span> <span class="nt">-H</span> <span class="s1">'Accept: application/json'</span> <span class="nt">-H</span> <span class="s1">'If-None-Match: W/"180329663bde620b442e03d9010ce297"'</span> <span class="nt">-H</span> <span class="s1">'If-Modified-Since: Wed, 29 Apr 2020 18:03:17 GMT'</span>
</code></pre></div></div>

<p>Rails va ejecutar el <em>query</em>  pero el método <code class="highlighter-rouge">#stale?</code> va a calcular el <code class="highlighter-rouge">ETag</code> y <code class="highlighter-rouge">Last-Modified</code> para los registros del <em>query</em> para luego compararlos con los valores que recibimos en los encabezados de la petición. En el caso de ser los mismos Rails ya no ejecuta el resto del código - el código dentro del <code class="highlighter-rouge">if</code> - y regresa una respuesta vacía con el estatus <em>304 Not modified</em>. Esto le indica al cliente que el resultado de la petición no ha cambiado con respecto a la petición previa.</p>

<p>Ahora Rails nos ofrece las siguientes estadísticas.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Completed 304 Not Modified <span class="k">in </span>4ms <span class="o">(</span>ActiveRecord: 0.4ms | Allocations: 1667<span class="o">)</span>
</code></pre></div></div>

<p>Automáticamente la respuesta del servidor fue más eficiente. Ejecutó menos código, utilizó menos memoria y envió menos datos a través de la red. A esto se le conoce como <strong>GET condicional</strong>.</p>

<p>En <a href="https://creditar.io" target="_blank">Creditar.io</a>  recientemente hicimos este ajuste en el API para utilizar <code class="highlighter-rouge">#stale?</code> y dar la oportunidad de realizar <strong>GET Condicional</strong>. El cambio en el código fue bastante trivial.</p>

<p>Ahora los clientes que consumen ese API tienen la oportunidad de recibir menos datos a través de la red y hacer que las peticiones sean más rápidas. Para quienes utilizan la gema de <a href="https://creditar.io" target="_blank">Creditar.io</a>  en su versión más reciente pueden tener ese beneficio simplemente habilitando el cache de Rails.</p>

<h2 id="escribiendo-mi-propio-cliente">Escribiendo mi propio cliente</h2>

<p>Ahora que conocemos que un <strong>GET Condicional</strong> y que vimos como implementarlo en Rails vamos a escribir un cliente de REST sencillo que nos permita tomar ventaja de los encabezados <code class="highlighter-rouge">ETag</code> y <code class="highlighter-rouge">Last-Modified</code>.</p>

<p>Como librería de HTTP en Ruby vamos a hacer uso de <a href="https://gitlab.com/honeyryderchuck/httpx" target="_blank">HTTPX</a>  aunque no vamos a explotar toda la funcionalidad de la misma este post puede ser un inicio para que si están interesados experimenten con la funcionalidad de HTTP2 o el mulit-request con una sola conexión en HTTP1 entre otras cosas.</p>

<p>El cliente que vamos a escribir es bastante simple y sólo cubre un par de recursos en el API de <a href="https://creditar.io" target="_blank">Creditar.io</a> ; el <em>endpoint</em> para obtener un cliente y el <em>endpoint</em> para leer una solicitud.</p>

<p>El código del cliente es el siguiente.</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">ApiClient</span>
  <span class="k">def</span> <span class="nc">self</span><span class="o">.</span><span class="nf">fetch_customer</span><span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="ss">use_cache: </span><span class="kp">true</span><span class="p">)</span>
    <span class="n">new</span><span class="p">(</span><span class="s2">"https://</span><span class="si">#{</span><span class="no">Rails</span><span class="p">.</span><span class="nf">application</span><span class="p">.</span><span class="nf">credentials</span><span class="p">.</span><span class="nf">creditario</span><span class="p">[</span><span class="ss">:host</span><span class="p">]</span><span class="si">}</span><span class="s2">/customers/</span><span class="si">#{</span><span class="nb">id</span><span class="si">}</span><span class="s2">"</span><span class="p">,</span> <span class="ss">method: :get</span><span class="p">,</span> <span class="ss">use_cache: </span><span class="n">use_cache</span><span class="p">).</span><span class="nf">execute</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nc">self</span><span class="o">.</span><span class="nf">fetch_application</span><span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="ss">use_cache: </span><span class="kp">true</span><span class="p">)</span>
    <span class="n">new</span><span class="p">(</span><span class="s2">"https://</span><span class="si">#{</span><span class="no">Rails</span><span class="p">.</span><span class="nf">application</span><span class="p">.</span><span class="nf">credentials</span><span class="p">.</span><span class="nf">creditario</span><span class="p">[</span><span class="ss">:host</span><span class="p">]</span><span class="si">}</span><span class="s2">/applications/</span><span class="si">#{</span><span class="nb">id</span><span class="si">}</span><span class="s2">?include=attachments"</span><span class="p">,</span> <span class="ss">method: :get</span><span class="p">,</span> <span class="ss">use_cache: </span><span class="n">use_cache</span><span class="p">).</span><span class="nf">execute</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="ss">method: :get</span><span class="p">,</span> <span class="ss">use_cache: </span><span class="kp">true</span><span class="p">)</span>
    <span class="vi">@url</span> <span class="o">=</span> <span class="n">url</span>
    <span class="vi">@method</span> <span class="o">=</span> <span class="nb">method</span>
    <span class="vi">@use_cache</span> <span class="o">=</span> <span class="n">use_cache</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">execute</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="vi">@use_cache</span> <span class="p">?</span> <span class="n">cache_read_url</span><span class="p">(</span><span class="vi">@url</span><span class="p">).</span><span class="nf">dig</span><span class="p">(</span><span class="ss">:payload</span><span class="p">)</span> <span class="p">:</span> <span class="s2">""</span>
    <span class="n">httpx</span> <span class="o">=</span> <span class="n">build_request</span><span class="p">(</span><span class="vi">@url</span><span class="p">)</span>

    <span class="k">case</span> <span class="vi">@method</span>
    <span class="k">when</span> <span class="ss">:get</span> <span class="k">then</span> <span class="n">execute_get</span><span class="p">(</span><span class="n">httpx</span><span class="p">,</span> <span class="vi">@url</span><span class="p">,</span> <span class="n">payload</span><span class="p">)</span>
    <span class="k">end</span>
  <span class="k">end</span>

  <span class="kp">private</span>

  <span class="k">def</span> <span class="nf">cache_read_url</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
    <span class="vi">@cached_response</span> <span class="o">||=</span> <span class="no">Rails</span><span class="p">.</span><span class="nf">cache</span><span class="p">.</span><span class="nf">read</span><span class="p">(</span><span class="n">url</span><span class="p">)</span> <span class="o">||</span> <span class="p">{}</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">cache_write_response</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="n">url</span><span class="p">)</span>
    <span class="no">Rails</span><span class="p">.</span><span class="nf">cache</span><span class="p">.</span><span class="nf">write</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="p">{</span>
      <span class="ss">payload: </span><span class="n">response</span><span class="p">.</span><span class="nf">body</span><span class="p">.</span><span class="nf">read</span><span class="p">,</span>
      <span class="ss">etag: </span><span class="n">response</span><span class="p">.</span><span class="nf">headers</span><span class="p">[</span><span class="s2">"ETag"</span><span class="p">],</span>
      <span class="ss">modified_since: </span><span class="n">response</span><span class="p">.</span><span class="nf">headers</span><span class="p">[</span><span class="s2">"Last-Modified"</span><span class="p">]</span>
    <span class="p">})</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">execute_get</span><span class="p">(</span><span class="n">httpx</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">response</span><span class="p">)</span>
    <span class="n">new_response</span> <span class="o">=</span> <span class="n">httpx</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">new_response</span><span class="p">.</span><span class="nf">status</span> <span class="o">==</span> <span class="mi">200</span>
      <span class="n">cache_write_response</span><span class="p">(</span><span class="n">new_response</span><span class="p">,</span> <span class="n">url</span><span class="p">)</span> <span class="k">if</span> <span class="vi">@use_cache</span>
      <span class="no">JSON</span><span class="p">.</span><span class="nf">parse</span><span class="p">(</span><span class="n">new_response</span><span class="p">.</span><span class="nf">body</span><span class="p">.</span><span class="nf">read</span><span class="p">)</span>
    <span class="k">elsif</span> <span class="n">new_response</span><span class="p">.</span><span class="nf">status</span> <span class="o">==</span> <span class="mi">304</span>
      <span class="no">JSON</span><span class="p">.</span><span class="nf">parse</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
    <span class="k">end</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">build_request</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
    <span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
      <span class="s2">"Accept"</span> <span class="o">=&gt;</span> <span class="s2">"application/vnd.creditar.v1+json"</span><span class="p">,</span>
      <span class="s2">"Content-Type"</span> <span class="o">=&gt;</span> <span class="s2">"application/json"</span><span class="p">,</span>
      <span class="s2">"Application-Context"</span> <span class="o">=&gt;</span> <span class="s2">"sandbox"</span><span class="p">,</span>
      <span class="s2">"Authorization"</span> <span class="o">=&gt;</span> <span class="s2">"Token token=</span><span class="si">#{</span><span class="no">Rails</span><span class="p">.</span><span class="nf">application</span><span class="p">.</span><span class="nf">credentials</span><span class="p">.</span><span class="nf">creditario</span><span class="p">[</span><span class="ss">:api_key</span><span class="p">]</span><span class="si">}</span><span class="s2">"</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="vi">@use_cache</span>
      <span class="n">etag</span> <span class="o">=</span> <span class="n">cache_read_url</span><span class="p">(</span><span class="n">url</span><span class="p">).</span><span class="nf">dig</span><span class="p">(</span><span class="ss">:etag</span><span class="p">)</span>
      <span class="n">modified_since</span> <span class="o">=</span> <span class="n">cache_read_url</span><span class="p">(</span><span class="n">url</span><span class="p">).</span><span class="nf">dig</span><span class="p">(</span><span class="ss">:modified_since</span><span class="p">)</span>

      <span class="n">headers</span><span class="p">[</span><span class="s2">"If-None-Match"</span><span class="p">]</span> <span class="o">=</span> <span class="n">etag</span> <span class="k">if</span> <span class="n">etag</span><span class="p">.</span><span class="nf">present?</span>
      <span class="n">headers</span><span class="p">[</span><span class="s2">"If-Modified-Since"</span><span class="p">]</span> <span class="o">=</span> <span class="n">modified_since</span> <span class="k">if</span> <span class="n">modified_since</span><span class="p">.</span><span class="nf">present?</span>
    <span class="k">end</span>

    <span class="no">HTTPX</span><span class="p">.</span><span class="nf">with_headers</span><span class="p">(</span><span class="n">headers</span><span class="p">)</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div></div>

<p>Los métodos <code class="highlighter-rouge">#fetch_customer</code> y <code class="highlighter-rouge">#fetch_application</code> están a nivel de clase. Estos reciben dos parámetros: id del recursos y opcionalmente si queremos utilizar el cache o no. Ambos al ejecutarse crean una instancia de la clase <code class="highlighter-rouge">ApiClient</code> para posteriormente ejecutar la llamada con la URL al recurso que construyó cada método.</p>

<p>Antes de realizar la llamada configura los encabezados HTTP que van a ser enviados al servidor. Hay algunos que son base y estan <code class="highlighter-rouge">ETag</code> y <code class="highlighter-rouge">Last-Modified</code> que van a ser enviados únicamente si se cumplen dos condiciones:</p>

<ul>
  <li>La opción de utilizar cache es verdadera</li>
  <li>Tenemos en cache para esa URL una copia de esos encabezados de alguna llamada previa</li>
</ul>

<p>Para el cache, en este caso, estamos utilizando el cache configurado con Rails. En el cache utilizamos la URL completa con parámetros como llave y como valor guardamos una estructura similar a la siguiente:</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="err">etag:</span><span class="w"> </span><span class="s2">"W</span><span class="se">\4</span><span class="s2">84848484"</span><span class="p">,</span><span class="w">
  </span><span class="err">modified-since:</span><span class="w"> </span><span class="s2">"Wed, 25 March 2020"</span><span class="p">,</span><span class="w">
  </span><span class="err">payload:</span><span class="w"> </span><span class="s2">"{...}"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p>Al realizar la llamada verificamos el estatus de respuesta. Si es 200 quiere decir que el servidor nos envió una nueva copia de la información, ya sea porque no enviamos los encabezados <code class="highlighter-rouge">ETag</code> y <code class="highlighter-rouge">Last-Modified</code> o bien, los enviamos pero hubo nueva información en el servidor.</p>

<p>Si estamos utilizando cache guardamos los encabezados y una copia de los datos para llamadas posteriores y retornamos el resultado de la llamada.</p>

<p>En caso de que el estatus de la respuesta haya sido 304, quiere decir que enviamos los encabezados <code class="highlighter-rouge">ETag</code> y <code class="highlighter-rouge">Last-Modified</code> y que el servidor no encontró información nueva, por lo tanto solo nos regresa el estatus 304 sin datos. En este punto extraemos la copia de los datos que tenemos en el cache y eso es lo que retornamos como resultado de la llamada.</p>

<p>Técnicamente para quien utilice nuestro cliente REST va a ser totalmente transparente si los datos vienen desde el servidor o desde el cache local. Sin embargo el hacer uso del cache trae resultados positivos para el servidor del API ya que como vimos en el ejemplo con Rails se consume menos memoria y el servidor responde a las solicitudes más rápidamente.</p>

<p>Del lado del cliente también es posible percibir mejoras en los tiempos de respuesta, aunque estás siempre van a estar ligadas con el tiempo de internet y la latencia de la red.</p>

<p>Para poder comprobar los beneficios del lado del cliente se programó un par de pruebas con la librería <a href="https://github.com/evanphx/benchmark-ips" target="_blank">Benchmark-ips</a>  para que nos ayude a evaluar si hay beneficios o no de utilizar el <strong>GET Condicional</strong> y el cache en el cliente.</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">require</span> <span class="s2">"benchmark/ips"</span>

<span class="no">Benchmark</span><span class="p">.</span><span class="nf">ips</span> <span class="k">do</span> <span class="o">|</span><span class="n">api</span><span class="o">|</span>
  <span class="no">Rails</span><span class="p">.</span><span class="nf">cache</span><span class="p">.</span><span class="nf">clear</span>
  <span class="n">api</span><span class="p">.</span><span class="nf">report</span><span class="p">(</span><span class="s2">"no-cache-customer"</span><span class="p">)</span> <span class="p">{</span> <span class="no">ApiClient</span><span class="p">.</span><span class="nf">fetch_customer</span><span class="p">(</span><span class="s2">"9e2b06d3-f2d5-44b7-b48d-36ea0dfa0187"</span><span class="p">,</span> <span class="ss">use_cache: </span><span class="kp">false</span><span class="p">)</span> <span class="p">}</span>

  <span class="no">Rails</span><span class="p">.</span><span class="nf">cache</span><span class="p">.</span><span class="nf">clear</span>
  <span class="n">api</span><span class="p">.</span><span class="nf">report</span><span class="p">(</span><span class="s2">"cache-customer"</span><span class="p">)</span> <span class="p">{</span> <span class="no">ApiClient</span><span class="p">.</span><span class="nf">fetch_customer</span><span class="p">(</span><span class="s2">"9e2b06d3-f2d5-44b7-b48d-36ea0dfa0187"</span><span class="p">)</span> <span class="p">}</span>

  <span class="n">api</span><span class="p">.</span><span class="nf">compare!</span>
<span class="k">end</span>

<span class="no">Benchmark</span><span class="p">.</span><span class="nf">ips</span> <span class="k">do</span> <span class="o">|</span><span class="n">api</span><span class="o">|</span>
  <span class="no">Rails</span><span class="p">.</span><span class="nf">cache</span><span class="p">.</span><span class="nf">clear</span>
  <span class="n">api</span><span class="p">.</span><span class="nf">report</span><span class="p">(</span><span class="s2">"no-cache-application"</span><span class="p">)</span> <span class="p">{</span> <span class="no">ApiClient</span><span class="p">.</span><span class="nf">fetch_application</span><span class="p">(</span><span class="s2">"6d3b26bf-3ab0-4716-aa91-2bb5139ef78a"</span><span class="p">,</span> <span class="ss">use_cache: </span><span class="kp">false</span><span class="p">)</span> <span class="p">}</span>

  <span class="no">Rails</span><span class="p">.</span><span class="nf">cache</span><span class="p">.</span><span class="nf">clear</span>
  <span class="n">api</span><span class="p">.</span><span class="nf">report</span><span class="p">(</span><span class="s2">"cache-application"</span><span class="p">)</span> <span class="p">{</span> <span class="no">ApiClient</span><span class="p">.</span><span class="nf">fetch_application</span><span class="p">(</span><span class="s2">"6d3b26bf-3ab0-4716-aa91-2bb5139ef78a"</span><span class="p">)</span> <span class="p">}</span>

  <span class="n">api</span><span class="p">.</span><span class="nf">compare!</span>
<span class="k">end</span>
</code></pre></div></div>

<p>Con Benchmark-ips probamos la llamada para obtener un cliente sin cache y con cache y hacemos lo mismo para obtener una solicitud. En ambos casos Benchmark-ips hace un calentamiento con 2 llamadas y posteriormente ejecuta 5 veces cada llamada.</p>

<p>Los resultados son los siguientes.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Warming up <span class="nt">------------------------------------</span>—
no-cache-customer     1.000  i/100ms
   cache-customer     1.000  i/100ms
Calculating <span class="nt">-------------------------------------</span>
   no-cache-customer      3.165  <span class="o">(</span>± 0.0%<span class="o">)</span> i/s -     16.000  <span class="k">in   </span>5.063248s
      cache-customer      3.265  <span class="o">(</span>± 0.0%<span class="o">)</span> i/s -     17.000  <span class="k">in   </span>5.228465s

Comparison:
      cache-customer:        3.3 i/s
   no-cache-customer:        3.2 i/s - 1.03x  <span class="o">(</span>± 0.00<span class="o">)</span> slower

<span class="o">=&gt;</span> <span class="c">#&lt;Benchmark::IPS::Report:0x00007f9cbf9f6c90 @entries=[#&lt;Benchmark::IPS::Report::Entry:0x00007f9cc02f0378 @label="no-cache-customer", @microseconds=5063248.0, @iterations=16, @stats=#&lt;Benchmark::IPS::Stats::SD:0x00007f9cc02f0490 @samples=[3.233452001021771, 3.306823630561664, 3.254699786491694, 3.1271401365309384, 3.2323650245174886, 2.835029626059592, 3.053323237011163, 3.2682622322884702, 3.0658294908270385, 3.0752860784874514, 3.157123733993383, 3.201413744309487, 3.342190137196905, 3.062702712635793, 3.1983419795178176, 3.224454261116306], @mean=3.1649023632854356, @error=0&gt;, @measurement_cycle=1, @show_total_time=true&gt;, #&lt;Benchmark::IPS::Report::Entry:0x00007f9cc508d2e8 @label="cache-customer", @microseconds=5228465.0, @iterations=17, @stats=#&lt;Benchmark::IPS::Stats::SD:0x00007f9cc508d360 @samples=[3.1828178759783188, 3.427897601842838, 2.948452210012354, 3.2978811113859345, 3.2421742020198745, 3.4091412714051454, 3.0942700307570443, 3.3882225384563256, 3.5391339739165826, 3.3277648734451017, 3.4406352788978958, 3.2761320674359022, 3.249696965757943, 2.672910585795084, 3.3074251695055397, 3.253471454041462, 3.4531817616752076], @mean=3.265365233666386, @error=0&gt;, @measurement_cycle=1, @show_total_time=true&gt;], @data=nil&gt;</span>
</code></pre></div></div>

<p>Para el caso de obtener la información de un cliente desde el API con el cache y sin el cache el resultado es muy similar aunque sin cache sí es más lento.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Warming up <span class="nt">------------------------------------</span>—
no-cache-application     1.000  i/100ms
   cache-application     1.000  i/100ms
Calculating <span class="nt">-------------------------------------</span>
no-cache-application      1.315  <span class="o">(</span>± 0.0%<span class="o">)</span> i/s -      7.000  <span class="k">in   </span>6.031559s
   cache-application      3.071  <span class="o">(</span>±32.6%<span class="o">)</span> i/s -     15.000  <span class="k">in   </span>5.270988s

Comparison:
   cache-application:        3.1 i/s
no-cache-application:        1.3 i/s - 2.34x  <span class="o">(</span>± 0.00<span class="o">)</span> slower

<span class="o">=&gt;</span> <span class="c">#&lt;Benchmark::IPS::Report:0x00007f9cc491aba0 @entries=[#&lt;Benchmark::IPS::Report::Entry:0x00007f9cc2b47498 @label="no-cache-application", @microseconds=6031559.0, @iterations=7, @stats=#&lt;Benchmark::IPS::Stats::SD:0x00007f9cc2b47560 @samples=[1.1724057884018586, 0.7877849221117047, 1.9610073302454003, 1.9321692657563574, 1.2268869828518008, 1.3782932594568147, 0.7456404268344059], @mean=1.3148839965226204, @error=0&gt;, @measurement_cycle=1, @show_total_time=true&gt;, #&lt;Benchmark::IPS::Report::Entry:0x00007f9cc50453a8 @label="cache-application", @microseconds=5270988.0, @iterations=15, @stats=#&lt;Benchmark::IPS::Stats::SD:0x00007f9cc5045448 @samples=[1.2400747517060329, 1.9133043531500642, 3.295946315626411, 3.2205081961933595, 3.466168462719625, 3.265476726947367, 3.2231135921923295, 3.3409841871218426, 3.440031648291164, 3.4534202674328656, 3.2150102398076137, 3.446742655853086, 3.1980964929673856, 3.175651643717291, 3.1777102690885055], @mean=3.071482653520996, @error=1&gt;, @measurement_cycle=1, @show_total_time=true&gt;], @data=nil&gt;</span>
</code></pre></div></div>

<p>Para el caso de obtener una solicitud la diferencia con cache y sin cache es más grande. Sin cache es 2.34 veces más lento que utilizar el cache.</p>

<p>Hay una gran diferencia entre los resultados de los dos recursos y de alguna forma era de esperarse. Los beneficios de realizar el <strong>GET Condicional</strong> y el cache del lado del cliente siempre van a depender de la complejidad de las acciones que realice el servidor del API para responder a las solicitudes. El utilizar esta técnica logra ejecutar menos código del lado del servidor y siempre el ejecutar no código va a ser más rápido que ejecutar código.</p>

<h2 id="final">Final</h2>

<p>El desarrollar y mantener un API REST requiere de conocer el estándar de HTTP para tratar de obtener el mejor provecho y ofrecer mejores APIs para los clientes. Como parte del trabajo de mantener un API REST también incluye el asegurarse que los clientes hagan uso efectivo de las facilidades del API.</p>

<p>Aunque los ejemplos aquí mostrados están relacionados con Rails y con un cliente con Ruby, el <strong>GET Condicional</strong> y el cache son técnicas agnósticas que pueden ser implementadas en otros lenguajes y frameworks de desarrollo.</p>

                </div>
              </article>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</main>


      <!-- Footer -->
<footer class="mt-32 flex-none">
  <div class="sm:px-8">
    <div class="mx-auto w-full max-w-7xl lg:px-8">
      <div class="border-t border-zinc-100 pb-16 pt-10 dark:border-zinc-700/40">
        <div class="relative px-4 sm:px-8 lg:px-12">
          <div class="mx-auto max-w-2xl lg:max-w-5xl">
            <div class="flex flex-col items-center justify-between gap-6 sm:flex-row">
              <div
                class="
                  flex flex-wrap justify-center gap-x-6 gap-y-1 text-sm font-medium text-zinc-800
                  dark:text-zinc-200
                "
              >
              
                <a
                    href="/about"
                  class="
                    transition hover:text-emerald-500
                    dark:hover:text-emerald-400
                  "
                >
                About
                </a>
              
                <a
                    href="/articles"
                  class="
                    transition hover:text-emerald-500
                    dark:hover:text-emerald-400
                  "
                >
                Articles
                </a>
              
                <a
                    href="/projects"
                  class="
                    transition hover:text-emerald-500
                    dark:hover:text-emerald-400
                  "
                >
                Projects
                </a>
              
              </div>

              <p class="text-sm text-zinc-400 dark:text-zinc-500">
              &copy; 2025 Mario Alberto Chávez. All rights reserved.
              </p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</footer>

    </div>
  </body>
</html>
