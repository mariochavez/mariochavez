<!doctype html>
<html lang="es">
  <head>
    <meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />

<!-- Begin Bridgetown SEO tag v6.0.0 -->
<title>Neovim y LunarVim para trabajar con Rails | Mario Alberto Chávez</title>
<meta property="og:title" content="Neovim y LunarVim para trabajar con Rails" />
<meta name="author" content="Mario Alberto Chávez" />
<meta property="og:locale" content="es_MX" />
<meta name="description" content="Cómo configurar Neovim y Lunarvim para trabajar con proyectos de Ruby on Rails" />
<meta property="og:description" content="Cómo configurar Neovim y Lunarvim para trabajar con proyectos de Ruby on Rails" />
<link rel="canonical" href="https://mariochavez.io/desarrollo/2022/08/05/neovim-lunarvim-rail/" />
<meta property="og:url" content="https://mariochavez.io/desarrollo/2022/08/05/neovim-lunarvim-rail/" />
<meta property="og:site_name" content="Mario Alberto Chávez" />
<meta property="og:image" content="https://mariochavez.io/images/neovim.jpg" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2022-08-05T06:00:00+00:00" />
<meta name="twitter:card" content="summary_large_image" />
<meta property="twitter:image" content="https://mariochavez.io/images/neovim.jpg" />
<meta property="twitter:title" content="Neovim y LunarVim para trabajar con Rails" />
<meta name="twitter:site" content="@mario_chavez" />
<meta name="twitter:creator" content="@Mario Alberto Chávez" />
<!-- End Bridgetown SEO tag -->


<link type="application/atom+xml" rel="alternate" href="https://mariochavez.io/feed.xml" title="Mario Alberto Chávez" />

<meta property="og:type" content="article">
<meta property="og:site_name" content="Mario Alberto Chávez - Software Development">
<meta name="twitter:card" content="summary_large_image">

<meta name="robots" content="index, follow">
<meta name="revisit-after" content="7 days">

<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/site.webmanifest">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="theme-color" content="#ffffff">

<link rel="stylesheet" href="/assets/index.R2SXEKOT.css" />
<script src="/assets/index.KUPNVLMR.js" defer></script>


<script type="application/ld+json">
  {
  "@context": "https://schema.org",
  "@graph": [
    {
      "@type": "WebSite",
      "@id": "https://mariochavez.io/#website",
      "url": "https://mariochavez.io/",
      "name": "Mario Alberto Chávez",
      "description": "Blog personal desarrollo de software",
      "publisher": {
        "@type": "Person",
        "@id": "https://mariochavez.io/#person",
        "name": "Mario Alberto Chávez"
      },
    },
    {
      "@type": "CollectionPage",
      "@id": "https://mariochavez.io/#webpage",
      "url": "https://mariochavez.io/",
      "name": "Inicio | Mario Alberto Chávez",
      "isPartOf": {
        "@id": "https://mariochavez.io/#website"
      },
      "about": {
        "@id": "https://mariochavez.io/#person"
      },
      "description": "Blog personal desarrollo de software por Mario Alberto Chávez",
      "breadcrumb": {
        "@id": "https://mariochavez.io/#breadcrumb"
      },
    },
    {
      "@type": "BreadcrumbList",
      "@id": "https://mariochavez.io/#breadcrumb",
      "itemListElement": [
        {
          "@type": "ListItem",
          "position": 1,
          "name": "Inicio"
        }
      ]
    },
    {
      "@type": "Person",
      "@id": "https://mariochavez.io/#person",
      "name": "Mario Alberto Chávez",
      "image": {
        "@type": "ImageObject",
        "@id": "https://mariochavez.io/#personlogo",
        "inLanguage": "es-MX",
        "url": "https://mariochavez.io/images/mario_chavez.svg",
        "contentUrl": "https://mariochavez.io/images/mario_chavez.svg",
        "caption": "Mario Alberto Chávez"
      },
      "description": "Mario Alberto Chávez lives in Colima México where he works on personal photography projects about territory, popular culture, and memory.",
      "sameAs": [
        "https://twitter.com/mario_chavez",
        "https://instagram.com/mario_chavez"
      ]
    }
  ]
}

</script>

  </head>
  <body class="min-h-screen antialiased post ">
    <section class="flex flex-nowrap">
      <aside class="sticky top-0 flex flex-col hidden w-64 max-h-screen min-h-screen bg-gray-100 xl:w-96 lg:block">
  <div class="px-8 xl:px-10">
    <header class="py-14">
      <h1 class="font-sans text-3xl font-medium tracking-widest text-gray-700 uppercase">Mario Alberto Chávez</h1>
      <h2 class="mt-4 font-serif text-lg italic tracking-wide text-gray-500 font-extralight">Blog personal desarrollo de software</h2>
    </header>

    <nav class="lg:flex-grow lg:py-14">
  <ul>
    <li class="pb-4 font-sans font-light tracking-wider text-gray-500 uppercase text-md hover:text-red-500"><a href="/">Inicio</a></li>
    <li class="pb-4 font-sans font-light tracking-wider text-gray-500 uppercase text-md hover:text-red-500"><a href="/desarrollo">Desarrollo</a></li>
    <li class="pb-4 font-sans font-light tracking-wider text-gray-500 uppercase text-md hover:text-red-500"><a href="/fotografía">Fotografía</a></li>
    <li class="pb-4 font-sans font-light tracking-wider text-gray-500 uppercase text-md hover:text-red-500"><a href="/proyectos">Proyectos</a></li>
    <li class="font-sans font-light tracking-wider text-gray-500 uppercase text-md hover:text-red-500"><a href="/acercade">Acerca de</a></li>
  </ul>
</nav>


    <footer class="py-8 lg:py-14">
  <div class="flex space-x-4">
    <a href="https://twitter.com/mario_chavez" target="_blank" class="text-gray-400 hover:text-red-500">
      <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" stroke="currentColor" viewBox="0 0 24 24" class="w-4 h-4"><path d="M24 4.557c-.883.392-1.832.656-2.828.775 1.017-.609 1.798-1.574 2.165-2.724-.951.564-2.005.974-3.127 1.195-.897-.957-2.178-1.555-3.594-1.555-3.179 0-5.515 2.966-4.797 6.045-4.091-.205-7.719-2.165-10.148-5.144-1.29 2.213-.669 5.108 1.523 6.574-.806-.026-1.566-.247-2.229-.616-.054 2.281 1.581 4.415 3.949 4.89-.693.188-1.452.232-2.224.084.626 1.956 2.444 3.379 4.6 3.419-2.07 1.623-4.678 2.348-7.29 2.04 2.179 1.397 4.768 2.212 7.548 2.212 9.142 0 14.307-7.721 13.995-14.646.962-.695 1.797-1.562 2.457-2.549z"/></svg>
    </a>
    <a href="https://instagram.com/mario_chavez" target="_blank" class="text-gray-400 hover:text-red-500">
      <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" stroke="none" viewBox="0 0 24 24" class="w-4 h-4"><path d="M15.233 5.488c-.843-.038-1.097-.046-3.233-.046s-2.389.008-3.232.046c-2.17.099-3.181 1.127-3.279 3.279-.039.844-.048 1.097-.048 3.233s.009 2.389.047 3.233c.099 2.148 1.106 3.18 3.279 3.279.843.038 1.097.047 3.233.047 2.137 0 2.39-.008 3.233-.046 2.17-.099 3.18-1.129 3.279-3.279.038-.844.046-1.097.046-3.233s-.008-2.389-.046-3.232c-.099-2.153-1.111-3.182-3.279-3.281zm-3.233 10.62c-2.269 0-4.108-1.839-4.108-4.108 0-2.269 1.84-4.108 4.108-4.108s4.108 1.839 4.108 4.108c0 2.269-1.839 4.108-4.108 4.108zm4.271-7.418c-.53 0-.96-.43-.96-.96s.43-.96.96-.96.96.43.96.96-.43.96-.96.96zm-1.604 3.31c0 1.473-1.194 2.667-2.667 2.667s-2.667-1.194-2.667-2.667c0-1.473 1.194-2.667 2.667-2.667s2.667 1.194 2.667 2.667zm4.333-12h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm.952 15.298c-.132 2.909-1.751 4.521-4.653 4.654-.854.039-1.126.048-3.299.048s-2.444-.009-3.298-.048c-2.908-.133-4.52-1.748-4.654-4.654-.039-.853-.048-1.125-.048-3.298 0-2.172.009-2.445.048-3.298.134-2.908 1.748-4.521 4.654-4.653.854-.04 1.125-.049 3.298-.049s2.445.009 3.299.048c2.908.133 4.523 1.751 4.653 4.653.039.854.048 1.127.048 3.299 0 2.173-.009 2.445-.048 3.298z"/></svg>
    </a>
  </div>
  <p class="mt-4 font-sans text-xs font-light tracking-wider text-gray-500 xl:text-sm">©2021. Mario Alberto Chávez Cárdenas</p>
</footer>

  </div>
</aside>


      <main class="flex-auto overflow-hidden text-gray-700">
        <header class="flex flex-col bg-gray-100 lg:hidden" data-controller="menu">
  <div class="flex flex-col w-full px-8 md:flex-row xl:px-10">
    <div class="w-full pt-12 pb-6 md:py-12">
      <a href="/">
        <h1 class="font-sans text-lg font-medium tracking-widest text-gray-700 uppercase md:text-2xl">Mario Alberto Chávez</h1>
      </a>
      <h2 class="mt-4 font-serif text-xs italic tracking-wide text-gray-500 md:text-lg font-extralight">Blog personal desarrollo de software</h2>
    </div>

    <div class="pb-6 md:py-12 md:pl-4 md:self-center md:justify-self-end md:pl-0">
      <a href="#" class="inline-flex items-center px-4 py-2 border border-gray-500 md:flex hover:text-red-500 hover:border-red-500" data-action="menu#toggle">
        <span class="font-semibold text-md md:text-lg">Menú</span>
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" class="w-4 h-4 ml-4" data-menu-target="closed">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 8h16M4 16h16" />
        </svg>
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" class="hidden w-4 h-4 ml-4" data-menu-target="opened">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
        </svg>
      </a>
    </div>
  </div>

  <div data-menu-target="submenu" class="hidden w-full px-8">
    <nav class="lg:flex-grow lg:py-14">
  <ul>
    <li class="pb-4 font-sans font-light tracking-wider text-gray-500 uppercase text-md hover:text-red-500"><a href="/">Inicio</a></li>
    <li class="pb-4 font-sans font-light tracking-wider text-gray-500 uppercase text-md hover:text-red-500"><a href="/desarrollo">Desarrollo</a></li>
    <li class="pb-4 font-sans font-light tracking-wider text-gray-500 uppercase text-md hover:text-red-500"><a href="/fotografía">Fotografía</a></li>
    <li class="pb-4 font-sans font-light tracking-wider text-gray-500 uppercase text-md hover:text-red-500"><a href="/proyectos">Proyectos</a></li>
    <li class="font-sans font-light tracking-wider text-gray-500 uppercase text-md hover:text-red-500"><a href="/acercade">Acerca de</a></li>
  </ul>
</nav>


    <footer class="py-8 lg:py-14">
  <div class="flex space-x-4">
    <a href="https://twitter.com/mario_chavez" target="_blank" class="text-gray-400 hover:text-red-500">
      <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" stroke="currentColor" viewBox="0 0 24 24" class="w-4 h-4"><path d="M24 4.557c-.883.392-1.832.656-2.828.775 1.017-.609 1.798-1.574 2.165-2.724-.951.564-2.005.974-3.127 1.195-.897-.957-2.178-1.555-3.594-1.555-3.179 0-5.515 2.966-4.797 6.045-4.091-.205-7.719-2.165-10.148-5.144-1.29 2.213-.669 5.108 1.523 6.574-.806-.026-1.566-.247-2.229-.616-.054 2.281 1.581 4.415 3.949 4.89-.693.188-1.452.232-2.224.084.626 1.956 2.444 3.379 4.6 3.419-2.07 1.623-4.678 2.348-7.29 2.04 2.179 1.397 4.768 2.212 7.548 2.212 9.142 0 14.307-7.721 13.995-14.646.962-.695 1.797-1.562 2.457-2.549z"/></svg>
    </a>
    <a href="https://instagram.com/mario_chavez" target="_blank" class="text-gray-400 hover:text-red-500">
      <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" stroke="none" viewBox="0 0 24 24" class="w-4 h-4"><path d="M15.233 5.488c-.843-.038-1.097-.046-3.233-.046s-2.389.008-3.232.046c-2.17.099-3.181 1.127-3.279 3.279-.039.844-.048 1.097-.048 3.233s.009 2.389.047 3.233c.099 2.148 1.106 3.18 3.279 3.279.843.038 1.097.047 3.233.047 2.137 0 2.39-.008 3.233-.046 2.17-.099 3.18-1.129 3.279-3.279.038-.844.046-1.097.046-3.233s-.008-2.389-.046-3.232c-.099-2.153-1.111-3.182-3.279-3.281zm-3.233 10.62c-2.269 0-4.108-1.839-4.108-4.108 0-2.269 1.84-4.108 4.108-4.108s4.108 1.839 4.108 4.108c0 2.269-1.839 4.108-4.108 4.108zm4.271-7.418c-.53 0-.96-.43-.96-.96s.43-.96.96-.96.96.43.96.96-.43.96-.96.96zm-1.604 3.31c0 1.473-1.194 2.667-2.667 2.667s-2.667-1.194-2.667-2.667c0-1.473 1.194-2.667 2.667-2.667s2.667 1.194 2.667 2.667zm4.333-12h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm.952 15.298c-.132 2.909-1.751 4.521-4.653 4.654-.854.039-1.126.048-3.299.048s-2.444-.009-3.298-.048c-2.908-.133-4.52-1.748-4.654-4.654-.039-.853-.048-1.125-.048-3.298 0-2.172.009-2.445.048-3.298.134-2.908 1.748-4.521 4.654-4.653.854-.04 1.125-.049 3.298-.049s2.445.009 3.299.048c2.908.133 4.523 1.751 4.653 4.653.039.854.048 1.127.048 3.299 0 2.173-.009 2.445-.048 3.298z"/></svg>
    </a>
  </div>
  <p class="mt-4 font-sans text-xs font-light tracking-wider text-gray-500 xl:text-sm">©2021. Mario Alberto Chávez Cárdenas</p>
</footer>

  </div>
</header>

        <article class="py-16 font-serif lg:py-24 post">
  <header class="px-4 m-auto md:max-w-2xl lg:max-w-4xl">
    <a href="/desarrollo" class="pb-1 text-sm font-bold leading-normal uppercase border-b-4 border-gray-200 transition-all hover:text-red-500">desarrollo</a>
    <h1 class="mt-6 text-3xl font-bold tracking-wide md:text-4xl lg:text-6xl">Neovim y LunarVim para trabajar con Rails</h1>
  </header>

  <div class="px-4 m-auto mt-16 tracking-wider md:max-w-2xl lg:max-w-4xl prose md:prose-lg">
    <figure class="mt-16 aspect-w-16 aspect-h-9">
      <img src="/images/neovim.jpg" loading="lazy" />
    </figure>

    <h1 id="neovim-y-lunarvim-para-trabajar-con-rails">Neovim y LunarVim para trabajar con Rails</h1>

<p>Desde hace más de 15 años he utilizado, primero Vim, luego <a href="https://neovim.io" target="_blank">Neovim</a> para desarrollar software. Mi tendencia es tratar de personalizar solamente lo suficiente para trabajar cómodamente con el código.</p>

<p>En los últimos años, estuve haciendo uso de Vim con <a href="https://spacevim.org" target="_blank">Spacevim</a>, pero para ser sincero nunca hice uso al 100% de todo lo que ofrecía Spacevim. El año pasado vi un tweet sobre Neovim y algo llamado <a href="https://www.lunarvim.org/#opinionated" target="_blank">Lunarvim</a> y me pareció interesante, en particular el soporte que Neovim presentaba para los Language Servers.</p>

<p>Así que tomé la decisión de borrar mi configuración de Vim de años y comenzar desde cero con Neovim.</p>

<p>Instalar Neovim es relativamente fácil, normalmente implica ejecutar un par de comando o descargar un binario. En MacOS es un comando con <a href="https://brew.sh" target="_blank">Homebrew</a>.</p>

<p>brew install neovim</p>

<p>Una vez que está instalado Neovim, el siguiente paso es instalar Lunarvim, nuevamente un comando en la terminal y se instala en un par de minutos, recomiendo la versión estable.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>bash &lt;<span class="o">(</span>curl <span class="nt">-s</span> https://raw.githubusercontent.com/lunarvim/lunarvim/master/utils/installer/install.sh<span class="o">)</span>
</code></pre></div></div>

<p>Durante la instalación va a preguntar si deseamos instalar las dependencias de Javascript, Python y Rust, hay que responder que sí.</p>

<p>LunarVim crear un directorio en <code class="highlighter-rouge">~/.config/lvim</code> donde se encuentra el archivo de configuración de Neovim y Lunarvim <code class="highlighter-rouge">config.lua</code></p>

<p>Aquí está mi archivo de configuración <a href="https://gist.github.com/mariochavez/f2547d0b51353eacf203cf1a00fce3e8" target="_blank">config.lua</a></p>

<p>En ese archivo es donde podemos configurar como deseamos que el editor se comporte y agregar plugins necesarios. Mi configuración es muy básica, solamente hice los siguientes cambios.</p>

<p>Deshabilité que autoformatee mi código al guardar.</p>

<div class="language-lua highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">lvim</span><span class="p">.</span><span class="n">format_on_save</span> <span class="o">=</span> <span class="kc">false</span>
</code></pre></div></div>

<p>No mostrar los mensajes de error al lado del código</p>

<div class="language-lua highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">lvim</span><span class="p">.</span><span class="n">lsp</span><span class="p">.</span><span class="n">diagnostics</span><span class="p">.</span><span class="n">virtual_text</span> <span class="o">=</span> <span class="kc">false</span>
</code></pre></div></div>

<p>Mostrar una línea en la columna 120  y que la numeración de las líneas fuese relativa a donde se encuentra el cursor.</p>

<div class="language-lua highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">vim</span><span class="p">.</span><span class="n">opt</span><span class="p">[</span><span class="s2">"colorcolumn"</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"120"</span>
<span class="n">vim</span><span class="p">.</span><span class="n">opt</span><span class="p">[</span><span class="s2">"relativenumber"</span><span class="p">]</span> <span class="o">=</span> <span class="kc">true</span>
</code></pre></div></div>

<p>Cambié el leader a que sea una coma.</p>

<div class="language-lua highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">lvim</span><span class="p">.</span><span class="n">leader</span> <span class="o">=</span> <span class="s2">","</span>
</code></pre></div></div>

<p>Agregué <a href="https://github.com/nvim-pack/nvim-spectre" target="_blank">Spectre</a>, un plugin para buscar y reemplazar texto en el proyecto, al menú</p>

<div class="language-lua highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">lvim</span><span class="p">.</span><span class="n">builtin</span><span class="p">.</span><span class="n">which_key</span><span class="p">.</span><span class="n">mappings</span><span class="p">[</span><span class="s2">"S"</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span> <span class="s2">"&lt;cmd&gt;lua require('spectre').open()&lt;CR&gt;"</span><span class="p">,</span> <span class="s2">"Spectre"</span> <span class="p">}</span>
</code></pre></div></div>

<p>Modifiqué la búsqueda de archivos para que solo muestre archivos que estén bajo el control de git.</p>

<div class="language-lua highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">lvim</span><span class="p">.</span><span class="n">builtin</span><span class="p">.</span><span class="n">which_key</span><span class="p">.</span><span class="n">mappings</span><span class="p">[</span><span class="s2">"f"</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span> <span class="s2">"&lt;cmd&gt;Telescope git_files&lt;CR&gt;"</span><span class="p">,</span> <span class="s2">"Find File"</span> <span class="p">}</span>
</code></pre></div></div>

<p>Modifiqué el comportamiento para que al guardar un archivo borre espacios en blanco al final de las líneas.</p>

<div class="language-lua highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">vim</span><span class="p">.</span><span class="n">cmd</span><span class="p">(</span><span class="s">[[
  au FocusLost * :wa
  autocmd FileType ruby,javascript,css,ts autocmd BufWritePre * :%s/\s\+$//e
  autocmd FileType ruby,javascript,css,ts autocmd BufWritePre * :%s/\t/  /e
  match ErrorMsg '\s\+$'
]]</span><span class="p">)</span>
</code></pre></div></div>

<p>Agregué los siguientes plugins: <a href="https://github.com/tpope/vim-fugitive" target="_blank">tpope/vim-fugitive</a>, <a href="https://github.com/tpope/vim-rails" target="_blank">tpope/vim-rails</a>, <a href="https://github.com/EdenEast/nightfox.nvim" target="_blank">EdenEast/nightfox.nvim</a>, <a href="https://github.com/nvim-pack/nvim-spectre" target="_blank">windwp/nvim-spectre</a>, principalmente.</p>

<p>Configuré la indentación para Ruby.</p>

<div class="language-lua highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">lvim</span><span class="p">.</span><span class="n">autocommands</span><span class="p">.</span><span class="n">custom_groups</span> <span class="o">=</span> <span class="p">{</span>
  <span class="p">{</span> <span class="s2">"BufWinEnter"</span><span class="p">,</span> <span class="s2">"*.lua"</span><span class="p">,</span> <span class="s2">"setlocal ts=8 sw=8"</span> <span class="p">},</span>
  <span class="p">{</span> <span class="s2">"BufWinEnter"</span><span class="p">,</span> <span class="s2">"*.rb"</span><span class="p">,</span> <span class="s2">"setlocal ts=2 sw=2"</span> <span class="p">},</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Agregué los shortcuts <strong>,wv</strong> y <strong>,wh</strong> para dividir la pantalla verticalmente y horizontalmente.</p>

<div class="language-lua highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">lvim</span><span class="p">.</span><span class="n">builtin</span><span class="p">.</span><span class="n">which_key</span><span class="p">.</span><span class="n">mappings</span><span class="p">[</span><span class="s2">"w"</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
  <span class="n">name</span> <span class="o">=</span> <span class="s2">"Splits"</span><span class="p">,</span>
  <span class="n">w</span> <span class="o">=</span> <span class="p">{</span> <span class="s2">"&lt;C-w&gt;v&lt;C-w&gt;l"</span><span class="p">,</span> <span class="s2">"Vertical"</span> <span class="p">},</span>
  <span class="n">h</span> <span class="o">=</span> <span class="p">{</span> <span class="s2">"&lt;C-w&gt;new&lt;C-w&gt;l"</span><span class="p">,</span> <span class="s2">"Horizontal"</span> <span class="p">},</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Finalmente, activé el soporte para Tailwind.</p>

<div class="language-lua highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">require</span><span class="p">(</span><span class="s2">"lvim.lsp.manager"</span><span class="p">).</span><span class="n">setup</span><span class="p">(</span><span class="s2">"tailwindcss"</span><span class="p">)</span>
</code></pre></div></div>

<p>Dentro de Neovim hay que instalar los Language Server para que ayuden a autocompletar y ofrecer diagnóstico ayuda en el código. En mi caso instalé los siguientes:</p>

<div class="language-lua highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">:</span><span class="n">LspInstall</span> <span class="n">ruby</span> <span class="n">javascript</span> <span class="n">tailwindcss</span> <span class="n">solargraph</span>
</code></pre></div></div>

<p>Para el caso de <a href="https://solargraph.org" target="_blank">Solargraph</a> que ayuda a autocompletar en Ruby, también configuré <a href="https://github.com/testdouble/standardrb" target="_blank">StandardRb</a> para diagnóstico y formateo. La configuración de StandardRb requirió de un par de pasos manuales. Hay que navegar al directorio donde se instaló el Language Server de Solargraph y ejecutar la siguiente línea:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cd</span> ~/.local/share/nvim/lsp_servers/solargraph
gem <span class="nb">install </span>solargraph-standardrb solargraph-rails standardrb <span class="nt">--install-dir</span> <span class="nb">.</span>
</code></pre></div></div>

<p>Luego en el directorio donde está el binario reemplace el contenido de Solargraph con el siguiente código para activar StandardRb.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cd</span> ~/.local/share/nvim/lsp_servers/solargraph/bin
</code></pre></div></div>

<p>Aquí existe un ejecutable Solargraph, hay que abrirlo con el editor, borrar el contenido y reemplazarlos con el siguiente código.</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">#!/usr/bin/env ruby</span>
<span class="c1"># frozen_string_literal: true</span>

<span class="c1"># Solargraph has plugins for linting, but not for formatting. So do a bit of</span>
<span class="c1"># dirty monkeypatching of the formatter[1] until/when they add plugin support</span>
<span class="c1"># for formatting. There aren't great hooks, as this wasn't designed to be</span>
<span class="c1"># extended, so much of #process had to be copied verbatium</span>
<span class="c1"># 1: https://github.com/castwide/solargraph/blob/940b28932626e236871c10293da5e0f5eacf94c0/lib/solargraph/language_server/message/text_document/formatting.rb</span>

<span class="c1"># ENV["BUNDLE_GEMFILE"] ||= File.expand_path("../Gemfile", __dir__)</span>
<span class="c1"># require "bundler/setup"</span>

<span class="nb">require</span> <span class="s2">"solargraph"</span>
<span class="nb">require</span> <span class="s2">"standard"</span>

<span class="k">class</span> <span class="nc">Solargraph::LanguageServer::Message::TextDocument::Formatting</span>
  <span class="k">def</span> <span class="nf">process</span>
    <span class="n">file_uri</span> <span class="o">=</span> <span class="n">params</span><span class="p">[</span><span class="s2">"textDocument"</span><span class="p">][</span><span class="s2">"uri"</span><span class="p">]</span>
    <span class="n">config</span> <span class="o">=</span> <span class="n">config_for</span><span class="p">(</span><span class="n">file_uri</span><span class="p">)</span>
    <span class="n">original</span> <span class="o">=</span> <span class="n">host</span><span class="p">.</span><span class="nf">read_text</span><span class="p">(</span><span class="n">file_uri</span><span class="p">)</span>
    <span class="n">args</span> <span class="o">=</span> <span class="n">cli_args</span><span class="p">(</span><span class="n">file_uri</span><span class="p">,</span> <span class="n">config</span><span class="p">)</span>

    <span class="c1"># require_rubocop(config['version'])</span>
    <span class="c1"># options, paths = RuboCop::Options.new.parse(args)</span>
    <span class="n">std</span> <span class="o">=</span> <span class="no">Standard</span><span class="o">::</span><span class="no">BuildsConfig</span><span class="p">.</span><span class="nf">new</span><span class="p">.</span><span class="nf">call</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>
    <span class="n">options</span> <span class="o">=</span> <span class="n">std</span><span class="p">.</span><span class="nf">rubocop_options</span>
    <span class="n">options</span><span class="p">[</span><span class="ss">:stdin</span><span class="p">]</span> <span class="o">=</span> <span class="n">original</span>
    <span class="n">corrections</span> <span class="o">=</span> <span class="n">redirect_stdout</span> <span class="k">do</span>
      <span class="no">RuboCop</span><span class="o">::</span><span class="no">Runner</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">options</span><span class="p">,</span> <span class="n">std</span><span class="p">.</span><span class="nf">rubocop_config_store</span><span class="p">).</span><span class="nf">run</span><span class="p">(</span><span class="n">std</span><span class="p">.</span><span class="nf">paths</span><span class="p">)</span>
    <span class="k">end</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">options</span><span class="p">[</span><span class="ss">:stdin</span><span class="p">]</span>

    <span class="n">log_corrections</span><span class="p">(</span><span class="n">corrections</span><span class="p">)</span>

    <span class="nb">format</span> <span class="n">original</span><span class="p">,</span> <span class="n">result</span>
  <span class="k">rescue</span> <span class="no">RuboCop</span><span class="o">::</span><span class="no">ValidationError</span><span class="p">,</span> <span class="no">RuboCop</span><span class="o">::</span><span class="no">ConfigNotFoundError</span> <span class="o">=&gt;</span> <span class="n">e</span>
    <span class="n">set_error</span><span class="p">(</span><span class="no">Solargraph</span><span class="o">::</span><span class="no">LanguageServer</span><span class="o">::</span><span class="no">ErrorCodes</span><span class="o">::</span><span class="no">INTERNAL_ERROR</span><span class="p">,</span> <span class="s2">"[</span><span class="si">#{</span><span class="n">e</span><span class="p">.</span><span class="nf">class</span><span class="si">}</span><span class="s2">] </span><span class="si">#{</span><span class="n">e</span><span class="p">.</span><span class="nf">message</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">formatter_class</span><span class="p">(</span><span class="n">_config</span><span class="p">)</span>
    <span class="no">Standard</span><span class="o">::</span><span class="no">Formatter</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="no">Solargraph</span><span class="o">::</span><span class="no">Shell</span><span class="p">.</span><span class="nf">start</span><span class="p">(</span><span class="no">ARGV</span><span class="p">)</span>
</code></pre></div></div>

<p>Después de esto solo queda en cada proyecto de Ruby on Rails agregar dos archivos, uno para indicar la configuración de Solargraph y otro para la configuración de StandardRb.</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># .solargraph.yml</span>
<span class="na">plugins</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s">solargraph-standardrb</span>
  <span class="pi">-</span> <span class="s">solargraph-rails</span>
<span class="na">reporters</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s">standardrb</span>
</code></pre></div></div>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># .standard.yml</span>
<span class="na">plugins</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s">solargraph-standardrb</span>
  <span class="pi">-</span> <span class="s">solargraph-rails</span>
<span class="na">reporters</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s">standardrb</span>
</code></pre></div></div>

  </div>
</article>

      </main>
    </section>

  </body>
</html>
